(this.webpackJsonpgonzalez=this.webpackJsonpgonzalez||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(26)},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7);function i(e,t){if(null==e)return{};var n,i,o=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length/3,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb(".concat(n.map((function(e){return parseInt(e,16)})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(["Material-UI: unsupported `".concat(e,"` color."),"We support the following formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()."].join("\n"));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function a(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function s(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){return e=i(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function c(e,t){if(e=i(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function l(e,t){if(e=i(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}))},,function(e,t,n){e.exports=n(34)()},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(27)},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(0),a=n.n(o),s=(n(5),n(22)),u=n.n(s),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="object"===("undefined"===typeof window?"undefined":c(window))&&"object"===("undefined"===typeof document?"undefined":c(document))&&9===document.nodeType;function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var p=n(10),d=n(9),m=n(7),y={}.constructor;function v(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(v);if(e.constructor!==y)return e;var t={};for(var n in e)t[n]=v(e[n]);return t}function g(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=v(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var b=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n};function w(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=b(e[r]," ");else n=b(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n}function _(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function T(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;if(e&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var u=a[s];for(var c in u){var l=u[c];null!=l&&(r&&(r+="\n"),r+=""+_(c+": "+w(l)+";",o))}}else for(var h in a){var f=a[h];null!=f&&(r&&(r+="\n"),r+=""+_(h+": "+w(f)+";",o))}for(var p in t){var d=t[p];null!=d&&"fallbacks"!==p&&(r&&(r+="\n"),r+=""+_(p+": "+w(d)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),_(e+" {"+r,--o)+_("}",o)):r}var E=/([[\].#*$><+~=|^:(),"'`\s])/g,S="undefined"!==typeof CSS&&CSS.escape,C=function(e){return S?S(e):e.replace(E,"\\$1")},I=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),k=function(e){function t(t,n,r){var i;(i=e.call(this,t,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(Object(d.a)(Object(d.a)(i)),s),i.selectorText="."+C(i.id)),i}Object(p.a)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=w(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return T(this.selectorText,this.style,n)},f(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(I),N={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new k(e,t,n)}},A={indent:1,children:!0},D=/@([\w-]+)/,R=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e;var i=e.match(D);for(var o in this.at=i?i[1]:"unknown",this.options=n,this.rules=new Z(Object(r.a)({},n,{parent:this})),t)this.rules.add(o,t[o]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=A),null==e.indent&&(e.indent=A.indent),null==e.children&&(e.children=A.children),!1===e.children)return this.key+" {}";var t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""},e}(),O=/@media|@supports\s+/,x={onCreateRule:function(e,t,n){return O.test(e)?new R(e,t,n):null}},P={indent:1,children:!0},M=/@keyframes\s+([\w-]+)/,L=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var i=e.match(M);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var o=n.scoped,a=n.sheet,s=n.generateId;for(var u in this.id=!1===o?this.name:C(s(this,a)),this.rules=new Z(Object(r.a)({},n,{parent:this})),t)this.rules.add(u,t[u],Object(r.a)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=P),null==e.indent&&(e.indent=P.indent),null==e.children&&(e.children=P.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),F=/@keyframes\s+/,U=/\$([\w-]+)/g,j=function(e,t){return"string"===typeof e?e.replace(U,(function(e,n){return n in t?t[n]:e})):e},V=function(e,t,n){var r=e[t],i=j(r,n);i!==r&&(e[t]=i)},q={onCreateRule:function(e,t,n){return"string"===typeof e&&F.test(e)?new L(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&V(e,"animation-name",n.keyframes),"animation"in e&&V(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return j(e,r.keyframes);default:return e}}},B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return Object(p.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return T(this.key,this.style,n)},t}(I),W={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new B(e,t,n):null}},z=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=T(this.key,this.style[n]),this.style[n+1]&&(t+="\n");return t}return T(this.key,this.style,e)},e}(),K={onCreateRule:function(e,t,n){return"@font-face"===e?new z(e,t,n):null}},H=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return T(this.key,this.style,e)},e}(),Q={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new H(e,t,n):null}},G=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Y={"@charset":!0,"@import":!0,"@namespace":!0},X=[N,x,q,W,K,Q,{onCreateRule:function(e,t,n){return e in Y?new G(e,t,n):null}}],$={process:!0},J={force:!0,process:!0},Z=function(){function e(e){this.map={},this.raw={},this.index=[],this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,o=i.parent,a=i.sheet,s=i.jss,u=i.Renderer,c=i.generateId,l=i.scoped,h=Object(r.a)({classes:this.classes,parent:o,sheet:a,jss:s,Renderer:u,generateId:c,scoped:l},n);this.raw[e]=t,e in this.classes&&(h.selector="."+C(this.classes[e]));var f=g(e,t,h);if(!f)return null;this.register(f);var p=void 0===h.index?this.index.length:h.index;return this.index.splice(p,0,f),f},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof k?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof L&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof k?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof L&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.onUpdate(t,this.get(e),n);else for(var r=0;r<this.index.length;r++)this.onUpdate(t,this.index[r],n)},t.onUpdate=function(t,n,r){void 0===r&&(r=$);var i=this.options,o=i.jss.plugins,a=i.sheet;if(n.rules instanceof e)n.rules.update(t,r);else{var s=n,u=s.style;if(o.onUpdate(t,n,a,r),r.process&&u&&u!==s.style){for(var c in o.onProcessStyle(s.style,s,a),s.style){var l=s.style[c];l!==u[c]&&s.prop(c,l,J)}for(var h in u){var f=s.style[h],p=u[h];null==f&&f!==p&&s.prop(h,null,J)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t},e}(),ee=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(r.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Z(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.toString=function(e){return this.rules.toString(e)},e}(),te=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ne=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Object(m.a)(t,["attached"]),i="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=n&&a.attached!==n||(i&&(i+="\n"),i+=a.toString(r))}return i},f(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),re="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ie="2f1acc6c3a606b082e5eef5e54414ffb";null==re[ie]&&(re[ie]=0);var oe=re[ie]++,ae=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+oe+i+t:o+n.key+"-"+oe+(i?"-"+i:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}};function ue(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}}function ce(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=w(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0}function le(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}}function he(e,t){return e.selectorText=t,e.selectorText===t}var fe=se((function(){return document.querySelector("head")}));function pe(e){var t=ne.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=fe(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var de=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,n){var r=e.cssRules.length;(void 0===n||n>r)&&(n=r);try{if("insertRule"in e)e.insertRule(t,n);else if("appendRule"in e){e.appendRule(t)}}catch(i){return!1}return e.cssRules[n]},ye=function(){var e=document.createElement("style");return e.textContent="\n",e},ve=function(){function e(e){this.getPropertyValue=ue,this.setProperty=ce,this.removeProperty=le,this.setSelector=he,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,e&&ne.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||ye(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=de();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=pe(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else fe().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;return("conditional"!==e.type&&"keyframes"!==e.type||!1!==(i=me(n,r.toString({children:!1}),t)))&&(this.insertRules(r.rules,i),i)}if(e.renderable&&e.renderable.parentStyleSheet===this.element.sheet)return e.renderable;var o=e.toString();if(!o)return!1;var a=me(n,o,t);return!1!==a&&(this.hasInsertedRules=!0,e.renderable=a,a)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)},t.indexOf=function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ge=0,be=function(){function e(e){this.id=ge++,this.version="10.0.0",this.plugins=new te,this.options={id:{minify:!1},createGenerateId:ae,Renderer:l?ve:null,plugins:[]},this.generateId=ae({minify:!1});for(var t=0;t<X.length;t++)this.plugins.use(X[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(r.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ne.index?0:ne.index+1);var i=new ee(e,Object(r.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),ne.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=Object(r.a)({},n,{jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var o=g(e,t,i);return o&&this.plugins.onProcessRule(o),o},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();var we="undefined"!==typeof CSS&&CSS&&"number"in CSS,_e=function(e){return new be(e)};_e();var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;if(e.Component,!n)return t;var i=Object(r.a)({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i},Ee={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Se=a.a.createContext(null);function Ce(){return a.a.useContext(Se)}var Ie="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",ke=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ne=Date.now(),Ae="fnValues"+Ne,De="fnStyle"+ ++Ne;var Re=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=g(e,{},n);return r[De]=t,r},onProcessStyle:function(e,t){if(Ae in t||De in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Ae]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[De];o&&(i.style=o(e)||{});var a=i[Ae];if(a)for(var s in a)i.prop(s,a[s](e),r)}}},Oe="@global",xe="@global ",Pe=function(){function e(e,t,n){for(var i in this.type="global",this.at=Oe,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Z(Object(r.a)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),Me=function(){function e(e,t,n){this.type="global",this.at=Oe,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var i=e.substr(xe.length);this.rule=n.jss.createRule(i,t,Object(r.a)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Le=/\s*,\s*/g;function Fe(e,t){for(var n=e.split(Le),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var Ue=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Oe)return new Pe(e,t,n);if("@"===e[0]&&e.substr(0,xe.length)===xe)return new Me(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e){"style"===e.type&&(function(e){var t=e.options,n=e.style,i=n?n[Oe]:null;if(i){for(var o in i)t.sheet.addRule(o,i[o],Object(r.a)({},t,{selector:Fe(o,e.selector)}));delete n[Oe]}}(e),function(e){var t=e.options,n=e.style;for(var i in n)if("@"===i[0]&&i.substr(0,Oe.length)===Oe){var o=Fe(i.substr(Oe.length),e.selector);t.sheet.addRule(o,n[i],Object(r.a)({},t,{selector:o})),delete n[i]}}(e))}}},je=/\s*,\s*/g,Ve=/&/g,qe=/\$([\w-]+)/g;var Be=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?(i=i).selector:r}}function t(e,t){for(var n=t.split(je),r=e.split(je),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(Ve,a):a+" "+u}return i}function n(e,t,n){if(n)return Object(r.a)({},n,{index:n.index+1});var i=e.options.nestingLevel;return i=void 0===i?1:i+1,Object(r.a)({},e.options,{nestingLevel:i,index:t.indexOf(e)+1})}return{onProcessStyle:function(i,o,a){if("style"!==o.type)return i;var s,u,c=o,l=c.options.parent;for(var h in i){var f=-1!==h.indexOf("&"),p="@"===h[0];if(f||p){if(s=n(c,l,s),f){var d=t(h,c.selector);u||(u=e(l,a)),d=d.replace(qe,u),l.addRule(d,i[h],Object(r.a)({},s,{selector:d}))}else p&&l.addRule(h,{},s).addRule(c.key,i[h],{selector:c.selector});delete i[h]}}return i}}},We=/[A-Z]/g,ze=/^ms-/,Ke={};function He(e){return"-"+e.toLowerCase()}var Qe=function(e){if(Ke.hasOwnProperty(e))return Ke[e];var t=e.replace(We,He);return Ke[e]=ze.test(t)?"-"+t:t};function Ge(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Qe(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ge):t.fallbacks=Ge(e.fallbacks)),t}var Ye=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ge(e[t]);return e}return Ge(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Qe(t);return t===r?e:(n.prop(r,e),null)}}},Xe=we&&CSS?CSS.px:"px",$e=we&&CSS?CSS.ms:"ms",Je=we&&CSS?CSS.percent:"%";function Ze(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var et=Ze({"animation-delay":$e,"animation-duration":$e,"background-position":Xe,"background-position-x":Xe,"background-position-y":Xe,"background-size":Xe,border:Xe,"border-bottom":Xe,"border-bottom-left-radius":Xe,"border-bottom-right-radius":Xe,"border-bottom-width":Xe,"border-left":Xe,"border-left-width":Xe,"border-radius":Xe,"border-right":Xe,"border-right-width":Xe,"border-top":Xe,"border-top-left-radius":Xe,"border-top-right-radius":Xe,"border-top-width":Xe,"border-width":Xe,margin:Xe,"margin-bottom":Xe,"margin-left":Xe,"margin-right":Xe,"margin-top":Xe,padding:Xe,"padding-bottom":Xe,"padding-left":Xe,"padding-right":Xe,"padding-top":Xe,"mask-position-x":Xe,"mask-position-y":Xe,"mask-size":Xe,height:Xe,width:Xe,"min-height":Xe,"max-height":Xe,"min-width":Xe,"max-width":Xe,bottom:Xe,left:Xe,top:Xe,right:Xe,"box-shadow":Xe,"text-shadow":Xe,"column-gap":Xe,"column-rule":Xe,"column-rule-width":Xe,"column-width":Xe,"font-size":Xe,"font-size-delta":Xe,"letter-spacing":Xe,"text-indent":Xe,"text-stroke":Xe,"text-stroke-width":Xe,"word-spacing":Xe,motion:Xe,"motion-offset":Xe,outline:Xe,"outline-offset":Xe,"outline-width":Xe,perspective:Xe,"perspective-origin-x":Je,"perspective-origin-y":Je,"transform-origin":Je,"transform-origin-x":Je,"transform-origin-y":Je,"transform-origin-z":Je,"transition-delay":$e,"transition-duration":$e,"vertical-align":Xe,"flex-basis":Xe,"shape-margin":Xe,size:Xe,grid:Xe,"grid-gap":Xe,"grid-row-gap":Xe,"grid-column-gap":Xe,"grid-template-rows":Xe,"grid-template-columns":Xe,"grid-auto-rows":Xe,"grid-auto-columns":Xe,"box-shadow-x":Xe,"box-shadow-y":Xe,"box-shadow-blur":Xe,"box-shadow-spread":Xe,"font-line-height":Xe,"text-shadow-x":Xe,"text-shadow-y":Xe,"text-shadow-blur":Xe});function tt(e,t,n){if(!t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=tt(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=tt(i,t[i],n);else for(var o in t)t[o]=tt(e+"-"+o,t[o],n);else if("number"===typeof t)return n[e]?""+t+n[e]:et[e]?"function"===typeof et[e]?et[e](t).toString():""+t+et[e]:t.toString();return t}var nt=function(e){void 0===e&&(e={});var t=Ze(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=tt(r,e[r],t);return e},onChangeValue:function(e,n){return tt(n,e,t)}}},rt=n(15),it="",ot="",at="",st="",ut=l&&"ontouchstart"in document.documentElement;if(l){var ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},lt=document.createElement("p").style;for(var ht in ct)if(ht+"Transform"in lt){it=ht,ot=ct[ht];break}"Webkit"===it&&"msHyphens"in lt&&(it="ms",ot=ct.ms,st="edge"),"Webkit"===it&&"-apple-trailing-word"in lt&&(at="apple")}var ft={js:it,css:ot,vendor:at,browser:st,isTouch:ut};var pt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ft.js?"-webkit-"+e:ft.css+e)}},dt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ft.js?ft.css+"print-"+e:e)}},mt=/[-\s]+(.)?/g;function yt(e,t){return t?t.toUpperCase():""}function vt(e){return e.replace(mt,yt)}function gt(e){return vt("-"+e)}var bt,wt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ft.js){if(vt("mask-image")in t)return e;if(ft.js+gt("mask-image")in t)return ft.css+e}return e}},_t={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==ft.vendor||ft.isTouch?e:ft.css+e)}},Tt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ft.css+e)}},Et={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ft.css+e)}},St={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ft.js||"ms"===ft.js?ft.css+e:e)}},Ct={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ft.js||"ms"===ft.js||"apple"===ft.vendor?ft.css+e:e)}},It={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ft.js?"WebkitColumn"+gt(e)in t&&ft.css+"column-"+e:"Moz"===ft.js&&("page"+gt(e)in t&&"page-"+e))}},kt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ft.js)return e;var n=e.replace("-inline","");return ft.js+gt(n)in t&&ft.css+n}},Nt={supportedProperty:function(e,t){return vt(e)in t&&e}},At={supportedProperty:function(e,t){var n=gt(e);return"-"===e[0]?e:"-"===e[0]&&"-"===e[1]?e:ft.js+n in t?ft.css+e:"Webkit"!==ft.js&&"Webkit"+n in t&&"-webkit-"+e}},Dt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ft.js?""+ft.css+e:e)}},Rt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ft.js?ft.css+"scroll-chaining":e)}},Ot={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},xt={supportedProperty:function(e,t){var n=Ot[e];return!!n&&(ft.js+gt(n)in t&&ft.css+n)}},Pt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Mt=Object.keys(Pt),Lt=function(e){return ft.css+e},Ft=[pt,dt,wt,_t,Tt,Et,St,Ct,It,kt,Nt,At,Dt,Rt,xt,{supportedProperty:function(e,t,n){var r=n.multiple;if(Mt.indexOf(e)>-1){var i=Pt[e];if(!Array.isArray(i))return ft.js+gt(i)in t&&ft.css+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(ft.js+gt(i[0])in t))return!1;return i.map(Lt)}return!1}}],Ut=Ft.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),jt=Ft.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(rt.a)(t.noPrefill)),e}),[]),Vt={};if(l){bt=document.createElement("p");var qt=window.getComputedStyle(document.documentElement,"");for(var Bt in qt)isNaN(Bt)||(Vt[qt[Bt]]=qt[Bt]);jt.forEach((function(e){return delete Vt[e]}))}function Wt(e,t){if(void 0===t&&(t={}),!bt)return e;if(null!=Vt[e])return Vt[e];"transition"!==e&&"transform"!==e||(t[e]=e in bt.style);for(var n=0;n<Ut.length&&(Vt[e]=Ut[n](e,bt.style,t),!Vt[e]);n++);try{bt.style[e]=""}catch(r){return!1}return Vt[e]}var zt,Kt={},Ht={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Qt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Gt(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Wt(t):", "+Wt(n);return r||(t||n)}function Yt(e,t){var n=t;if(!zt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Kt[r])return Kt[r];try{zt.style[e]=n}catch(i){return Kt[r]=!1,!1}if(Ht[e])n=n.replace(Qt,Gt);else if(""===zt.style[e]&&("-ms-flex"===(n=ft.css+n)&&(zt.style[e]="-ms-flexbox"),zt.style[e]=n,""===zt.style[e]))return Kt[r]=!1,!1;return zt.style[e]="",Kt[r]=n,Kt[r]}l&&(zt=document.createElement("p"));var Xt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=Wt(n);o&&o!==n&&(i=!0);var a=!1,s=Yt(o,w(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]?n:"ms"===ft.js?n:"@"+ft.css+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Yt(t,w(e))||e}}};var $t=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),o=0;o<i.length;o++)r[i[o]]=t[i[o]];return r}}};var Jt=function(){return{plugins:[Re(),Ue(),Be(),Ye(),nt(),"undefined"===typeof window?null:Xt(),$t()]}},Zt=_e(Jt()),en={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0;return function(e,t){u+=1;var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==ke.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Ie]&&""===a?"".concat(o,"-").concat(u):o}return"".concat(s).concat(i).concat(u)}}(),jss:Zt,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},tn=a.a.createContext(en);var nn=-1e9;var rn=n(18);function on(e){return e&&"object"===Object(rn.a)(e)&&!Array.isArray(e)}function an(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?Object(r.a)({},e):e;return on(e)&&on(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(on(t[r])&&r in e?i[r]=an(e[r],t[r],n):i[r]=t[r])})),i}var sn=function(e){var t="function"===typeof e;return{create:function(n,i){var o;try{o=t?e(n):e}catch(u){throw u}if(!i||!n.overrides||!n.overrides[i])return o;var a=n.overrides[i],s=Object(r.a)({},o);return Object.keys(a).forEach((function(e){s[e]=an(s[e],a[e])})),s},options:{}}},un={};function cn(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Te({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function ln(e,t){var n=e.state,i=e.theme,o=e.stylesOptions,a=e.stylesCreator,s=e.name;if(!o.disableGeneration){var u=Ee.get(o.sheetsManager,a,i);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Ee.set(o.sheetsManager,a,i,u));var c=Object(r.a)({},a.options,{},o,{theme:i,flip:"boolean"===typeof o.flip?o.flip:"rtl"===i.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=o.sheetsRegistry;if(0===u.refs){var h;o.sheetsCache&&(h=Ee.get(o.sheetsCache,a,i));var f=a.create(i,s);h||((h=o.jss.createStyleSheet(f,Object(r.a)({link:!1},c))).attach(),o.sheetsCache&&Ee.set(o.sheetsCache,a,i,h)),l&&l.add(h),u.staticSheet=h,u.dynamicStyles=function e(t){var n=null;for(var r in t){var i=t[r],o=typeof i;if("function"===o)n||(n={}),n[r]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=e(i);a&&(n||(n={}),n[r]=a)}}return n}(f)}if(u.dynamicStyles){var p=o.jss.createStyleSheet(u.dynamicStyles,Object(r.a)({link:!0},c));p.update(t).attach(),n.dynamicSheet=p,n.classes=Te({baseClasses:u.staticSheet.classes,newClasses:p.classes}),l&&l.add(p)}else n.classes=u.staticSheet.classes;u.refs+=1}}function hn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function fn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=Ee.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(Ee.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function pn(e,t){var n,r=a.a.useRef([]),i=a.a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),a.a.useEffect((function(){return function(){n&&n()}}),[i])}var dn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,u=t.defaultTheme,c=void 0===u?un:u,l=Object(i.a)(t,["name","classNamePrefix","Component","defaultTheme"]),h=sn(e),f=n||o||"makeStyles";return h.options={index:nn+=1,name:n,meta:f,classNamePrefix:f},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ce()||c,i=Object(r.a)({},a.a.useContext(tn),{},l),o=a.a.useRef(),u=a.a.useRef();return pn((function(){var r={name:n,state:{},stylesCreator:h,stylesOptions:i,theme:t};return ln(r,e),u.current=!1,o.current=r,function(){fn(r)}}),[t,h]),a.a.useEffect((function(){u.current&&hn(o.current,e),u.current=!0})),cn(o.current,e.classes,s)}};var mn=function(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r},yn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,s=t.withTheme,c=void 0!==s&&s,l=t.name,h=Object(i.a)(t,["defaultTheme","withTheme","name"]);var f=l,p=dn(e,Object(r.a)({defaultTheme:o,Component:n,name:l||n.displayName,classNamePrefix:f},h)),d=a.a.forwardRef((function(e,t){e.classes;var s,u=e.innerRef,h=Object(i.a)(e,["classes","innerRef"]),f=p(e),d=h;return("string"===typeof l||c)&&(s=Ce()||o,l&&(d=mn({theme:s,name:l,props:h})),c&&!d.theme&&(d.theme=s)),a.a.createElement(n,Object(r.a)({ref:u||t,classes:f},d))}));return d.defaultProps=n.defaultProps,u()(d,n),d}};function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=["xs","sm","md","lg","xl"];function bn(e,t,n){var i;return Object(r.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({paddingLeft:t(2),paddingRight:t(2)},n,vn({},e.up("sm"),Object(r.a)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},vn(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),vn(i,e.up("sm"),{minHeight:64}),i)},n)}var wn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},_n={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Tn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},En={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Sn={black:"#000",white:"#fff"},Cn=n(3),In={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sn.white,default:Tn[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},kn={text:{primary:Sn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Tn[800],default:"#303030"},action:{active:Sn.white,hover:"rgba(255, 255, 255, 0.1)",hoverOpacity:.1,selected:"rgba(255, 255, 255, 0.2)",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)"}};function Nn(e,t,n,r){e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(Cn.d)(e.main,r):"dark"===t&&(e.dark=Object(Cn.a)(e.main,1.5*r)))}function An(e){return Math.round(1e5*e)/1e5}var Dn={textTransform:"uppercase"},Rn='"Roboto", "Helvetica", "Arial", sans-serif';function On(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,a=void 0===o?Rn:o,s=n.fontSize,u=void 0===s?14:s,c=n.fontWeightLight,l=void 0===c?300:c,h=n.fontWeightRegular,f=void 0===h?400:h,p=n.fontWeightMedium,d=void 0===p?500:p,m=n.fontWeightBold,y=void 0===m?700:m,v=n.htmlFontSize,g=void 0===v?16:v,b=n.allVariants,w=n.pxToRem,_=Object(i.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var T=u/14,E=w||function(e){return"".concat(e/g*T,"rem")},S=function(e,t,n,i,o){return Object(r.a)({fontFamily:a,fontWeight:e,fontSize:E(t),lineHeight:n},a===Rn?{letterSpacing:"".concat(An(i/t),"em")}:{},{},o,{},b)},C={h1:S(l,96,1,-1.5),h2:S(l,60,1,-.5),h3:S(f,48,1.04,0),h4:S(f,34,1.17,.25),h5:S(f,24,1.33,0),h6:S(d,20,1.6,.15),subtitle1:S(f,16,1.75,.15),subtitle2:S(d,14,1.57,.1),body1:S(f,16,1.5,.15),body2:S(f,14,1.43,.15),button:S(d,14,1.75,.4,Dn),caption:S(f,12,1.66,.4),overline:S(f,12,2.66,1,Dn)};return an(Object(r.a)({htmlFontSize:g,pxToRem:E,round:An,fontFamily:a,fontSize:u,fontWeightLight:l,fontWeightRegular:f,fontWeightMedium:d,fontWeightBold:y},C),_,{clone:!1})}var xn=.2,Pn=.14,Mn=.12;function Ln(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(xn,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(Pn,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(Mn,")")].join(",")}var Fn=["none",Ln(0,2,1,-1,0,1,1,0,0,1,3,0),Ln(0,3,1,-2,0,2,2,0,0,1,5,0),Ln(0,3,3,-2,0,3,4,0,0,1,8,0),Ln(0,2,4,-1,0,4,5,0,0,1,10,0),Ln(0,3,5,-1,0,5,8,0,0,1,14,0),Ln(0,3,5,-1,0,6,10,0,0,1,18,0),Ln(0,4,5,-2,0,7,10,1,0,2,16,1),Ln(0,5,5,-3,0,8,10,1,0,3,14,2),Ln(0,5,6,-3,0,9,12,1,0,3,16,2),Ln(0,6,6,-3,0,10,14,1,0,4,18,3),Ln(0,6,7,-4,0,11,15,1,0,4,20,3),Ln(0,7,8,-4,0,12,17,2,0,5,22,4),Ln(0,7,8,-4,0,13,19,2,0,5,24,4),Ln(0,7,9,-4,0,14,21,2,0,5,26,4),Ln(0,8,9,-5,0,15,22,2,0,6,28,5),Ln(0,8,10,-5,0,16,24,2,0,6,30,5),Ln(0,8,11,-5,0,17,26,2,0,6,32,5),Ln(0,9,11,-5,0,18,28,2,0,7,34,6),Ln(0,9,12,-6,0,19,29,2,0,7,36,6),Ln(0,10,13,-6,0,20,31,3,0,8,38,7),Ln(0,10,13,-6,0,21,33,3,0,8,40,7),Ln(0,10,14,-6,0,22,35,3,0,8,42,7),Ln(0,11,14,-7,0,23,36,3,0,9,44,8),Ln(0,11,15,-7,0,24,38,3,0,9,46,8)],Un={borderRadius:4};var jn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Vn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195},qn=function(e){return"".concat(Math.round(e),"ms")},Bn={easing:jn,duration:Vn,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Vn.standard:n,o=t.easing,a=void 0===o?jn.easeInOut:o,s=t.delay,u=void 0===s?0:s;Object(i.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:qn(r)," ").concat(a," ").concat("string"===typeof u?u:qn(u))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Wn={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.mixins,a=void 0===o?{}:o,s=e.palette,u=void 0===s?{}:s,c=e.shadows,l=e.spacing,h=e.typography,f=void 0===h?{}:h,p=Object(i.a)(e,["breakpoints","mixins","palette","shadows","spacing","typography"]),d=function(e){var t=e.primary,n=void 0===t?{light:wn[300],main:wn[500],dark:wn[700]}:t,o=e.secondary,a=void 0===o?{light:_n.A200,main:_n.A400,dark:_n.A700}:o,s=e.error,u=void 0===s?{light:En[300],main:En[500],dark:En[700]}:s,c=e.type,l=void 0===c?"light":c,h=e.contrastThreshold,f=void 0===h?3:h,p=e.tonalOffset,d=void 0===p?.2:p,m=Object(i.a)(e,["primary","secondary","error","type","contrastThreshold","tonalOffset"]);function y(e){return Object(Cn.c)(e,kn.text.primary)>=f?kn.text.primary:In.text.primary}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;return!(e=Object(r.a)({},e)).main&&e[t]&&(e.main=e[t]),Nn(e,"light",n,d),Nn(e,"dark",i,d),e.contrastText||(e.contrastText=y(e.main)),e}var g={dark:kn,light:In};return an(Object(r.a)({common:Sn,type:l,primary:v(n),secondary:v(a,"A400","A200","A700"),error:v(u),grey:Tn,contrastThreshold:f,getContrastText:y,augmentColor:v,tonalOffset:d},g[l]),m,{clone:!1})}(u),m=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,o=e.unit,a=void 0===o?"px":o,s=e.step,u=void 0===s?5:s,c=Object(i.a)(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function h(e,t){var r=gn.indexOf(t)+1;return r===gn.length?l(e):"@media (min-width:".concat(n[e]).concat(a,") and ")+"(max-width:".concat(n[gn[r]]-u/100).concat(a,")")}return Object(r.a)({keys:gn,values:n,up:l,down:function(e){var t=gn.indexOf(e)+1,r=n[gn[t]];return t===gn.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(a,")")},between:h,only:function(e){return h(e,e)},width:function(e){return n[e]}},c)}(n),y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;e="function"===typeof t?t:function(e){return t*e};var n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 0===n.length?e(1):1===n.length?e(n[0]):n.map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return t}}),n.mui=!0,n}(l);return Object(r.a)({breakpoints:m,direction:"ltr",mixins:bn(m,y,a),overrides:{},palette:d,props:{},shadows:c||Fn,typography:On(d,f),spacing:y},an({shape:Un,transitions:Bn,zIndex:Wn},p))}();t.a=function(e,t){return yn(e,Object(r.a)({defaultTheme:zn},t))}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(21);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o=n(13);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(t,n){e.exports=function(){"use strict";!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(e,t){e=h(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[h(e)]},d.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},d.prototype.set=function(e,t){this.map[h(e)]=f(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},T.error=function(){var e=new T(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];T.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new T(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=w,e.Response=T,e.fetch=function(e,t){return new Promise((function(n,i){var o=new w(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new T(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=y(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=y(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return-1<c.indexOf(t)?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function T(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}function i(e){return e&&e.Math==Math&&e}function o(e){try{return!!e()}catch(e){return!0}}function a(e){return"object"==typeof e?null!==e:"function"==typeof e}function s(e){return T?_.createElement(e):{}}function u(e){if(!a(e))throw TypeError(String(e)+" is not an object");return e}function c(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function l(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function h(t,n){try{I(g,t,n)}catch(e){g[t]=n}return n}function f(e,t){return D.call(e,t)}function p(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++P+M).toString(36)}function d(e){return L[e]||(L[e]=p(e))}var m,y,v,g=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||Function("return this")(),b=!1,w=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_=g.document,T=a(_)&&a(_.createElement),E=!w&&!o((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})),S=Object.defineProperty,C={f:w?S:function(e,t,n){if(u(e),t=c(t,!0),u(n),E)try{return S(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},I=w?function(e,t,n){return C.f(e,t,l(1,n))}:function(e,t,n){return e[t]=n,e},k="__core-js_shared__",N=g[k]||h(k,{}),A=r((function(e){(e.exports=function(e,t){return N[e]||(N[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),D={}.hasOwnProperty,R=A("native-function-to-string",Function.toString),O=g.WeakMap,x="function"==typeof O&&/native code/.test(R.call(O)),P=0,M=Math.random(),L=A("keys"),F={},U=g.WeakMap;if(x){var j=new U,V=j.get,q=j.has,B=j.set;m=function(e,t){return B.call(j,e,t),t},y=function(e){return V.call(j,e)||{}},v=function(e){return q.call(j,e)}}else{var W=d("state");F[W]=!0,m=function(e,t){return I(e,W,t),t},y=function(e){return f(e,W)?e[W]:{}},v=function(e){return f(e,W)}}function z(e){return Y.call(e).slice(8,-1)}function K(e){return J[e]||(J[e]=X&&$[e]||(X?$:p)("Symbol."+e))}function H(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Z))?n:ee?z(t):"Object"==(r=z(t))&&"function"==typeof t.callee?"Arguments":r}var Q={set:m,get:y,has:v,enforce:function(e){return v(e)?y(e):m(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=y(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},G=r((function(e){var t=Q.get,n=Q.enforce,r=String(R).split("toString");A("inspectSource",(function(e){return R.call(e)})),(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||f(i,"name")||I(i,"name",t),n(i).source=r.join("string"==typeof t?t:"")),e!==g?(a?!u&&e[t]&&(s=!0):delete e[t],s?e[t]=i:I(e,t,i)):s?e[t]=i:h(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||R.call(this)}))})),Y={}.toString,X=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),$=g.Symbol,J=A("wks"),Z=K("toStringTag"),ee="Arguments"==z(function(){return arguments}()),te={};te[K("toStringTag")]="z";var ne="[object z]"!==String(te)?function(){return"[object "+H(this)+"]"}:te.toString,re=Object.prototype;function ie(e){return isNaN(e=+e)?0:(0<e?_e:we)(e)}function oe(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function ae(e){return function(t,n){var r,i,o=String(oe(t)),a=ie(n),s=o.length;return a<0||s<=a?e?"":void 0:(r=o.charCodeAt(a))<55296||56319<r||a+1===s||(i=o.charCodeAt(a+1))<56320||57343<i?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}function se(e){return ke(oe(e))}function ue(e){return"function"==typeof e?e:void 0}function ce(e,t){return arguments.length<2?ue(De[e])||ue(g[e]):De[e]&&De[e][t]||g[e]&&g[e][t]}function le(e){return 0<e?Re(ie(e),9007199254740991):0}function he(e){return function(t,n,r){var i,o=se(t),a=le(o.length),s=function(e,t){var n=ie(e);return n<0?Oe(n+t,0):xe(n,t)}(r,a);if(e&&n!=n){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}}function fe(e,t){var n,r=se(e),i=0,o=[];for(n in r)!f(F,n)&&f(r,n)&&o.push(n);for(;t.length>i;)f(r,n=t[i++])&&(~Pe(o,n)||o.push(n));return o}function pe(e,t){for(var n=je(t),r=C.f,i=Ae.f,o=0;o<n.length;o++){var a=n[o];f(e,a)||r(e,a,i(t,a))}}function de(e,t){var n=Be[qe(e)];return n==ze||n!=We&&("function"==typeof t?o(t):!!t)}function me(e,t){var n,r,i,o,a,s=e.target,u=e.global,c=e.stat;if(n=u?g:c?g[s]||h(s,{}):(g[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=He(n,r))&&a.value:n[r],!Ke(u?r:s+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;pe(o,i)}(e.sham||i&&i.sham)&&I(o,"sham",!0),G(n,r,o,e)}}function ye(e){return Object(oe(e))}ne!==re.toString&&G(re,"toString",ne,{unsafe:!0});var ve,ge,be,we=Math.ceil,_e=Math.floor,Te={codeAt:ae(!1),charAt:ae(!0)},Ee={}.propertyIsEnumerable,Se=Object.getOwnPropertyDescriptor,Ce={f:Se&&!Ee.call({1:2},1)?function(e){var t=Se(this,e);return!!t&&t.enumerable}:Ee},Ie="".split,ke=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==z(e)?Ie.call(e,""):Object(e)}:Object,Ne=Object.getOwnPropertyDescriptor,Ae={f:w?Ne:function(e,t){if(e=se(e),t=c(t,!0),E)try{return Ne(e,t)}catch(e){}if(f(e,t))return l(!Ce.f.call(e,t),e[t])}},De=g,Re=Math.min,Oe=Math.max,xe=Math.min,Pe=(he(!0),he(!1)),Me=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Le=Me.concat("length","prototype"),Fe={f:Object.getOwnPropertyNames||function(e){return fe(e,Le)}},Ue={f:Object.getOwnPropertySymbols},je=ce("Reflect","ownKeys")||function(e){var t=Fe.f(u(e)),n=Ue.f;return n?t.concat(n(e)):t},Ve=/#|\.prototype\./,qe=de.normalize=function(e){return String(e).replace(Ve,".").toLowerCase()},Be=de.data={},We=de.NATIVE="N",ze=de.POLYFILL="P",Ke=de,He=Ae.f,Qe=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ge=d("IE_PROTO"),Ye=Object.prototype,Xe=Qe?Object.getPrototypeOf:function(e){return f(e=ye(e),Ge)?e[Ge]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ye:null},$e=K("iterator"),Je=!1;function Ze(){}[].keys&&("next"in(be=[].keys())?(ge=Xe(Xe(be)))!==Object.prototype&&(ve=ge):Je=!0),null==ve&&(ve={}),f(ve,$e)||I(ve,$e,(function(){return this}));var et={IteratorPrototype:ve,BUGGY_SAFARI_ITERATORS:Je},tt=Object.keys||function(e){return fe(e,Me)},nt=w?Object.defineProperties:function(e,t){u(e);for(var n,r=tt(t),i=r.length,o=0;o<i;)C.f(e,n=r[o++],t[n]);return e},rt=ce("document","documentElement"),it=d("IE_PROTO"),ot="prototype",at=function(){var e,t=s("iframe"),n=Me.length;for(t.style.display="none",rt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),at=e.F;n--;)delete at[ot][Me[n]];return at()},st=Object.create||function(e,t){var n;return null!==e?(Ze[ot]=u(e),n=new Ze,Ze[ot]=null,n[it]=e):n=at(),void 0===t?n:nt(n,t)};function ut(e,t,n){e&&!f(e=n?e:e.prototype,pt)&&ft(e,pt,{configurable:!0,value:t})}function ct(){return this}function lt(){return this}function ht(e,t,n,r,i,o,a){function s(e){if(e===i&&y)return y;if(!gt&&e in d)return d[e];switch(e){case"keys":case wt:case _t:return function(){return new n(this,e)}}return function(){return new n(this)}}!function(e,t,n){var r=t+" Iterator";e.prototype=st(mt,{next:l(1,n)}),ut(e,r,!1),dt[r]=ct}(n,t,r);var u,c,h,f=t+" Iterator",p=!1,d=e.prototype,m=d[bt]||d["@@iterator"]||i&&d[i],y=!gt&&m||s(i),v="Array"==t&&d.entries||m;if(v&&(u=Xe(v.call(new e)),vt!==Object.prototype&&u.next&&(Xe(u)!==vt&&(yt?yt(u,vt):"function"!=typeof u[bt]&&I(u,bt,lt)),ut(u,f,!0))),i==wt&&m&&m.name!==wt&&(p=!0,y=function(){return m.call(this)}),d[bt]!==y&&I(d,bt,y),dt[t]=y,i)if(c={values:s(wt),keys:o?y:s("keys"),entries:s(_t)},a)for(h in c)!gt&&!p&&h in d||G(d,h,c[h]);else me({target:t,proto:!0,forced:gt||p},c);return c}F[it]=!0;var ft=C.f,pt=K("toStringTag"),dt={},mt=et.IteratorPrototype,yt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,r){return u(n),function(e){if(!a(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),vt=et.IteratorPrototype,gt=et.BUGGY_SAFARI_ITERATORS,bt=K("iterator"),wt="values",_t="entries",Tt=Te.charAt,Et="String Iterator",St=Q.set,Ct=Q.getterFor(Et);ht(String,"String",(function(e){St(this,{type:Et,string:String(e),index:0})}),(function(){var e,t=Ct(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Tt(n,r),t.index+=e.length,{value:e,done:!1})}));var It={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},kt=K("unscopables"),Nt=Array.prototype;function At(e){Nt[kt][e]=!0}null==Nt[kt]&&I(Nt,kt,st(null));var Dt="Array Iterator",Rt=Q.set,Ot=Q.getterFor(Dt),xt=ht(Array,"Array",(function(e,t){Rt(this,{type:Dt,target:se(e),index:0,kind:t})}),(function(){var e=Ot(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");dt.Arguments=dt.Array,At("keys"),At("values"),At("entries");var Pt=K("iterator"),Mt=K("toStringTag"),Lt=xt.values;for(var Ft in It){var Ut=g[Ft],jt=Ut&&Ut.prototype;if(jt){if(jt[Pt]!==Lt)try{I(jt,Pt,Lt)}catch(bs){jt[Pt]=Lt}if(jt[Mt]||I(jt,Mt,Ft),It[Ft])for(var Vt in xt)if(jt[Vt]!==xt[Vt])try{I(jt,Vt,xt[Vt])}catch(bs){jt[Vt]=xt[Vt]}}}function qt(e,t,n){for(var r in t)G(e,r,t[r],n);return e}function Bt(e){var t=ce(e),n=C.f;w&&t&&!t[Xt]&&n(t,Xt,{configurable:!0,get:function(){return this}})}function Wt(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function zt(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}function Kt(e){return void 0!==e&&(dt.Array===e||Jt[$t]===e)}function Ht(e,t,n){if(Wt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}function Qt(e){if(null!=e)return e[Zt]||e["@@iterator"]||dt[H(e)]}function Gt(e,t,n,r){try{return r?t(u(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&u(i.call(e)),t}}var Yt=g.Promise,Xt=K("species"),$t=K("iterator"),Jt=Array.prototype,Zt=K("iterator"),en=r((function(e){function t(e,t){this.stopped=e,this.result=t}(e.exports=function(e,n,r,i,o){var a,s,c,l,h,f,p,d=Ht(n,r,i?2:1);if(o)a=e;else{if("function"!=typeof(s=Qt(e)))throw TypeError("Target is not iterable");if(Kt(s)){for(c=0,l=le(e.length);c<l;c++)if((h=i?d(u(p=e[c])[0],p[1]):d(e[c]))&&h instanceof t)return h;return new t(!1)}a=s.call(e)}for(f=a.next;!(p=f.call(a)).done;)if("object"==typeof(h=Gt(a,d,p.value,i))&&h&&h instanceof t)return h;return new t(!1)}).stop=function(e){return new t(!0,e)}})),tn=K("iterator"),nn=!1;try{var rn=0,on={next:function(){return{done:!!rn++}},return:function(){nn=!0}};on[tn]=function(){return this},Array.from(on,(function(){throw 2}))}catch(bs){}function an(e,t){if(!t&&!nn)return!1;var n=!1;try{var r={};r[tn]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}function sn(e,t){var n,r=u(e).constructor;return void 0===r||null==(n=u(r)[mn])?t:Wt(n)}function un(e){if(Sn.hasOwnProperty(e)){var t=Sn[e];delete Sn[e],t()}}function cn(e){return function(){un(e)}}function ln(e){un(e.data)}function hn(e){g.postMessage(e+"",vn.protocol+"//"+vn.host)}var fn,pn,dn,mn=K("species"),yn=ce("navigator","userAgent")||"",vn=g.location,gn=g.setImmediate,bn=g.clearImmediate,wn=g.process,_n=g.MessageChannel,Tn=g.Dispatch,En=0,Sn={},Cn="onreadystatechange";gn&&bn||(gn=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return Sn[++En]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},fn(En),En},bn=function(e){delete Sn[e]},"process"==z(wn)?fn=function(e){wn.nextTick(cn(e))}:Tn&&Tn.now?fn=function(e){Tn.now(cn(e))}:_n&&!/(iphone|ipod|ipad).*applewebkit/i.test(yn)?(dn=(pn=new _n).port2,pn.port1.onmessage=ln,fn=Ht(dn.postMessage,dn,1)):!g.addEventListener||"function"!=typeof postMessage||g.importScripts||o(hn)?fn=Cn in s("script")?function(e){rt.appendChild(s("script"))[Cn]=function(){rt.removeChild(this),un(e)}}:function(e){setTimeout(cn(e),0)}:(fn=hn,g.addEventListener("message",ln,!1)));var In,kn,Nn,An,Dn,Rn,On,xn,Pn={set:gn,clear:bn},Mn=Ae.f,Ln=Pn.set,Fn=g.MutationObserver||g.WebKitMutationObserver,Un=g.process,jn=g.Promise,Vn="process"==z(Un),qn=Mn(g,"queueMicrotask"),Bn=qn&&qn.value;function Wn(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Wt(t),this.reject=Wt(n)}function zn(e,t){if(u(e),a(t)&&t.constructor===e)return t;var n=Yn.f(e);return(0,n.resolve)(t),n.promise}function Kn(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}Bn||(In=function(){var e,t;for(Vn&&(e=Un.domain)&&e.exit();kn;){t=kn.fn,kn=kn.next;try{t()}catch(e){throw kn?An():Nn=void 0,e}}Nn=void 0,e&&e.enter()},An=Vn?function(){Un.nextTick(In)}:Fn&&!/(iphone|ipod|ipad).*applewebkit/i.test(yn)?(Dn=!0,Rn=document.createTextNode(""),new Fn(In).observe(Rn,{characterData:!0}),function(){Rn.data=Dn=!Dn}):jn&&jn.resolve?(On=jn.resolve(void 0),xn=On.then,function(){xn.call(On,In)}):function(){Ln.call(g,In)});var Hn,Qn,Gn=Bn||function(e){var t={fn:e,next:void 0};Nn&&(Nn.next=t),kn||(kn=t,An()),Nn=t},Yn={f:function(e){return new Wn(e)}},Xn=g.process,$n=Xn&&Xn.versions,Jn=$n&&$n.v8;function Zn(e){var t;return!(!a(e)||"function"!=typeof(t=e.then))&&t}function er(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;Gn((function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,u,c,l=r[a++],h=o?l.ok:l.fail,f=l.resolve,p=l.reject,d=l.domain;try{h?(o||(2===t.rejection&&Ar(e,t),t.rejection=1),!0===h?s=i:(d&&d.enter(),s=h(i),d&&(d.exit(),c=!0)),s===l.promise?p(yr("Promise-chain cycle")):(u=Zn(s))?u.call(s,f,p):f(s)):p(i)}catch(i){d&&!c&&d.exit(),p(i)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&kr(e,t)}))}}function tr(e,t,n){var r,i;Er?((r=vr.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),g.dispatchEvent(r)):r={promise:t,reason:n},(i=g["on"+e])?i(r):e===Sr&&function(e,t){var n=g.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)}function nr(e,t,n,r){return function(i){e(t,n,i,r)}}function rr(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,er(e,t,!0))}Jn?Qn=(Hn=Jn.split("."))[0]+Hn[1]:yn&&(!(Hn=yn.match(/Edge\/(\d+)/))||74<=Hn[1])&&(Hn=yn.match(/Chrome\/(\d+)/))&&(Qn=Hn[1]);var ir,or,ar,sr,ur=Qn&&+Qn,cr=Pn.set,lr=K("species"),hr="Promise",fr=Q.get,pr=Q.set,dr=Q.getterFor(hr),mr=Yt,yr=g.TypeError,vr=g.document,gr=g.process,br=ce("fetch"),wr=Yn.f,_r=wr,Tr="process"==z(gr),Er=!!(vr&&vr.createEvent&&g.dispatchEvent),Sr="unhandledrejection",Cr=Ke(hr,(function(){if(66===ur)return!0;if(!Tr&&"function"!=typeof PromiseRejectionEvent)return!0;if(51<=ur&&/native code/.test(mr))return!1;function e(e){e((function(){}),(function(){}))}var t=mr.resolve(1);return(t.constructor={})[lr]=e,!(t.then((function(){}))instanceof e)})),Ir=Cr||!an((function(e){mr.all(e).catch((function(){}))})),kr=function(e,t){cr.call(g,(function(){var n,r=t.value;if(Nr(t)&&(n=Kn((function(){Tr?gr.emit("unhandledRejection",r,e):tr(Sr,e,r)})),t.rejection=Tr||Nr(t)?2:1,n.error))throw n.value}))},Nr=function(e){return 1!==e.rejection&&!e.parent},Ar=function(e,t){cr.call(g,(function(){Tr?gr.emit("rejectionHandled",e):tr("rejectionhandled",e,t.value)}))},Dr=function e(t,n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(t===r)throw yr("Promise can't be resolved itself");var o=Zn(r);o?Gn((function(){var i={done:!1};try{o.call(r,nr(e,t,i,n),nr(rr,t,i,n))}catch(r){rr(t,i,r,n)}})):(n.value=r,n.state=1,er(t,n,!1))}catch(r){rr(t,{done:!1},r,n)}}};Cr&&(mr=function(e){zt(this,mr,hr),Wt(e),ir.call(this);var t=fr(this);try{e(nr(Dr,this,t),nr(rr,this,t))}catch(e){rr(this,t,e)}},(ir=function(e){pr(this,{type:hr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=qt(mr.prototype,{then:function(e,t){var n=dr(this),r=wr(sn(this,mr));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Tr?gr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&er(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),or=function(){var e=new ir,t=fr(e);this.promise=e,this.resolve=nr(Dr,e,t),this.reject=nr(rr,e,t)},Yn.f=wr=function(e){return e===mr||e===ar?new or(e):_r(e)},"function"==typeof Yt&&(sr=Yt.prototype.then,G(Yt.prototype,"then",(function(e,t){var n=this;return new mr((function(e,t){sr.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof br&&me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return zn(mr,br.apply(g,arguments))}}))),me({global:!0,wrap:!0,forced:Cr},{Promise:mr}),ut(mr,hr,!1),Bt(hr),ar=ce(hr),me({target:hr,stat:!0,forced:Cr},{reject:function(e){var t=wr(this);return t.reject.call(void 0,e),t.promise}}),me({target:hr,stat:!0,forced:Cr},{resolve:function(e){return zn(this,e)}}),me({target:hr,stat:!0,forced:Ir},{all:function(e){var t=this,n=wr(t),r=n.resolve,i=n.reject,o=Kn((function(){var n=Wt(t.resolve),o=[],a=0,s=1;en(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=wr(t),r=n.reject,i=Kn((function(){var i=Wt(t.resolve);en(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),me({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Yn.f(t),r=n.resolve,i=n.reject,o=Kn((function(){var n=Wt(t.resolve),i=[],o=0,a=1;en(e,(function(e){var s=o++,u=!1;i.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){u||(u=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}}),me({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=sn(this,ce("Promise")),n="function"==typeof e;return this.then(n?function(n){return zn(t,e()).then((function(){return n}))}:e,n?function(n){return zn(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof Yt||Yt.prototype.finally||G(Yt.prototype,"finally",ce("Promise").prototype.finally),De.Promise;var Rr=Q.set,Or=Q.getterFor("AggregateError"),xr=function e(t,n){var r=this;if(!(r instanceof e))return new e(t,n);yt&&(r=yt(new Error(n),Xe(r)));var i=[];return en(t,i.push,i),w?Rr(r,{errors:i,type:"AggregateError"}):r.errors=i,void 0!==n&&I(r,"message",String(n)),r};xr.prototype=st(Error.prototype,{constructor:l(5,xr),message:l(5,""),name:l(5,"AggregateError"),toString:l(5,(function(){var e=u(this).name;e=void 0===e?"AggregateError":String(e);var t=this.message;return e+": "+(void 0===t?"":String(t))}))}),w&&C.f(xr.prototype,"errors",{get:function(){return Or(this).errors},configurable:!0}),me({global:!0},{AggregateError:xr}),me({target:"Promise",stat:!0},{try:function(e){var t=Yn.f(this),n=Kn(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var Pr="No one promise resolved";function Mr(e,t){var n;return Fr(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Fr(n.prototype)?a(n)&&null===(n=n[Ur])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}function Lr(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,u,c,l){for(var h,f,p=ye(s),d=ke(p),m=Ht(u,c,3),y=le(d.length),v=0,g=l||Mr,b=t?g(s,y):n?g(s,0):void 0;v<y;v++)if((a||v in d)&&(f=m(h=d[v],v,p),e))if(t)b[v]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:jr.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}}me({target:"Promise",stat:!0},{any:function(e){var t=this,n=Yn.f(t),r=n.resolve,i=n.reject,o=Kn((function(){var n=Wt(t.resolve),o=[],a=0,s=1,u=!1;en(e,(function(e){var c=a++,l=!1;o.push(void 0),s++,n.call(t,e).then((function(e){l||u||(u=!0,r(e))}),(function(e){l||u||(l=!0,o[c]=e,--s||i(new(ce("AggregateError"))(o,Pr)))}))})),--s||i(new(ce("AggregateError"))(o,Pr))}));return o.error&&i(o.value),n.promise}});var Fr=Array.isArray||function(e){return"Array"==z(e)},Ur=K("species"),jr=[].push,Vr={forEach:Lr(0),map:Lr(1),filter:Lr(2),some:Lr(3),every:Lr(4),find:Lr(5),findIndex:Lr(6)},qr=Vr.find,Br="find",Wr=!0;function zr(e,t,n){return Ht(Kr,g[e].prototype[t],n)}Br in[]&&Array(1)[Br]((function(){Wr=!1})),me({target:"Array",proto:!0,forced:Wr},{find:function(e,t){return qr(this,e,1<arguments.length?t:void 0)}}),At(Br);var Kr=Function.call,Hr=(zr("Array","find"),Vr.findIndex),Qr="findIndex",Gr=!0;function Yr(e,t,n){var r=c(t);r in e?C.f(e,r,l(0,n)):e[r]=n}Qr in[]&&Array(1)[Qr]((function(){Gr=!1})),me({target:"Array",proto:!0,forced:Gr},{findIndex:function(e,t){return Hr(this,e,1<arguments.length?t:void 0)}}),At(Qr),zr("Array","findIndex"),me({target:"Array",stat:!0,forced:!an((function(e){Array.from(e)}))},{from:function(e,t,n){var r,i,o,a,s,u=ye(e),c="function"==typeof this?this:Array,l=arguments.length,h=1<l?t:void 0,f=void 0!==h,p=0,d=Qt(u);if(f&&(h=Ht(h,2<l?n:void 0,2)),null==d||c==Array&&Kt(d))for(i=new c(r=le(u.length));p<r;p++)Yr(i,p,f?h(u[p],p):u[p]);else for(s=(a=d.call(u)).next,i=new c;!(o=s.call(a)).done;p++)Yr(i,p,f?Gt(a,h,[o.value,p],!0):o.value);return i.length=p,i}}),De.Array.from;var Xr,$r=Vr.some;me({target:"Array",proto:!0,forced:(Xr=[].some,!Xr||!o((function(){Xr.call(null,(function(){throw 1}),1)})))},{some:function(e,t){return $r(this,e,1<arguments.length?t:void 0)}}),zr("Array","some");var Jr,Zr=C.f,ei=g.DataView,ti=ei&&ei.prototype,ni=g.Int8Array,ri=ni&&ni.prototype,ii=g.Uint8ClampedArray,oi=ii&&ii.prototype,ai=ni&&Xe(ni),si=ri&&Xe(ri),ui=Object.prototype,ci=(ui.isPrototypeOf,K("toStringTag")),li=p("TYPED_ARRAY_TAG"),hi=!(!g.ArrayBuffer||!ei),fi=hi&&!!yt&&"Opera"!==H(g.opera),pi={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Jr in pi)g[Jr]||(fi=!1);if((!fi||"function"!=typeof ai||ai===Function.prototype)&&(ai=function(){throw TypeError("Incorrect invocation")},fi))for(Jr in pi)g[Jr]&&yt(g[Jr],ai);if((!fi||!si||si===ui)&&(si=ai.prototype,fi))for(Jr in pi)g[Jr]&&yt(g[Jr].prototype,si);if(fi&&Xe(oi)!==si&&yt(oi,si),w&&!f(si,ci))for(Jr in Zr(si,ci,{get:function(){return a(this)?this[li]:void 0}}),pi)g[Jr]&&I(g[Jr],li,Jr);function di(){return vi.call(wi(this))}hi&&yt&&Xe(ti)!==ui&&yt(ti,ui);var mi=K("iterator"),yi=g.Uint8Array,vi=xt.values,gi=xt.keys,bi=xt.entries,wi=function(e){if(function(e){return a(e)&&f(pi,H(e))}(e))return e;throw TypeError("Target is not a typed array")},_i=function(e,t,n){if(w){if(n)for(var r in pi){var i=g[r];i&&f(i.prototype,e)&&delete i.prototype[e]}si[e]&&!n||G(si,e,n?t:fi&&ri[e]||t)}},Ti=yi&&yi.prototype[mi],Ei=!!Ti&&("values"==Ti.name||null==Ti.name);_i("entries",(function(){return bi.call(wi(this))})),_i("keys",(function(){return gi.call(wi(this))})),_i("values",di,!Ei),_i(mi,di,!Ei);var Si=Object.assign,Ci=!Si||o((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Si({},e)[n]||tt(Si({},t)).join("")!=r}))?function(e,t){for(var n=ye(e),r=arguments.length,i=1,o=Ue.f,a=Ce.f;i<r;)for(var s,u=ke(arguments[i++]),c=o?tt(u).concat(o(u)):tt(u),l=c.length,h=0;h<l;)s=c[h++],w&&!a.call(u,s)||(n[s]=u[s]);return n}:Si;function Ii(e){return function(t){for(var n,r=se(t),i=tt(r),o=i.length,a=0,s=[];a<o;)n=i[a++],w&&!ki.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}}me({target:"Object",stat:!0,forced:Object.assign!==Ci},{assign:Ci}),De.Object.assign;var ki=Ce.f,Ni={entries:Ii(!0),values:Ii(!1)},Ai=Ni.entries;me({target:"Object",stat:!0},{entries:function(e){return Ai(e)}}),De.Object.entries;var Di=Ni.values;function Ri(e){if(function(e){var t;return a(e)&&(void 0!==(t=e[xi])?!!t:"RegExp"==z(e))}(e))throw TypeError("The method doesn't accept regular expressions");return e}function Oi(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[Pi]=!1,"/./"[t](n)}catch(e){}}return!1}me({target:"Object",stat:!0},{values:function(e){return Di(e)}}),De.Object.values;var xi=K("match"),Pi=K("match");me({target:"String",proto:!0,forced:!Oi("includes")},{includes:function(e,t){return!!~String(oe(this)).indexOf(Ri(e),1<arguments.length?t:void 0)}}),zr("String","includes");var Mi="".startsWith,Li=Math.min;function Fi(e){if(!a(e))return!1;var t=e[ji];return void 0!==t?!!t:Fr(e)}me({target:"String",proto:!0,forced:!Oi("startsWith")},{startsWith:function(e,t){var n=String(oe(this));Ri(e);var r=le(Li(1<arguments.length?t:void 0,n.length)),i=String(e);return Mi?Mi.call(n,i,r):n.slice(r,r+i.length)===i}}),zr("String","startsWith"),me({target:"String",proto:!0},{repeat:"".repeat||function(e){var t=String(oe(this)),n="",r=ie(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}}),zr("String","repeat");var Ui=K("species"),ji=K("isConcatSpreadable"),Vi=9007199254740991,qi="Maximum allowed index exceeded",Bi=51<=ur||!o((function(){var e=[];return e[ji]=!1,e.concat()[0]!==e})),Wi=51<=ur||!o((function(){var e=[];return(e.constructor={})[Ui]=function(){return{foo:1}},1!==e.concat(Boolean).foo}));function zi(e){var t=De.Symbol||(De.Symbol={});f(t,e)||eo(t,e,{value:Zi.f(e)})}function Ki(e,t){var n=vo[e]=st(co[io]);return ao(n,{type:ro,tag:e,description:t}),w||(n.description=t),n}function Hi(e,t){u(e);var n=se(t),r=tt(n).concat(No(n));return to(r,(function(t){w&&!ko.call(n,t)||Io(e,t,n[t])})),e}function Qi(e,t){var n=se(e),r=c(t,!0);if(n!==uo||!f(vo,r)||f(go,r)){var i=fo(n,r);return!i||!f(vo,r)||f(n,no)&&n[no][r]||(i.enumerable=!0),i}}function Gi(e){var t=mo(se(e)),n=[];return to(t,(function(e){f(vo,e)||f(F,e)||n.push(e)})),n}me({target:"Array",proto:!0,forced:!Bi||!Wi},{concat:function(e){var t,n,r,i,o,a=ye(this),s=Mr(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(Fi(o=-1===t?a:arguments[t])){if(i=le(o.length),Vi<u+i)throw TypeError(qi);for(n=0;n<i;n++,u++)n in o&&Yr(s,u,o[n])}else{if(Vi<=u)throw TypeError(qi);Yr(s,u++,o)}return s.length=u,s}});var Yi=Fe.f,Xi={}.toString,$i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ji={f:function(e){return $i&&"[object Window]"==Xi.call(e)?function(e){try{return Yi(e)}catch(e){return $i.slice()}}(e):Yi(se(e))}},Zi={f:K},eo=C.f,to=Vr.forEach,no=d("hidden"),ro="Symbol",io="prototype",oo=K("toPrimitive"),ao=Q.set,so=Q.getterFor(ro),uo=Object[io],co=g.Symbol,lo=g.JSON,ho=lo&&lo.stringify,fo=Ae.f,po=C.f,mo=Ji.f,yo=Ce.f,vo=A("symbols"),go=A("op-symbols"),bo=A("string-to-symbol-registry"),wo=A("symbol-to-string-registry"),_o=A("wks"),To=g.QObject,Eo=!To||!To[io]||!To[io].findChild,So=w&&o((function(){return 7!=st(po({},"a",{get:function(){return po(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=fo(uo,t);r&&delete uo[t],po(e,t,n),r&&e!==uo&&po(uo,t,r)}:po,Co=X&&"symbol"==typeof co.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof co},Io=function e(t,n,r){t===uo&&e(go,n,r),u(t);var i=c(n,!0);return u(r),f(vo,i)?(r.enumerable?(f(t,no)&&t[no][i]&&(t[no][i]=!1),r=st(r,{enumerable:l(0,!1)})):(f(t,no)||po(t,no,l(1,{})),t[no][i]=!0),So(t,i,r)):po(t,i,r)},ko=function(e){var t=c(e,!0),n=yo.call(this,t);return!(this===uo&&f(vo,t)&&!f(go,t))&&(!(n||!f(this,t)||!f(vo,t)||f(this,no)&&this[no][t])||n)},No=function(e){var t=e===uo,n=mo(t?go:se(e)),r=[];return to(n,(function(e){!f(vo,e)||t&&!f(uo,e)||r.push(vo[e])})),r};X||(G((co=function(e){if(this instanceof co)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==e?String(e):void 0,n=p(t),r=function e(t){this===uo&&e.call(go,t),f(this,no)&&f(this[no],n)&&(this[no][n]=!1),So(this,n,l(1,t))};return w&&Eo&&So(uo,n,{configurable:!0,set:r}),Ki(n,t)})[io],"toString",(function(){return so(this).tag})),Ce.f=ko,C.f=Io,Ae.f=Qi,Fe.f=Ji.f=Gi,Ue.f=No,w&&(po(co[io],"description",{configurable:!0,get:function(){return so(this).description}}),G(uo,"propertyIsEnumerable",ko,{unsafe:!0})),Zi.f=function(e){return Ki(K(e),e)}),me({global:!0,wrap:!0,forced:!X,sham:!X},{Symbol:co}),to(tt(_o),(function(e){zi(e)})),me({target:ro,stat:!0,forced:!X},{for:function(e){var t=String(e);if(f(bo,t))return bo[t];var n=co(t);return bo[t]=n,wo[n]=t,n},keyFor:function(e){if(!Co(e))throw TypeError(e+" is not a symbol");if(f(wo,e))return wo[e]},useSetter:function(){Eo=!0},useSimple:function(){Eo=!1}}),me({target:"Object",stat:!0,forced:!X,sham:!w},{create:function(e,t){return void 0===t?st(e):Hi(st(e),t)},defineProperty:Io,defineProperties:Hi,getOwnPropertyDescriptor:Qi}),me({target:"Object",stat:!0,forced:!X},{getOwnPropertyNames:Gi,getOwnPropertySymbols:No}),me({target:"Object",stat:!0,forced:o((function(){Ue.f(1)}))},{getOwnPropertySymbols:function(e){return Ue.f(ye(e))}}),lo&&me({target:"JSON",stat:!0,forced:!X||o((function(){var e=co();return"[null]"!=ho([e])||"{}"!=ho({a:e})||"{}"!=ho(Object(e))}))},{stringify:function(e){for(var t,n,r=[e],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=t=r[1],(a(t)||void 0!==e)&&!Co(e))return Fr(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Co(t))return t}),r[1]=t,ho.apply(lo,r)}}),co[io][oo]||I(co[io],oo,co[io].valueOf),ut(co,ro),F[no]=!0,zi("asyncIterator");var Ao=C.f,Do=g.Symbol;if(w&&"function"==typeof Do&&!("description"in Do.prototype&&void 0===Do().description)){var Ro={},Oo=function e(t){var n=arguments.length<1||void 0===t?void 0:String(t),r=this instanceof e?new Do(n):void 0===n?Do():Do(n);return""===n&&(Ro[r]=!0),r};pe(Oo,Do);var xo=Oo.prototype=Do.prototype;xo.constructor=Oo;var Po=xo.toString,Mo="Symbol(test)"==String(Do("test")),Lo=/^Symbol\((.*)\)[^)]+$/;Ao(xo,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=Po.call(e);if(f(Ro,e))return"";var n=Mo?t.slice(7,-1):t.replace(Lo,"$1");return""===n?void 0:n}}),me({global:!0,forced:!0},{Symbol:Oo})}function Fo(e,t,n,r,i){function s(e){var t=c[e];G(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!a(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!a(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!a(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var u=g[e],c=u&&u.prototype,l=u,h=r?"set":"add",f={};if(Ke(e,"function"!=typeof u||!(i||c.forEach&&!o((function(){(new u).entries().next()})))))l=n.getConstructor(t,e,r,h),Vo.REQUIRED=!0;else if(Ke(e,!0)){var p=new l,d=p[h](i?{}:-0,1)!=p,m=o((function(){p.has(1)})),y=an((function(e){new u(e)})),v=!i&&o((function(){for(var e=new u,t=5;t--;)e[h](t,t);return!e.has(-0)}));y||(((l=t((function(t,n){zt(t,l,e);var i=function(e,t,n){var r,i;return yt&&"function"==typeof(r=t.constructor)&&r!==n&&a(i=r.prototype)&&i!==n.prototype&&yt(e,i),e}(new u,t,l);return null!=n&&en(n,i[h],i,r),i}))).prototype=c).constructor=l),(m||v)&&(s("delete"),s("has"),r&&s("get")),(v||d)&&s(h),i&&c.clear&&delete c.clear}return f[e]=l,me({global:!0,forced:l!=u},f),ut(l,e),i||n.setStrong(l,e,r),l}function Uo(e,t,n){var r,i,o,a,s=arguments.length,u=1<s?t:void 0;return Wt(this),(r=void 0!==u)&&Wt(u),null==e?new this:(i=[],r?(o=0,a=Ht(u,2<s?n:void 0,2),en(e,(function(e){i.push(a(e,o++))}))):en(e,i.push,i),new this(i))}zi("hasInstance"),zi("isConcatSpreadable"),zi("iterator"),zi("match"),zi("matchAll"),zi("replace"),zi("search"),zi("species"),zi("split"),zi("toPrimitive"),zi("toStringTag"),zi("unscopables"),ut(Math,"Math",!0),ut(g.JSON,"JSON",!0),De.Symbol,zi("asyncDispose"),zi("dispose"),zi("observable"),zi("patternMatch"),zi("replaceAll"),Zi.f("iterator");var jo=!o((function(){return Object.isExtensible(Object.preventExtensions({}))})),Vo=r((function(e){function t(e){n(e,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=C.f,r=p("meta"),i=0,o=Object.isExtensible||function(){return!0},s=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!f(e,r)){if(!o(e))return"F";if(!n)return"E";t(e)}return e[r].objectID},getWeakData:function(e,n){if(!f(e,r)){if(!o(e))return!0;if(!n)return!1;t(e)}return e[r].weakData},onFreeze:function(e){return jo&&s.REQUIRED&&o(e)&&!f(e,r)&&t(e),e}};F[r]=!0})),qo=(Vo.REQUIRED,Vo.fastKey,Vo.getWeakData,Vo.onFreeze,C.f),Bo=Vo.fastKey,Wo=Q.set,zo=Q.getterFor,Ko={getConstructor:function(e,t,n,r){function i(e,t,n){var r,i,o=a(e),u=s(e,t);return u?u.value=n:(o.last=u={index:i=Bo(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=u),r&&(r.next=u),w?o.size++:e.size++,"F"!==i&&(o.index[i]=u)),e}var o=e((function(e,i){zt(e,o,t),Wo(e,{type:t,index:st(null),first:void 0,last:void 0,size:0}),w||(e.size=0),null!=i&&en(i,e[r],e,n)})),a=zo(t),s=function(e,t){var n,r=a(e),i=Bo(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return qt(o.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,w?e.size=0:this.size=0},delete:function(e){var t=a(this),n=s(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),w?t.size--:this.size--}return!!n},forEach:function(e,t){for(var n,r=a(this),i=Ht(e,1<arguments.length?t:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(e){return!!s(this,e)}}),qt(o.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),w&&qo(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",i=zo(t),o=zo(r);ht(e,t,(function(e,t){Wo(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),Bt(t)}};function Ho(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}function Qo(){for(var e,t=u(this),n=Wt(t.delete),r=!0,i=0,o=arguments.length;i<o;i++)e=n.call(t,arguments[i]),r=r&&e;return!!r}function Go(e){return Map.prototype.entries.call(e)}function Yo(e,t,n){var r,i=u(this),o=2<arguments.length?n:void 0;if("function"!=typeof t&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(e)?(r=i.get(e),"function"==typeof t&&(r=t(r),i.set(e,r))):"function"==typeof o&&(r=o(),i.set(e,r)),r}function Xo(e){return Set.prototype.values.call(e)}Fo("Map",(function(e){return function(t){return e(this,arguments.length?t:void 0)}}),Ko,!0),De.Map,me({target:"Map",stat:!0},{from:Uo}),me({target:"Map",stat:!0},{of:Ho}),me({target:"Map",proto:!0,real:!0,forced:b},{deleteAll:function(){return Qo.apply(this,arguments)}}),me({target:"Map",proto:!0,real:!0,forced:b},{every:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3);return!en(r,(function(e,t){if(!i(t,e,n))return en.stop()}),void 0,!0,!0).stopped}}),me({target:"Map",proto:!0,real:!0,forced:b},{filter:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3),o=new(sn(n,ce("Map"))),a=Wt(o.set);return en(r,(function(e,t){i(t,e,n)&&a.call(o,e,t)}),void 0,!0,!0),o}}),me({target:"Map",proto:!0,real:!0,forced:b},{find:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3);return en(r,(function(e,t){if(i(t,e,n))return en.stop(t)}),void 0,!0,!0).result}}),me({target:"Map",proto:!0,real:!0,forced:b},{findKey:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3);return en(r,(function(e,t){if(i(t,e,n))return en.stop(e)}),void 0,!0,!0).result}}),me({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;Wt(t);var r=Wt(n.has),i=Wt(n.get),o=Wt(n.set);return en(e,(function(e){var a=t(e);r.call(n,a)?i.call(n,a).push(e):o.call(n,a,[e])})),n}}),me({target:"Map",proto:!0,real:!0,forced:b},{includes:function(e){return en(Go(u(this)),(function(t,n){if(function(e,t){return e===t||e!=e&&t!=t}(n,e))return en.stop()}),void 0,!0,!0).stopped}}),me({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;Wt(t);var r=Wt(n.set);return en(e,(function(e){r.call(n,t(e),e)})),n}}),me({target:"Map",proto:!0,real:!0,forced:b},{keyOf:function(e){return en(Go(u(this)),(function(t,n){if(n===e)return en.stop(t)}),void 0,!0,!0).result}}),me({target:"Map",proto:!0,real:!0,forced:b},{mapKeys:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3),o=new(sn(n,ce("Map"))),a=Wt(o.set);return en(r,(function(e,t){a.call(o,i(t,e,n),t)}),void 0,!0,!0),o}}),me({target:"Map",proto:!0,real:!0,forced:b},{mapValues:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3),o=new(sn(n,ce("Map"))),a=Wt(o.set);return en(r,(function(e,t){a.call(o,e,i(t,e,n))}),void 0,!0,!0),o}}),me({target:"Map",proto:!0,real:!0,forced:b},{merge:function(e){for(var t=u(this),n=Wt(t.set),r=0;r<arguments.length;)en(arguments[r++],n,t,!0);return t}}),me({target:"Map",proto:!0,real:!0,forced:b},{reduce:function(e,t){var n=u(this),r=Go(n),i=arguments.length<2,o=i?void 0:t;if(Wt(e),en(r,(function(t,r){o=i?(i=!1,r):e(o,r,t,n)}),void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),me({target:"Map",proto:!0,real:!0,forced:b},{some:function(e,t){var n=u(this),r=Go(n),i=Ht(e,1<arguments.length?t:void 0,3);return en(r,(function(e,t){if(i(t,e,n))return en.stop()}),void 0,!0,!0).stopped}}),me({target:"Map",proto:!0,real:!0,forced:b},{update:function(e,t,n){var r=u(this),i=arguments.length;Wt(t);var o=r.has(e);if(!o&&i<3)throw TypeError("Updating absent value");var a=o?r.get(e):Wt(2<i?n:void 0)(e,r);return r.set(e,t(a,e,r)),r}}),me({target:"Map",proto:!0,real:!0,forced:b},{upsert:Yo}),me({target:"Map",proto:!0,real:!0,forced:b},{updateOrInsert:Yo}),Fo("Set",(function(e){return function(t){return e(this,arguments.length?t:void 0)}}),Ko),De.Set,me({target:"Set",stat:!0},{from:Uo}),me({target:"Set",stat:!0},{of:Ho}),me({target:"Set",proto:!0,real:!0,forced:b},{addAll:function(){return function(){for(var e=u(this),t=Wt(e.add),n=0,r=arguments.length;n<r;n++)t.call(e,arguments[n]);return e}.apply(this,arguments)}}),me({target:"Set",proto:!0,real:!0,forced:b},{deleteAll:function(){return Qo.apply(this,arguments)}}),me({target:"Set",proto:!0,real:!0,forced:b},{every:function(e,t){var n=u(this),r=Xo(n),i=Ht(e,1<arguments.length?t:void 0,3);return!en(r,(function(e){if(!i(e,e,n))return en.stop()}),void 0,!1,!0).stopped}}),me({target:"Set",proto:!0,real:!0,forced:b},{difference:function(e){var t=u(this),n=new(sn(t,ce("Set")))(t),r=Wt(n.delete);return en(e,(function(e){r.call(n,e)})),n}}),me({target:"Set",proto:!0,real:!0,forced:b},{filter:function(e,t){var n=u(this),r=Xo(n),i=Ht(e,1<arguments.length?t:void 0,3),o=new(sn(n,ce("Set"))),a=Wt(o.add);return en(r,(function(e){i(e,e,n)&&a.call(o,e)}),void 0,!1,!0),o}}),me({target:"Set",proto:!0,real:!0,forced:b},{find:function(e,t){var n=u(this),r=Xo(n),i=Ht(e,1<arguments.length?t:void 0,3);return en(r,(function(e){if(i(e,e,n))return en.stop(e)}),void 0,!1,!0).result}}),me({target:"Set",proto:!0,real:!0,forced:b},{intersection:function(e){var t=u(this),n=new(sn(t,ce("Set"))),r=Wt(t.has),i=Wt(n.add);return en(e,(function(e){r.call(t,e)&&i.call(n,e)})),n}}),me({target:"Set",proto:!0,real:!0,forced:b},{isDisjointFrom:function(e){var t=u(this),n=Wt(t.has);return!en(e,(function(e){if(!0===n.call(t,e))return en.stop()})).stopped}}),me({target:"Set",proto:!0,real:!0,forced:b},{isSubsetOf:function(e){var t=function(e){var t=Qt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return u(t.call(e))}(this),n=u(e),r=n.has;return"function"!=typeof r&&(n=new(ce("Set"))(e),r=Wt(n.has)),!en(t,(function(e){if(!1===r.call(n,e))return en.stop()}),void 0,!1,!0).stopped}}),me({target:"Set",proto:!0,real:!0,forced:b},{isSupersetOf:function(e){var t=u(this),n=Wt(t.has);return!en(e,(function(e){if(!1===n.call(t,e))return en.stop()})).stopped}}),me({target:"Set",proto:!0,real:!0,forced:b},{join:function(e){var t=Xo(u(this)),n=void 0===e?",":String(e),r=[];return en(t,r.push,r,!1,!0),r.join(n)}}),me({target:"Set",proto:!0,real:!0,forced:b},{map:function(e,t){var n=u(this),r=Xo(n),i=Ht(e,1<arguments.length?t:void 0,3),o=new(sn(n,ce("Set"))),a=Wt(o.add);return en(r,(function(e){a.call(o,i(e,e,n))}),void 0,!1,!0),o}}),me({target:"Set",proto:!0,real:!0,forced:b},{reduce:function(e,t){var n=u(this),r=Xo(n),i=arguments.length<2,o=i?void 0:t;if(Wt(e),en(r,(function(t){o=i?(i=!1,t):e(o,t,t,n)}),void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),me({target:"Set",proto:!0,real:!0,forced:b},{some:function(e,t){var n=u(this),r=Xo(n),i=Ht(e,1<arguments.length?t:void 0,3);return en(r,(function(e){if(i(e,e,n))return en.stop()}),void 0,!1,!0).stopped}}),me({target:"Set",proto:!0,real:!0,forced:b},{symmetricDifference:function(e){var t=u(this),n=new(sn(t,ce("Set")))(t),r=Wt(n.delete),i=Wt(n.add);return en(e,(function(e){r.call(n,e)||i.call(n,e)})),n}}),me({target:"Set",proto:!0,real:!0,forced:b},{union:function(e){var t=u(this),n=new(sn(t,ce("Set")))(t);return en(e,Wt(n.add),n),n}});var $o=Math.floor;me({target:"Number",stat:!0},{isInteger:function(e){return!a(e)&&isFinite(e)&&$o(e)===e}}),De.Number.isInteger;var Jo=function(e,t){return(Jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Zo(e,t){function n(){this.constructor=e}Jo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ea=function(){return(ea=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ta(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function na(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ra(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function ia(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function oa(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ia(arguments[t]));return e}function aa(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function sa(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function ua(e){try{return fa.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var ca={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},la=function(e,t){if(!e)throw ha(t)},ha=function(e){return new Error("Firebase Database ("+ca.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},fa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function pa(e){return da(void 0,e)}function da(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=da(e[n],t[n]));return e}var ma=(ya.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},ya);function ya(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}function va(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ga(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(va())}function ba(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wa(){return!0===ca.NODE_ADMIN}var _a,Ta=(Zo(Ea,_a=Error),Ea);function Ea(e,t){var n=_a.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,Ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Sa.prototype.create),n}var Sa=(Ca.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(Ia,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Ta(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},Ca);function Ca(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var Ia=/\{\$([^}]+)}/g;function ka(e){return JSON.parse(e)}function Na(e){return JSON.stringify(e)}function Aa(e){var t={},n={},r={},i="";try{var o=e.split(".");t=ka(ua(o[0])||""),n=ka(ua(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}function Da(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ra(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Oa(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xa(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}var Pa=(Ma.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Ma.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},Ma.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},Ma.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},Ma);function Ma(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}function La(e,t){var n=new ja(e,t);return n.subscribe.bind(n)}var Fa,Ua,ja=(Va.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},Va.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},Va.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},Va.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=qa),void 0===r.error&&(r.error=qa),void 0===r.complete&&(r.complete=qa);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},Va.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Va.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},Va.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},Va.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},Va);function Va(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}function qa(){}function Ba(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Wa(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}function za(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Wa(e,t,r)+"must be a valid function.")}function Ka(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Wa(e,t,r)+"must be a valid context object.")}function Ha(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t}function Qa(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function Ga(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case Fa.DEBUG:case Fa.VERBOSE:console.log.apply(console,Qa(["["+i+"]  "+e.name+":"],n));break;case Fa.INFO:console.info.apply(console,Qa(["["+i+"]  "+e.name+":"],n));break;case Fa.WARN:console.warn.apply(console,Qa(["["+i+"]  "+e.name+":"],n));break;case Fa.ERROR:console.error.apply(console,Qa(["["+i+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(Ua=Fa=Fa||{})[Ua.DEBUG=0]="DEBUG",Ua[Ua.VERBOSE=1]="VERBOSE",Ua[Ua.INFO=2]="INFO",Ua[Ua.WARN=3]="WARN",Ua[Ua.ERROR=4]="ERROR",Ua[Ua.SILENT=5]="SILENT";var Ya,Xa=Fa.INFO,$a=(Object.defineProperty(Ja.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Fa))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ja.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),Ja.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Qa([this,Fa.DEBUG],e))},Ja.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Qa([this,Fa.VERBOSE],e))},Ja.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Qa([this,Fa.INFO],e))},Ja.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Qa([this,Fa.WARN],e))},Ja.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Qa([this,Fa.ERROR],e))},Ja);function Ja(e){this.name=e,this._logLevel=Xa,this._logHandler=Ga}var Za=((Ya={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ya["bad-app-name"]="Illegal App name: '{$appName}",Ya["duplicate-app"]="Firebase App named '{$appName}' already exists",Ya["app-deleted"]="Firebase App named '{$appName}' already deleted",Ya["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ya),es=new Sa("app","Firebase",Za),ts="[DEFAULT]",ns=(Object.defineProperty(rs.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(rs.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(rs.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),rs.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},rs.prototype._getService=function(e,t){if(void 0===t&&(t=ts),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==ts?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},rs.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=ts),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},rs.prototype.extendApp=function(e){if(da(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,n=this.tokenListeners_;t<n.length;t++){var r=n[t];this.INTERNAL.addAuthTokenListener(r)}this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var i=0,o=this.analyticsEventRequests_;i<o.length;i++){var a=o[i];this.INTERNAL.analytics.logEvent.apply(void 0,a)}this.analyticsEventRequests_=[]}}},rs.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw es.create("app-deleted",{appName:this.name_})},rs);function rs(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=pa(e);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.tokenListeners_.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){r.tokenListeners_=r.tokenListeners_.filter((function(t){return t!==e}))},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}ns.prototype.name&&ns.prototype.options||ns.prototype.delete||console.log("dc");var is="7.3.0",os=new $a("@firebase/app");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){os.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var as=self.firebase.SDK_VERSION;as&&0<=as.indexOf("LITE")&&os.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ss=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name=ts);var a=o.name;if("string"!=typeof a||!a)throw es.create("bad-app-name",{appName:String(a)});if(Da(t,a))throw es.create("duplicate-app",{appName:a});var u=new e(n,o,i);return s(t[a]=u,"create"),u},app:o,apps:null,SDK_VERSION:is,INTERNAL:{registerService:function(t,s,u,c,l){if(void 0===l&&(l=!1),n[t])return os.debug("There were multiple attempts to register service "+t+"."),i[t];function h(e){if(void 0===e&&(e=o()),"function"!=typeof e[t])throw es.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=s,c&&(r[t]=c,a().forEach((function(e){c("create",e)}))),void 0!==u&&da(h,u),i[t]=h,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,l?e:[])},h},removeApp:function(e){s(t[e],"delete"),delete t[e]},factories:n,useAsService:u}};function o(e){if(!Da(t,e=e||ts))throw es.create("no-app",{appName:e});return t[e]}function a(){return Object.keys(t).map((function(e){return t[e]}))}function s(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=u(0,o[i]);if(null===a)return;r[a]&&r[a](t,e)}}function u(e,t){return"serverAuth"===t?null:t}return i.default=i,Object.defineProperty(i,"apps",{get:a}),o.App=e,i}(ns);return t.INTERNAL=ea(ea({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){da(t,e)},createSubscribe:La,ErrorFactory:Sa,deepExtend:da}),t}(),us=ss.initializeApp;ss.initializeApp=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}()&&os.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),us.apply(void 0,e)};var cs=ss;(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof t&&null!=t?t:this;function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(e)}}!function(e,t){if(t){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(t=t(o=i[e=e[e.length-1]]))!=o&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.o=function(e){var t=this.f();e.Ja(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ja(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ja=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ja(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}for(var a=[],s=0;a.push(void 0),s++,o(r.value).Ja(i(a.length-1),t),!(r=n.next()).done;);}))},t}));var o=o||{},a=this||self;function s(e){return"string"==typeof e}function u(e){return"boolean"==typeof e}var c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function f(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function p(e){return null===e}function d(e){return"array"==f(e)}function m(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){return"function"==f(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function T(e,t,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,(e.prototype.constructor=e).fd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function k(e){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");k.call(this,n+e[r])}function A(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function D(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function R(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function O(){this.b=this.a=null}C(k,Error),k.prototype.name="CustomError",C(N,k),N.prototype.name="AssertionError",D.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var x=new D((function(){return new P}),(function(e){e.reset()}));function P(){this.next=this.b=this.a=null}function M(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;A("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}O.prototype.add=function(e,t){var n=x.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},P.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},P.prototype.reset=function(){this.next=this.b=this.a=null};var L=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},F=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=s(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},j=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function V(e,t){return 0<=L(e,t)}function q(e,t){var n;return(n=0<=(t=L(e,t)))&&Array.prototype.splice.call(e,t,1),n}function B(e,t){!function(e,t){for(var n=s(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function W(e){return Array.prototype.concat.apply([],arguments)}function z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function K(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function H(e){for(var t in e)return!1;return!0}function Q(e){var t,n={};for(t in e)n[t]=e[t];return n}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function X(e,t){this.a=e===Z&&t||"",this.b=J}function $(e){return e instanceof X&&e.constructor===X&&e.b===J?e.a:(A("expected object of type Const, got '"+e+"'"),"type_error:Const")}X.prototype.qa=!0,X.prototype.pa=function(){return this.a},X.prototype.toString=function(){return"Const{"+this.a+"}"};var J={},Z={},ee=new X(Z,"");function te(){this.a="",this.b=ae}function ne(e){return e instanceof te&&e.constructor===te&&e.b===ae?e.a:(A("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function re(e,t){var n=$(e);if(!oe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return se(e=n.replace(ie,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof X?$(e):encodeURIComponent(String(e))})))}te.prototype.qa=!0,te.prototype.pa=function(){return this.a.toString()},te.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ie=/%{(\w+)}/g,oe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ae={};function se(e){var t=new te;return t.a=e,t}var ue=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ce=/&/g,le=/</g,he=/>/g,fe=/"/g,pe=/'/g,de=/\x00/g,me=/[\x00&<>"']/;function ye(e,t){return-1!=e.indexOf(t)}function ve(e,t){return e<t?-1:t<e?1:0}function ge(){this.a="",this.b=Ee}function be(e){return e instanceof ge&&e.constructor===ge&&e.b===Ee?e.a:(A("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}ge.prototype.qa=!0,ge.prototype.pa=function(){return this.a.toString()},ge.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var we=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function _e(e){return e instanceof ge?e:(e="object"==typeof e&&e.qa?e.pa():String(e),we.test(e)||(e="about:invalid#zClosurez"),Se(e))}var Te,Ee={};function Se(e){var t=new ge;return t.a=e,t}Se("about:blank");e:{var Ce=a.navigator;if(Ce){var Ie=Ce.userAgent;if(Ie){Te=Ie;break e}}Te=""}function ke(e){return ye(Te,e)}function Ne(){this.a="",this.b=De}function Ae(e){return e instanceof Ne&&e.constructor===Ne&&e.b===De?e.a:(A("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}Ne.prototype.qa=!0,Ne.prototype.pa=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var De={};function Re(e){var t=new Ne;return t.a=e,t}Re("<!DOCTYPE html>");var Oe,xe,Pe=Re("");function Me(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Le(e){return me.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ce,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(le,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(he,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(fe,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(de,"&#0;"))),e}function Fe(e){a.setTimeout((function(){throw e}),0)}function Ue(e,t){xe||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);xe=function(){e.then(qe)}}else xe=function(){var e=qe;!y(a.setImmediate)||a.Window&&a.Window.prototype&&!ke("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Oe=Oe||function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ke("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=se($(ee));M(e,"HTMLIFrameElement"),e.src=ne(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Ae(Pe)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=T((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||ke("Trident")||ke("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){a.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}())(e):a.setImmediate(e)}}(),je||(xe(),je=!0),Ve.add(e,t)}Re("<br>");var je=!1,Ve=new O;function qe(){for(var e;n=t=void 0,n=null,(t=Ve).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){Fe(e)}R(x,e)}var t,n;je=!1}function Be(e,t){if(this.a=We,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){tt(n,ze,e)}),(function(e){if(!(e instanceof ut))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}tt(n,Ke,e)}))}catch(e){tt(this,Ke,e)}}var We=0,ze=2,Ke=3;function He(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}He.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qe=new D((function(){return new He}),(function(e){e.reset()}));function Ge(e,t,n){var r=Qe.get();return r.g=e,r.b=t,r.f=n,r}function Ye(e){if(e instanceof Be)return e;var t=new Be(h);return tt(t,ze,e),t}function Xe(e){return new Be((function(t,n){n(e)}))}function $e(e,t,n){nt(e,t,n,null)||Ue(E(t,e))}function Je(e){return new Be((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)$e(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function Ze(e,t){e.b||e.a!=ze&&e.a!=Ke||rt(e),e.f?e.f.next=t:e.b=t,e.f=t}function et(e,t,n,r){var i=Ge(null,null,null);return i.a=new Be((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(n){o(n)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ut?o(t):e(i)}catch(t){o(t)}}:o})),Ze(i.a.c=e,i),i.a}function tt(e,t,n){e.a==We&&(e===n&&(t=Ke,n=new TypeError("Promise cannot resolve to itself")),e.a=1,nt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,rt(e),t!=Ke||n instanceof ut||function(e,t){e.g=!0,Ue((function(){e.g&&st.call(null,t)}))}(e,n)))}function nt(e,t,n,r){if(e instanceof Be)return Ze(e,Ge(t||h,n||null,r)),!0;if(I(e))return e.then(t,n,r),!0;if(v(e))try{var i=e.then;if(y(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function rt(e){e.h||(e.h=!0,Ue(e.Zb,e))}function it(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ot(e,t,n,r){if(n==Ke&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,at(t,n,r);else try{t.c?t.g.call(t.f):at(t,n,r)}catch(e){st.call(null,e)}R(Qe,t)}function at(e,t,n){t==ze?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Be.prototype.then=function(e,t,n){return et(this,y(e)?e:null,y(t)?t:null,n)},Be.prototype.$goog_Thenable=!0,(e=Be.prototype).ka=function(e,t){return(e=Ge(e,e,t)).c=!0,Ze(this,e),this},e.s=function(e,t){return et(this,null,e,t)},e.cancel=function(e){this.a==We&&Ue((function(){!function e(t,n){if(t.a==We)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==We&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):it(r),ot(r,o,Ke,n)))}t.c=null}else tt(t,Ke,n)}(this,new ut(e))}),this)},e.Oc=function(e){this.a=We,tt(this,ze,e)},e.Pc=function(e){this.a=We,tt(this,Ke,e)},e.Zb=function(){for(var e;e=it(this);)ot(this,e,this.a,this.i);this.h=!1};var st=Fe;function ut(e){k.call(this,e)}function ct(){this.ta=this.ta,this.la=this.la}C(ut,k);var lt=0;function ht(e){e.ta||(e.ta=!0,e.xa(),0==lt)||e[g]||(e[g]=++b)}function ft(e){return ft[" "](e),e}ct.prototype.ta=!(ut.prototype.name="cancel"),ct.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},ft[" "]=h;var pt,dt,mt=ke("Opera"),yt=ke("Trident")||ke("MSIE"),vt=ke("Edge"),gt=vt||yt,bt=ke("Gecko")&&!(ye(Te.toLowerCase(),"webkit")&&!ke("Edge"))&&!(ke("Trident")||ke("MSIE"))&&!ke("Edge"),wt=ye(Te.toLowerCase(),"webkit")&&!ke("Edge");function _t(){var e=a.document;return e?e.documentMode:void 0}e:{var Tt="",Et=(dt=Te,bt?/rv:([^\);]+)(\)|;)/.exec(dt):vt?/Edge\/([\d\.]+)/.exec(dt):yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(dt):wt?/WebKit\/(\S+)/.exec(dt):mt?/(?:Version)[ \/]?(\S+)/.exec(dt):void 0);if(Et&&(Tt=Et?Et[1]:""),yt){var St=_t();if(null!=St&&St>parseFloat(Tt)){pt=String(St);break e}}pt=Tt}var Ct,It={};function kt(e){return function(t,n){var r=It;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=ue(String(pt)).split("."),r=ue(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ve(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ve(0==a[2].length,0==s[2].length)||ve(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}Ct=a.document&&yt?_t():void 0;var Nt=Object.freeze||function(e){return e},At=!yt||9<=Number(Ct),Dt=yt&&!kt("9"),Rt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",h,t),a.removeEventListener("test",h,t)}catch(e){}return e}();function Ot(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function xt(e,t){if(Ot.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(bt){e:{try{ft(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:Pt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}Ot.prototype.preventDefault=function(){this.Mb=!1},C(xt,Ot);var Pt=Nt({2:"touch",3:"pen",4:"mouse"});xt.prototype.preventDefault=function(){xt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Dt)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},xt.prototype.f=function(){return this.a};var Mt="closure_listenable_"+(1e6*Math.random()|0),Lt=0;function Ft(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Na=i,this.key=++Lt,this.ra=this.Ia=!1}function Ut(e){e.ra=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function jt(e){this.src=e,this.a={},this.b=0}function Vt(e,t){var n=t.type;n in e.a&&q(e.a[n],t)&&(Ut(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function qt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ra&&o.listener==t&&o.capture==!!n&&o.Na==r)return i}return-1}jt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=qt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new Ft(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var Bt="closure_lm_"+(1e6*Math.random()|0),Wt={};function zt(e,t,n,r,i){if(r&&r.once)Ht(e,t,n,r,i);else if(d(t))for(var o=0;o<t.length;o++)zt(e,t[o],n,r,i);else n=tn(n),e&&e[Mt]?rn(e,t,n,v(r)?!!r.capture:!!r,i):Kt(e,t,n,!1,r,i)}function Kt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=Zt(e);if(s||(e[Bt]=s=new jt(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=Jt,t=At?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Rt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Ht(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Ht(e,t[o],n,r,i);else n=tn(n),e&&e[Mt]?on(e,t,n,v(r)?!!r.capture:!!r,i):Kt(e,t,n,!0,r,i)}function Qt(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=tn(n),e&&e[Mt]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=qt(o=e.a[t],n,r,i))&&(Ut(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&Zt(e))&&(t=e.a[t.toString()],e=-1,t&&(e=qt(t,n,r,i)),(n=-1<e?t[e]:null)&&Gt(n))}function Gt(e){if("number"!=typeof e&&e&&!e.ra){var t=e.src;if(t&&t[Mt])Vt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zt(t))?(Vt(n,e),0==n.b&&(n.src=null,t[Bt]=null)):Ut(e)}}}function Yt(e){return e in Wt?Wt[e]:Wt[e]="on"+e}function Xt(e,t,n,r){var i=!0;if((e=Zt(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ra&&(o=$t(o,r),i=i&&!1!==o)}return i}function $t(e,t){var n=e.listener,r=e.Na||e.src;return e.Ia&&Gt(e),n.call(r,t)}function Jt(e,t){if(e.ra)return!0;if(At)return $t(e,new xt(t,this));if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new xt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Xt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Xt(r[i],e,!1,t),n=n&&o}return n}function Zt(e){return(e=e[Bt])instanceof jt?e:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(e){return y(e)?e:(e[en]||(e[en]=function(t){return e.handleEvent(t)}),e[en])}function nn(){ct.call(this),this.u=new jt(this),(this.Sb=this).Wa=null}function rn(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function on(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function an(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ra&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&Vt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function sn(e,t,n){if(y(e))n&&(e=T(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=T(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function un(e){var t=null;return new Be((function(n,r){-1==(t=sn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw a.clearTimeout(t),e}))}function cn(e){if(e.U&&"function"==typeof e.U)return e.U();if(s(e))return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function ln(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(m(e)||s(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function hn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];pn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)pn(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(nn,ct),nn.prototype[Mt]=!0,nn.prototype.addEventListener=function(e,t,n,r){zt(this,e,t,n,r)},nn.prototype.removeEventListener=function(e,t,n,r){Qt(this,e,t,n,r)},nn.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Sb;var r=e.type||e;if(s(e))e=new Ot(e,n);else if(e instanceof Ot)e.target=e.target||n;else{var i=e;Y(e=new Ot(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=an(a,r,!0,e)&&i}if(i=an(a=e.b=n,r,!0,e)&&i,i=an(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=an(a=e.b=t[o],r,!1,e)&&i;return i},nn.prototype.xa=function(){if(nn.qb.xa.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Ut(n[r]);delete t.a[e],t.b--}}this.Wa=null},(e=hn.prototype).U=function(){fn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return fn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return pn(this.b,e)?this.b[e]:t},e.set=function(e,t){pn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof mn?(this.h=void 0!==t?t:e.h,yn(this,e.f),this.i=e.i,this.b=e.b,vn(this,e.l),this.c=e.c,gn(this,Fn(e.a)),this.g=e.g):e&&(n=String(e).match(dn))?(this.h=!!t,yn(this,n[1]||"",!0),this.i=En(n[2]||""),this.b=En(n[3]||"",!0),vn(this,n[4]),this.c=En(n[5]||"",!0),gn(this,n[6]||"",!0),this.g=En(n[7]||"")):(this.h=!!t,this.a=new Rn(null,this.h))}function yn(e,t,n){e.f=n?En(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function vn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.l=t}else e.l=null}function gn(e,t,n){t instanceof Rn?(e.a=t,function(e,t){t&&!e.f&&(On(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pn(this,t),Ln(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=Sn(t,An)),e.a=new Rn(t,e.h))}function bn(e,t,n){e.a.set(t,n)}function wn(e,t){return e.a.get(t)}function _n(e){return e instanceof mn?new mn(e):new mn(e,void 0)}function Tn(e,t){var n=new mn(null,void 0);return yn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function En(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Sn(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Cn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Sn(t,In,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.i)&&e.push(Sn(t,In,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Sn(n,"/"==n.charAt(0)?Nn:kn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Sn(n,Dn)),e.join("")},mn.prototype.resolve=function(e){var t=new mn(this),n=!!e.f;n?yn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)vn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ye(i,"./")||ye(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?gn(t,Fn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var In=/[#\/\?@]/g,kn=/[#\?:]/g,Nn=/[#\?]/g,An=/[#\?@]/g,Dn=/#/g;function Rn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function On(e){e.a||(e.a=new hn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xn(e){var t=ln(e);if(void 0===t)throw Error("Keys are undefined");var n=new Rn(null,void 0);e=cn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];d(o)?Ln(n,i,o):n.add(i,o)}return n}function Pn(e,t){On(e),t=Un(e,t),pn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,pn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&fn(e)))}function Mn(e,t){return On(e),t=Un(e,t),pn(e.a.b,t)}function Ln(e,t,n){Pn(e,t),0<n.length&&(e.c=null,e.a.set(Un(e,t),z(n)),e.b+=n.length)}function Fn(e){var t=new Rn;return t.c=e.c,e.a&&(t.a=new hn(e.a),t.b=e.b),t}function Un(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=Rn.prototype).add=function(e,t){On(this),this.c=null,e=Un(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){On(this),this.a.forEach((function(n,r){F(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.X=function(){On(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){On(this);var t=[];if(s(e))Mn(this,e)&&(t=W(t,this.a.get(Un(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},e.set=function(e,t){return On(this),this.c=null,Mn(this,e=Un(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var jn=!yt||9<=Number(Ct);function Vn(e){var t=document;return s(e)?t.getElementById(e):e}function qn(e,t){K(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Bn.hasOwnProperty(n)?e.setAttribute(Bn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Bn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(e){if(e&&"number"==typeof e.length){if(v(e))return"function"==typeof e.item||"string"==typeof e.item;if(y(e))return"function"==typeof e.item}return!1}function zn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(d(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Gn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Gn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Kn,e,t),t.join("")}function Kn(){}var Hn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Qn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gn(e,t){t.push('"',e.replace(Qn,(function(e){var t=Hn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Hn[e]=t),t})),'"')}function Yn(){var e=dr();return yt&&!!Ct&&11==Ct||/Edge\/\d+/.test(e)}function Xn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function $n(e,t){t=t||a.window;var n="about:blank";e&&(n=be(_e(e)).toString()),t.location.href=n}function Jn(e){return!!((e=(e||dr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Zn(e){e=e||a.window;try{e.close()}catch(e){}}function er(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=dr().toLowerCase(),r&&(t.target=r,ye(n,"crios/")&&(t.target="_blank")),hr(dr())==cr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ge?n:_e(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((ke("iPhone")&&!ke("iPod")&&!ke("iPad")||ke("iPad")||ke("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(M(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof ge||t instanceof ge||(t="object"==typeof t&&t.qa?t.pa():String(t),we.test(t)||(t="about:invalid#zClosurez"),t=Se(t)),a.href=be(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=be(t).toString(),a&&(gt&&ye(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Re('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Le(e)+'">'),a.document.write(Ae(e)),a.document.close())):(a=r.open(be(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nr=/^[^@]+@[^@]+$/;function rr(){var e=null;return new Be((function(t){"complete"==a.document.readyState?t():(e=function(){t()},Ht(window,"load",e))})).s((function(t){throw Qt(window,"load",e),t}))}function ir(e){return e=e||dr(),!("file:"!==br()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function or(){var e=a.window;try{return!(!e||e==e.top)}catch(e){return!1}}function ar(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function sr(){return cs.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":cs.INTERNAL.hasOwnProperty("node")?"Node":ar()?"Worker":"Browser"}function ur(){var e=sr();return"ReactNative"===e||"Node"===e}var cr="Firefox",lr="Chrome";function hr(e){var t=e.toLowerCase();return ye(t,"opera/")||ye(t,"opr/")||ye(t,"opios/")?"Opera":ye(t,"iemobile")?"IEMobile":ye(t,"msie")||ye(t,"trident/")?"IE":ye(t,"edge/")?"Edge":ye(t,"firefox/")?cr:ye(t,"silk/")?"Silk":ye(t,"blackberry")?"Blackberry":ye(t,"webos")?"Webos":!ye(t,"safari/")||ye(t,"chrome/")||ye(t,"crios/")||ye(t,"android")?!ye(t,"chrome/")&&!ye(t,"crios/")||ye(t,"edge/")?ye(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":lr:"Safari"}var fr={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function pr(e,t){t=t||[];var n,r=[],i={};for(n in fr)i[fr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=sr())?r=hr(i=dr()):"Worker"===r&&(r=hr(i=dr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function dr(){return a.navigator&&a.navigator.userAgent||""}function mr(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function yr(){try{var e=a.localStorage,t=Sr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Yn()||!!a.indexedDB}catch(e){return ar()&&!!a.indexedDB}return!1}function vr(){return(gr()||"chrome-extension:"===br()||ir())&&!ur()&&yr()&&!ar()}function gr(){return"http:"===br()||"https:"===br()}function br(){return a.location&&a.location.protocol||null}function wr(e){return!Jn(e=e||dr())&&hr(e)!=cr}function _r(e){return void 0===e?null:zn(e)}function Tr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Er(e){if(null!==e)return JSON.parse(e)}function Sr(e){return e||Math.floor(1e9*Math.random()).toString()}function Cr(e){return"Safari"!=hr(e=e||dr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Ir(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function kr(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=dr(),t=sr(),this.b=Jn(e)||"ReactNative"===t}function Nr(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Ar(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Dr(){return!(!mr("fireauth.oauthhelper",a)&&!mr("fireauth.iframe",a))}kr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!gr()&&"chrome-extension:"!==br()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Rr,Or={};function xr(e){Or[e]||(Or[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Pr={};Object.defineProperty(Pr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Pr,"abcd",{configurable:!0,enumerable:!0,value:2}),Rr=2==Pr.abcd}catch(e){Rr=!1}function Mr(e,t,n){Rr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Lr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Mr(e,n,t[n])}function Fr(e){var t={};return Lr(t,e),t}function Ur(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Mr(t,n,Ur(e[n]));return t}function jr(e){var t={},n=e[qr],r=e[Br];if(!(e=e[Wr])||e!=Vr&&!n)throw Error("Invalid provider user info!");t[Kr]=r||null,t[zr]=n||null,Mr(this,Qr,e),Mr(this,Hr,Ur(t))}var Vr="EMAIL_SIGNIN",qr="email",Br="newEmail",Wr="requestType",zr="email",Kr="fromEmail",Hr="data",Qr="operation";function Gr(e,t){this.code=Xr+e,this.message=t||$r[e]||""}function Yr(e){var t=e&&e.code;return t?new Gr(t.substring(Xr.length),e.message):null}C(Gr,Error),Gr.prototype.A=function(){return{code:this.code,message:this.message}},Gr.prototype.toJSON=function(){return this.A()};var Xr="auth/",$r={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Jr(e){var t=wn(e=_n(e),Zr)||null,n=wn(e,ei)||null,r=wn(e,ri)||null;if(r=r&&oi[r]||null,!t||!n||!r)throw new Gr("argument-error",Zr+", "+ei+"and "+ri+" are required in a valid action code URL.");Lr(this,{apiKey:t,operation:r,code:n,continueUrl:wn(e,ti)||null,languageCode:wn(e,ni)||null,tenantId:wn(e,ii)||null})}var Zr="apiKey",ei="oobCode",ti="continueUrl",ni="languageCode",ri="mode",ii="tenantId",oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Vr,verifyEmail:"VERIFY_EMAIL"};function ai(e){try{return new Jr(e)}catch(e){return null}}function si(e){var t=e[fi];if(void 0===t)throw new Gr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Gr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ui];if(n&&"object"==typeof n){t=n[mi];var r=n[pi];if(n=n[di],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Gr("argument-error",pi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Gr("argument-error",di+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Gr("argument-error",mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Gr("missing-android-pkg-name")}}else if(void 0!==n)throw new Gr("argument-error",ui+" property must be a non null object when specified.");if(this.f=null,(t=e[hi])&&"object"==typeof t){if("string"==typeof(t=t[yi])&&t.length)this.f=t;else if(void 0!==t)throw new Gr("argument-error",yi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Gr("argument-error",hi+" property must be a non null object when specified.");if(void 0!==(t=e[li])&&"boolean"!=typeof t)throw new Gr("argument-error",li+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[ci])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Gr("argument-error",ci+" property must be a non empty string when specified.");this.i=e||null}var ui="android",ci="dynamicLinkDomain",li="handleCodeInApp",hi="iOS",fi="url",pi="installApp",di="minimumVersion",mi="packageName",yi="bundleId";function vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var gi=null,bi=null;function wi(e){this.f=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function _i(e){return(e=Ti(e))&&e.sub&&e.iss&&e.aud&&e.exp?new wi(e):null}function Ti(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!gi){gi={},bi={};for(var e=0;e<65;e++)gi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(bi[gi[e]]=e)&&(bi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(e){}return null}wi.prototype.R=function(){return this.c},wi.prototype.g=function(){return this.b};var Ei,Si={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ci(e){for(var t in Si)if(Si[t].id===e)return{firebaseEndpoint:(e=Si[t]).bb,secureTokenEndpoint:e.ib};return null}Ei=Ci("__EID__")?"__EID__":void 0;var Ii="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ki=["client_id","response_type","scope","redirect_uri","state"],Ni={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:ki},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:ki},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:ki},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:Ii}};function Ai(e){for(var t in Ni)if(Ni[t].Pa==e)return Ni[t];return null}function Di(e){var t={};t["facebook.com"]=Mi,t["google.com"]=Fi,t["github.com"]=Li,t["twitter.com"]=Ui;var n=e&&e[Oi];try{if(n)return t[n]?new t[n](e):new Pi(e);if(void 0!==e[Ri])return new xi(e)}catch(e){}return null}var Ri="idToken",Oi="providerId";function xi(e){var t=e[Oi];if(!t&&e[Ri]){var n=_i(e[Ri]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Mr(this,"providerId",t),Mr(this,"isNewUser",n)}function Pi(e){xi.call(this,e),Mr(this,"profile",Ur((e=Er(e.rawUserInfo||"{}"))||{}))}function Mi(e){if(Pi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Li(e){if(Pi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",this.profile&&this.profile.login||null)}function Fi(e){if(Pi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ui(e){if(Pi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",e.screenName||null)}function ji(e){var t=_n(e),n=wn(t,"link"),r=wn(_n(n),"link");return wn(_n(t=wn(t,"deep_link_id")),"link")||t||r||n||e}function Vi(){}function qi(e,t){return e.then((function(e){if(e[Aa]){var n=_i(e[Aa]);if(!n||t!=n.f)throw new Gr("user-mismatch");return e}throw new Gr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Xr+"user-not-found"?new Gr("user-mismatch"):e}))}function Bi(e,t){if(!t)throw new Gr("internal-error","failed to construct a credential");this.a=t,Mr(this,"providerId",e),Mr(this,"signInMethod",e)}function Wi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function zi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Bi(e.providerId,e.pendingToken)}catch(e){}return null}function Ki(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Mr(this,"idToken",t.idToken),t.accessToken&&Mr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Mr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Gr("internal-error","failed to construct a credential");Mr(this,"accessToken",t.oauthToken),Mr(this,"secret",t.oauthTokenSecret)}Mr(this,"providerId",e),Mr(this,"signInMethod",n)}function Hi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:xn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Qi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Ki(e.providerId,t,e.signInMethod)}catch(e){}}return null}function Gi(e,t){this.Fc=t||[],Lr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.cb=(Ai(e)||{}).Oa||null,this.ab=null}function Yi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Gr("argument-error",'SAML provider IDs must be prefixed with "saml."');Gi.call(this,e,[])}function Xi(e){Gi.call(this,e,ki),this.a=[]}function $i(){Xi.call(this,"facebook.com")}function Ji(e){if(!e)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new $i).credential({accessToken:t})}function Zi(){Xi.call(this,"github.com")}function eo(e){if(!e)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new Zi).credential({accessToken:t})}function to(){Xi.call(this,"google.com"),this.wa("profile")}function no(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new to).credential({idToken:n,accessToken:t})}function ro(){Gi.call(this,"twitter.com",Ii)}function io(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Gr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ki("twitter.com",n,"twitter.com")}function oo(e,t,n){this.a=e,this.c=t,Mr(this,"providerId","password"),Mr(this,"signInMethod",n===so.EMAIL_LINK_SIGN_IN_METHOD?so.EMAIL_LINK_SIGN_IN_METHOD:so.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ao(e){return e&&e.email&&e.password?new oo(e.email,e.password,e.signInMethod):null}function so(){Lr(this,{providerId:"password",isOAuthProvider:!1})}function uo(e,t){if(!(t=co(t)))throw new Gr("argument-error","Invalid email link!");return new oo(e,t.code,so.EMAIL_LINK_SIGN_IN_METHOD)}function co(e){return(e=ai(e=ji(e)))&&e.operation===Vr?e:null}function lo(e){if(!(e.Ua&&e.Ta||e.Fa&&e.ba))throw new Gr("internal-error");this.a=e,Mr(this,"providerId","phone"),Mr(this,"signInMethod","phone")}function ho(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new lo(t)}return null}function fo(e){return e.a.Fa&&e.a.ba?{temporaryProof:e.a.Fa,phoneNumber:e.a.ba}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function po(e){try{this.a=e||cs.auth()}catch(e){throw new Gr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Lr(this,{providerId:"phone",isOAuthProvider:!1})}function mo(e,t){if(!e)throw new Gr("missing-verification-id");if(!t)throw new Gr("missing-verification-code");return new lo({Ua:e,Ta:t})}function yo(e){if(e.temporaryProof&&e.phoneNumber)return new lo({Fa:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return no(o,n);case"facebook.com":return Ji(n);case"github.com":return eo(n);case"twitter.com":return io(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Bi(t,a):new Ki(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Xi(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function vo(e){if(!e.isOAuthProvider)throw new Gr("invalid-oauth-provider")}function go(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Gr("invalid-auth-event");if(this.g&&this.a)throw new Gr("invalid-auth-event");if(this.g&&!this.f)throw new Gr("invalid-auth-event")}function bo(e){return(e=e||{}).type?new go(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Yr(e.error),e.postBody,e.tenantId):null}function wo(){this.b=null,this.a=[]}C(Pi,xi),C(Mi,Pi),C(Li,Pi),C(Fi,Pi),C(Ui,Pi),Bi.prototype.na=function(e){return Qa(e,Wi(this))},Bi.prototype.b=function(e,t){var n=Wi(this);return n.idToken=t,Ga(e,n)},Bi.prototype.f=function(e,t){return qi(Ya(e,Wi(this)),t)},Bi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ki.prototype.na=function(e){return Qa(e,Hi(this))},Ki.prototype.b=function(e,t){var n=Hi(this);return n.idToken=t,Ga(e,n)},Ki.prototype.f=function(e,t){return qi(Ya(e,Hi(this)),t)},Ki.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Gi.prototype.Ea=function(e){return this.zb=Q(e),this},C(Yi,Gi),C(Xi,Gi),Xi.prototype.wa=function(e){return V(this.a,e)||this.a.push(e),this},Xi.prototype.Hb=function(){return z(this.a)},Xi.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Gr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ki(this.providerId,n,this.providerId)},C($i,Xi),Mr($i,"PROVIDER_ID","facebook.com"),Mr($i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(Zi,Xi),Mr(Zi,"PROVIDER_ID","github.com"),Mr(Zi,"GITHUB_SIGN_IN_METHOD","github.com"),C(to,Xi),Mr(to,"PROVIDER_ID","google.com"),Mr(to,"GOOGLE_SIGN_IN_METHOD","google.com"),C(ro,Gi),Mr(ro,"PROVIDER_ID","twitter.com"),Mr(ro,"TWITTER_SIGN_IN_METHOD","twitter.com"),oo.prototype.na=function(e){return this.signInMethod==so.EMAIL_LINK_SIGN_IN_METHOD?Cs(e,rs,{email:this.a,oobCode:this.c}):Cs(e,_s,{email:this.a,password:this.c})},oo.prototype.b=function(e,t){return this.signInMethod==so.EMAIL_LINK_SIGN_IN_METHOD?Cs(e,is,{idToken:t,email:this.a,oobCode:this.c}):Cs(e,ms,{idToken:t,email:this.a,password:this.c})},oo.prototype.f=function(e,t){return qi(this.na(e),t)},oo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Lr(so,{PROVIDER_ID:"password"}),Lr(so,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Lr(so,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),lo.prototype.na=function(e){return e.Va(fo(this))},lo.prototype.b=function(e,t){var n=fo(this);return n.idToken=t,Cs(e,Es,n)},lo.prototype.f=function(e,t){var n=fo(this);return n.operation="REAUTH",qi(e=Cs(e,Ss,n),t)},lo.prototype.A=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.ba&&(e.phoneNumber=this.a.ba),e},po.prototype.Va=function(e,t){var n=this.a.b;return Ye(t.verify()).then((function(r){if(!s(r))throw new Gr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Cs(e,ps,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Gr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Lr(po,{PROVIDER_ID:"phone"}),Lr(po,{PHONE_SIGN_IN_METHOD:"phone"}),go.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},go.prototype.R=function(){return this.h},go.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var _o,To=null;function Eo(e){var t="unauthorized-domain",n=void 0,r=_n(e);e=r.b,"chrome-extension"==(r=r.f)?n=Me("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Me("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Gr.call(this,t,n)}function So(e,t,n){Gr.call(this,e,n),(e=t||{}).Ab&&Mr(this,"email",e.Ab),e.ba&&Mr(this,"phoneNumber",e.ba),e.credential&&Mr(this,"credential",e.credential),e.Qb&&Mr(this,"tenantId",e.Qb)}function Co(e){if(e.code){var t=e.code||"";0==t.indexOf(Xr)&&(t=t.substring(Xr.length));var n={credential:yo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Gr(t,e.message||void 0);return new So(t,n,e.message)}return null}function Io(){}function ko(e){return e.c||(e.c=e.b())}function No(){}function Ao(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Do(){}function Ro(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.fc,this),this.a.onerror=T(this.Ib,this),this.a.onprogress=T(this.gc,this),this.a.ontimeout=T(this.kc,this)}function Oo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function xo(e,t,n){this.reset(e,t,n,void 0,void 0)}function Po(e){this.f=e,this.b=this.c=this.a=null}function Mo(e,t){this.name=e,this.value=t}C(Eo,Gr),C(So,Gr),So.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&Y(e,t),e},So.prototype.toJSON=function(){return this.A()},Io.prototype.c=null,C(No,Io),No.prototype.a=function(){var e=Ao(this);return e?new ActiveXObject(e):new XMLHttpRequest},No.prototype.b=function(){var e={};return Ao(this)&&(e[0]=!0,e[1]=!0),e},_o=new No,C(Do,Io),Do.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Ro;throw Error("Unsupported browser")},Do.prototype.b=function(){return{}},(e=Ro.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Oo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Oo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Oo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},xo.prototype.a=null,xo.prototype.reset=function(e,t,n,r,i){delete this.a},Mo.prototype.toString=function(){return this.name};var Lo=new Mo("SEVERE",1e3),Fo=new Mo("WARNING",900),Uo=new Mo("CONFIG",700),jo=new Mo("FINE",500);Po.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(A("Root logger has no level set."),null)}(this).value)for(y(t)&&(t=t()),e=new xo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Vo,qo={},Bo=null;function Wo(e){var t;if(Bo||(Bo=new Po(""),(qo[""]=Bo).c=Uo),!(t=qo[e])){t=new Po(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Wo(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,qo[e]=t}return t}function zo(e,t){e&&e.log(jo,t,void 0)}function Ko(e){this.f=e}function Ho(e){nn.call(this),this.o=e,this.readyState=Qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Wo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Ko,Io),Ko.prototype.a=function(){return new Ho(this.f)},Ko.prototype.b=(Vo={},function(){return Vo}),C(Ho,nn);var Qo=0;function Go(e){e.c.read().then(e.ec.bind(e)).catch(e.Ma.bind(e))}function Yo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Xo(e)}function Xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $o(e){nn.call(this),this.headers=new hn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Jo,this.v=this.P=!1}(e=Ho.prototype).open=function(e,t){if(this.readyState!=Qo)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Xo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Ma.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Yo(this,!1)),this.readyState=Qo},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Xo(this)),this.a&&(this.readyState=3,Xo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Go(this)):e.text().then(this.ic.bind(this),this.Ma.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Yo(this,!0):Xo(this),3==this.readyState&&Go(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Yo(this,!0))},e.hc=function(e){this.a&&(this.response=e,Yo(this,!0))},e.Ma=function(e){var t=this.h;t&&t.log(Fo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Yo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Fo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Fo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C($o,nn);var Jo="";$o.prototype.b=Wo("goog.net.XhrIo");var Zo=/^https?$/i,ea=["POST","PUT"];function ta(e){return"content-type"==e.toLowerCase()}function na(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ra(e),oa(e)}function ra(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ia(e){if(e.c&&void 0!==o)if(e.w[1]&&4==sa(e)&&2==ua(e))zo(e.b,ca(e,"Local request error detected and ignored"));else if(e.i&&4==sa(e))sn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==sa(e)){zo(e.b,ca(e,"Request complete")),e.c=!1;try{var t,n=ua(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.l).match(dn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Zo.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<sa(e)?e.a.statusText:""}catch(t){zo(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+ua(e)+"]",ra(e)}}finally{oa(e)}}}function oa(e,t){if(e.a){aa(e);var n=e.a,r=e.w[0]?h:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Lo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function aa(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(a.clearTimeout(e.o),e.o=null)}function sa(e){return e.a?e.a.readyState:0}function ua(e){try{return 2<sa(e)?e.a.status:-1}catch(e){return-1}}function ca(e,t){return t+" ["+e.O+" "+e.l+" "+ua(e)+"]"}function la(e){var t=_a;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ha(e,t,n){e.a=!0,e.c=n,e.f=!t,ma(e)}function fa(e){if(e.a){if(!e.u)throw new ya(e);e.u=!1}}function pa(e,t,n,r){e.g.push([t,n,r]),e.a&&ma(e)}function da(e){return j(e.g,(function(e){return y(e[1])}))}function ma(e){if(e.h&&e.a&&da(e)){var t=e.h,n=ba[t];n&&(a.clearTimeout(n.a),delete ba[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(I(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,da(e)||(n=!0)}}e.c=t,r&&(u=T(e.m,e,!0),r=T(e.m,e,!1),t instanceof la?(pa(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new ga(t),ba[t.a]=t,e.h=t.a)}function ya(){k.call(this)}function va(){k.call(this)}function ga(e){this.a=a.setTimeout(T(this.c,this),0),this.b=e}(e=$o.prototype).Ga=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",zo(this.b,ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(zo(this.b,ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),oa(this))},e.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),oa(this,!0)),$o.qb.xa.call(this)},e.Lb=function(){this.ta||(this.J||this.i||this.f?ia(this):this.yc())},e.yc=function(){ia(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Jo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Lo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return zo(this.b,"Can not get response: "+e.message),null}},la.prototype.cancel=function(e){if(this.a)this.c instanceof la&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new va(this),fa(this),ha(this,!1,e))}},la.prototype.m=function(e,t){this.i=!1,ha(this,e,t)},la.prototype.then=function(e,t,n){var r,i,o=new Be((function(e,t){r=e,i=t}));return pa(this,r,(function(e){e instanceof va?o.cancel():i(e)})),o.then(e,t,n)},la.prototype.$goog_Thenable=!0,C(ya,k),ya.prototype.message="Deferred has already fired",ya.prototype.name="AlreadyCalledError",C(va,k),va.prototype.message="Deferred was canceled",va.prototype.name="CanceledError",ga.prototype.c=function(){throw delete ba[this.a],this.b};var ba={};function wa(e){var t,n=document,r=ne(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ga:void 0},s=new la(o);return t=window.setTimeout((function(){Ta(i,!0);var e=new Ca(Sa,"Timeout reached for loading script "+r);fa(s),ha(s,!1,e)}),5e3),o.Ga=t,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ta(i,!1,t),fa(s),ha(s,!0,null))},i.onerror=function(){Ta(i,!0,t);var e=new Ca(Ea,"Error while loading script "+r);fa(s),ha(s,!1,e)},Y(o={},{type:"text/javascript",charset:"UTF-8"}),qn(i,o),function(e,t){M(e,"HTMLScriptElement"),e.src=ne(t),null===l&&(l=(t=(t=a.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""),(t=l)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function _a(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Ta(e,!0,this.Ga)}}function Ta(e,t,n){null!=n&&a.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ea=0,Sa=1;function Ca(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),k.call(this,n),this.code=e}function Ia(e){this.f=e}function ka(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Da,this.g=Q(e.secureTokenHeaders||Ra),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Oa,this.a=Q(e.firebaseHeaders||xa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==sr(),!(n=a.XMLHttpRequest||n&&cs.INTERNAL.node&&cs.INTERNAL.node.XMLHttpRequest)&&!ar())throw new Gr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ar()?this.f=new Ko(self):ur()?this.f=new Ia(n):this.f=new Do,this.b=null}C(Ca,k),C(Ia,Io),Ia.prototype.a=function(){return new this.f},Ia.prototype.b=function(){return{}};var Na,Aa="idToken",Da=new kr(3e4,6e4),Ra={"Content-Type":"application/x-www-form-urlencoded"},Oa=new kr(3e4,6e4),xa={"Content-Type":"application/json"};function Pa(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Ma(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function La(e,t,n,r,i,o,s){(e=function(){var e=dr();return!((e=hr(e)!=lr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&e<30)&&(!yt||!Ct||9<Ct)}()||ar()?T(e.o,e):(Na=Na||new Be((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(a[Ua]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){pa(e,null,t,void 0)}(wa(re(Fa,{onload:Ua})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)})),T(e.m,e)))(t,n,r,i,o,s)}ka.prototype.R=function(){return this.b},ka.prototype.o=function(e,t,n,r,i,o){if(ar()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Gr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new $o(this.f);if(o){u.g=Math.max(0,o);var c=setTimeout((function(){u.dispatchEvent("timeout")}),o)}rn(u,"complete",(function(){c&&clearTimeout(c);var n=null;try{n=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return zo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){n=null}t&&t(n)})),on(u,"ready",(function(){c&&clearTimeout(c),ht(this)})),on(u,"timeout",(function(){c&&clearTimeout(c),ht(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():_o.a(),e.w=e.B?ko(e.B):ko(_o),e.a.onreadystatechange=T(e.Lb,e);try{zo(e.b,ca(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return zo(e.b,ca(e,"Error opening Xhr: "+t.message)),void na(e,t)}t=r||"";var o=new hn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||s(e))F(e,t,void 0);else for(var n=ln(e),r=cn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ta,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:s(e)?e.charAt(t):e[t]}(o.X()),r=a.FormData&&t instanceof a.FormData,!V(ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{aa(e),0<e.g&&(e.v=function(e){return yt&&kt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),zo(e.b,ca(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=T(e.Ga,e)):e.o=sn(e.Ga,e.g,e)),zo(e.b,ca(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){zo(e.b,ca(e,"Send error: "+t.message)),na(e,t)}}(u,e,n,r,i)};var Fa=new X(Z,"https://apis.google.com/js/client.js?onload=%{onload}"),Ua="__fcb"+Math.floor(1e6*Math.random()).toString();function ja(e){if(!s(e=e.email)||!nr.test(e))throw new Gr("invalid-email")}function Va(e){"email"in e&&ja(e)}function qa(e){if(!e[Aa])throw new Gr("internal-error")}function Ba(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Gr("internal-error")}else{if(!e.sessionInfo)throw new Gr("missing-verification-id");if(!e.code)throw new Gr("missing-verification-code")}}ka.prototype.m=function(e,t,n,r,i){var o=this;Na.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},ka.prototype.ob=function(){return Cs(this,ys,{})},ka.prototype.rb=function(e,t){return Cs(this,ds,{idToken:e,email:t})},ka.prototype.sb=function(e,t){return Cs(this,ms,{idToken:e,password:t})};var Wa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function za(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Gr("internal-error")}function Ka(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Mn(e=new Rn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Ha(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Co(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Co(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Co(e)):e.errorMessage&&(t=Is(e.errorMessage)),t)throw t;if(!e[Aa])throw new Gr("internal-error")}function Qa(e,t){return t.returnIdpCredential=!0,Cs(e,vs,t)}function Ga(e,t){return t.returnIdpCredential=!0,Cs(e,bs,t)}function Ya(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Cs(e,gs,t)}function Xa(e){if(!e.oobCode)throw new Gr("invalid-action-code")}(e=ka.prototype).tb=function(e,t){var n={idToken:e},r=[];return K(Wa,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Cs(this,ds,n)},e.kb=function(e,t){return Y(e={requestType:"PASSWORD_RESET",email:e},t),Cs(this,us,e)},e.lb=function(e,t){return Y(e={requestType:"EMAIL_SIGNIN",email:e},t),Cs(this,as,e)},e.jb=function(e,t){return Y(e={requestType:"VERIFY_EMAIL",idToken:e},t),Cs(this,ss,e)},e.Va=function(e){return Cs(this,Ts,e)},e.$a=function(e,t){return Cs(this,fs,{oobCode:e,newPassword:t})},e.Ka=function(e){return Cs(this,Ja,{oobCode:e})},e.Xa=function(e){return Cs(this,$a,{oobCode:e})};var $a={endpoint:"setAccountInfo",D:Xa,fa:"email",F:!0},Ja={endpoint:"resetPassword",D:Xa,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Gr("internal-error")},F:!0},Za={endpoint:"signupNewUser",D:function(e){if(ja(e),!e.password)throw new Gr("weak-password")},K:qa,T:!0,F:!0},es={endpoint:"createAuthUri",F:!0},ts={endpoint:"deleteAccount",V:["idToken"]},ns={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!d(e.deleteProvider))throw new Gr("internal-error")}},rs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:ja,K:qa,T:!0,F:!0},is={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:ja,K:qa,T:!0},os={endpoint:"getAccountInfo"},as={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Gr("internal-error");ja(e)},fa:"email",F:!0},ss={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Gr("internal-error")},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Gr("internal-error");ja(e)},fa:"email",F:!0},ls={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},hs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Gr("internal-error")}},fs={endpoint:"resetPassword",D:Xa,fa:"email",F:!0},ps={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ds={endpoint:"setAccountInfo",V:["idToken"],D:Va,T:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(Va(e),!e.password)throw new Gr("weak-password")},K:qa,T:!0},ys={endpoint:"signupNewUser",K:qa,T:!0,F:!0},vs={endpoint:"verifyAssertion",D:za,Qa:Ka,K:Ha,T:!0,F:!0},gs={endpoint:"verifyAssertion",D:za,Qa:Ka,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Gr("user-not-found");if(e.errorMessage)throw Is(e.errorMessage);if(!e[Aa])throw new Gr("internal-error")},T:!0,F:!0},bs={endpoint:"verifyAssertion",D:function(e){if(za(e),!e.idToken)throw new Gr("internal-error")},Qa:Ka,K:Ha,T:!0},ws={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Gr("invalid-custom-token")},K:qa,T:!0,F:!0},_s={endpoint:"verifyPassword",D:function(e){if(ja(e),!e.password)throw new Gr("wrong-password")},K:qa,T:!0,F:!0},Ts={endpoint:"verifyPhoneNumber",D:Ba,K:qa,F:!0},Es={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Gr("internal-error");Ba(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Co(e);qa(e)}},Ss={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ba,K:qa,F:!0};function Cs(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Xe(new Gr("internal-error"));var r,i=t.Kb||"POST";return Ye(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=_n(e.h+t);bn(a,"key",e.c),o&&bn(a,"cb",S().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&bn(a,u,r[u]);return new Be((function(t,o){La(e,a.toString(),(function(e){e?e.error?o(ks(e,i||{})):t(e):o(new Gr("network-request-failed"))}),n,s?void 0:zn(Tr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Qa?t.Qa(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Gr("internal-error");return r[t.fa]}))}function Is(e){return ks({error:{errors:[{message:e}],code:400,message:e}})}function ks(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Gr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Gr(r[i],t);return!t&&e&&(t=_r(e)),new Gr("internal-error",t)}function Ns(e){this.b=e,this.a=null,this.fb=function(e){return(Os=Os||new Be((function(e,t){function n(){Ir(),mr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Ir(),t(Error("Network Error"))},timeout:Ds.get()})}if(mr("gapi.iframes.Iframe"))e();else if(mr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){mr("gapi.load")?n():t(Error("Network Error"))},Ye(wa(r=re(As,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Os=null,e}))).then((function(){return new Be((function(t,n){mr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Rs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var As=new X(Z,"https://apis.google.com/js/api.js?onload=%{onload}"),Ds=new kr(3e4,6e4),Rs=new kr(5e3,15e3),Os=null;function xs(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),bn(this.a,"apiKey",this.g),bn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ps(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ms(e){try{return cs.app(e).auth().Aa()}catch(e){return[]}}function Ls(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fs(e){var t=Xn();return function(e){return Cs(e,ls,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=_n(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(a=0==o.indexOf("chrome-extension://")?_n(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(tr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new Eo(Xn())}))}function Us(e){return e.l||(e.l=rr().then((function(){if(!e.o){var t=e.c,n=e.h,r=Ms(e.b),i=new xs(e.u,e.f,e.b);i.f=t,i.b=n,i.c=z(r||[]),e.o=i.toString()}e.i=new Ns(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.fb.then((function(){e.a.register("authEvent",t,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=bo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ye(n)}return n.status="ERROR",Ye(n)}))}(e)}))),e.l}function js(e){return e.m||(e.v=e.c?pr(e.c,Ms(e.b)):null,e.m=new ka(e.f,Ci(e.h),e.v)),e.m}function Vs(e,t,n,r,i,o,a,s,u,c,l){return(e=new Ps(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=Q(u||null),e.f=c,e.nb(l).toString()}function qs(e){if(this.a=e||cs.INTERNAL.reactNative&&cs.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Gr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Bs(e){this.b=e,this.a={},this.f=T(this.c,this)}xs.prototype.toString=function(){return this.f?bn(this.a,"v",this.f):Pn(this.a.a,"v"),this.b?bn(this.a,"eid",this.b):Pn(this.a.a,"eid"),this.c.length?bn(this.a,"fw",this.c.join(",")):Pn(this.a.a,"fw"),this.a.toString()},Ps.prototype.nb=function(e){return this.h=e,this},Ps.prototype.toString=function(){var e=Tn(this.o,"/__/auth/handler");if(bn(e,"apiKey",this.m),bn(e,"appName",this.c),bn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=cs.app(this.c).auth().ha()}catch(e){n=null}for(var r in t.ab=n,bn(e,"providerId",this.a.providerId),n=Tr((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=Q(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.cb&&t.ab&&!n[t.cb]&&(n[t.cb]=t.ab),H(n)||bn(e,"customParameters",_r(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&bn(e,"scopes",t.join(",")),this.l?bn(e,"redirectUrl",this.l):Pn(e.a,"redirectUrl"),this.g?bn(e,"eventId",this.g):Pn(e.a,"eventId"),this.i?bn(e,"v",this.i):Pn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!wn(e,a)&&bn(e,a,this.b[a]);return this.h?bn(e,"tid",this.h):Pn(e.a,"tid"),this.f?bn(e,"eid",this.f):Pn(e.a,"eid"),(a=Ms(this.c)).length&&bn(e,"fw",a.join(",")),e.toString()},(e=Ls.prototype).Fb=function(e,t,n){var r=new Gr("popup-closed-by-user"),i=new Gr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Us(e).then((function(){return function(e,t){return e.fb.then((function(){return new Be((function(n){e.a.send(t.type,t,n,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&Zn(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(e){return new Be((function(t){return function n(){un(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return un(n).then((function(){t(r)}))}))},e.Ob=function(){var e=dr();return!wr(e)&&!Cr(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,a,s){if(!e)return Xe(new Gr("popup-blocked"));if(a&&!wr())return this.ia().s((function(t){Zn(e),i(t)})),r(),Ye();this.a||(this.a=Fs(js(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw Zn(e),i(t),t}));return r(),t})).then((function(){vo(n),a||$n(Vs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Eb=function(e,t,n,r){this.a||(this.a=Fs(js(this)));var i=this;return this.a.then((function(){vo(t),$n(Vs(i.u,i.f,i.b,e,t,Xn(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ia=function(){var e=this;return Us(this).then((function(){return e.i.fb})).s((function(){throw e.a=null,new Gr("network-request-failed")}))},e.Rb=function(){return!0},e.ya=function(e){this.g.push(e)},e.La=function(e){B(this.g,(function(t){return t==e}))},(e=qs.prototype).get=function(e){return Ye(this.a.getItem(e)).then((function(e){return e&&Er(e)}))},e.set=function(e,t){return Ye(this.a.setItem(e,_r(t)))},e.S=function(e){return Ye(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Ws,zs=[];function Ks(e,t,n){H(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Hs(e){this.a=e}function Qs(e){this.c=e,this.b=!1,this.a=[]}function Gs(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Xe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ys(e,c),t})).s((function(t){throw Ys(e,c),t}))}function Ys(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),B(e.a,(function(e){return e==t}))}}function Xs(){if(!Js())throw new Gr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;ar()&&self?(this.l=function(){var e=ar()?self:null;if(F(zs,(function(n){n.b==e&&(t=n)})),!t){var t=new Bs(e);zs.push(t)}return t}(),Ks(this.l,"keyChanged",(function(t,n){return ru(e).then((function(t){return 0<t.length&&F(e.a,(function(e){e(t)})),{keyProcessed:V(t,n.key)}}))})),Ks(this.l,"ping",(function(){return Ye(["keyChanged"])}))):function(){var e=a.navigator;return e&&e.serviceWorker?Ye().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Ye(null)}().then((function(t){(e.h=t)&&(e.g=new Qs(new Hs(t)),Gs(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&V(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function $s(e){return e.m||(e.m=function e(t){return new Be((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(e){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new Be((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)}))}}))}(e)),e.m}function Js(){try{return!!a.indexedDB}catch(e){return!1}}function Zs(e){return e.objectStore("firebaseLocalStorage")}function eu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function tu(e){return new Be((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function nu(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Gs(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Ye()}function ru(e){return $s(e).then((function(e){var t=Zs(eu(e,!1));return t.getAll?tu(t.getAll()):new Be((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function iu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ou(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ye().then((function(){if(Js()){var e=Sr(),r="__sak"+e;return Ws=Ws||new Xs,(n=Ws).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){F(t.a,(function(t){t(e)}))})),e}))}function au(){this.a={},this.type="inMemory"}function su(){if(!function(){var e="Node"==sr();if(!(e=uu()||e&&cs.INTERNAL.node&&cs.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The LocalStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=uu()||cs.INTERNAL.node.localStorage,this.type="localStorage"}function uu(){try{var e=a.localStorage,t=Sr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function cu(){this.type="nullStorage"}function lu(){if(!function(){var e="Node"==sr();if(!(e=hu()||e&&cs.INTERNAL.node&&cs.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The SessionStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=hu()||cs.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hu(){try{var e=a.sessionStorage,t=Sr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function fu(){var e={};e.Browser=mu,e.Node=yu,e.ReactNative=vu,e.Worker=gu,this.a=e[sr()]}Bs.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];F(r,(function(t){i.push(Ye().then((function(){return t(e.origin,e.data.data)})))})),Je(i).then((function(r){var i=[];F(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),F(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Hs.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Qs.prototype.close=function(){for(;0<this.a.length;)Ys(this,this.a[0]);this.b=!0},(e=Xs.prototype).set=function(e,t){var n,r=!1,i=this;return $s(this).then((function(t){return tu((t=Zs(eu(n=t,!0))).get(e))})).then((function(o){var a=Zs(eu(n,!0));return o?(o.value=t,tu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,tu(a.add(o)))})).then((function(){return i.c[e]=t,nu(i,e)})).ka((function(){r&&i.b--}))},e.get=function(e){return $s(this).then((function(t){return tu(Zs(eu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.S=function(e){var t=!1,n=this;return $s(this).then((function(r){return t=!0,n.b++,tu(Zs(eu(r,!0)).delete(e))})).then((function(){return delete n.c[e],nu(n,e)})).ka((function(){t&&n.b--}))},e.$=function(e){0==this.a.length&&function(e){iu(e),function t(){e.f=setTimeout((function(){e.i=ru(e).then((function(t){0<t.length&&F(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ea=function(e){B(this.a,(function(t){return t==e})),0==this.a.length&&iu(this)},(e=ou.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.S=function(e){return this.b.then((function(t){return t.S(e)}))},e.$=function(e){this.a.push(e)},e.ea=function(e){B(this.a,(function(t){return t==e}))},(e=au.prototype).get=function(e){return Ye(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ye()},e.S=function(e){return delete this.a[e],Ye()},e.$=function(){},e.ea=function(){},(e=su.prototype).get=function(e){var t=this;return Ye().then((function(){return Er(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ye().then((function(){var r=_r(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ye().then((function(){t.a.removeItem(e)}))},e.$=function(e){a.window&&zt(a.window,"storage",e)},e.ea=function(e){a.window&&Qt(a.window,"storage",e)},(e=cu.prototype).get=function(){return Ye(null)},e.set=function(){return Ye()},e.S=function(){return Ye()},e.$=function(){},e.ea=function(){},(e=lu.prototype).get=function(e){var t=this;return Ye().then((function(){return Er(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ye().then((function(){var r=_r(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ye().then((function(){t.a.removeItem(e)}))},e.$=function(){},e.ea=function(){};var pu,du,mu={C:su,Sa:lu},yu={C:su,Sa:lu},vu={C:qs,Sa:cu},gu={C:su,Sa:cu},bu={$c:"local",NONE:"none",bd:"session"};function wu(){var e=!(Cr(dr())||!or()),t=wr(),n=yr();this.m=e,this.h=t,this.l=n,this.a={},e=pu=pu||new fu;try{this.g=!Yn()&&Dr()||!a.indexedDB?new e.a.C:new ou(ar()?new au:new e.a.C)}catch(e){this.g=new au,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new au}this.u=new au,this.f=T(this.Pb,this),this.b={}}function _u(){return du=du||new wu}function Tu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Eu(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Su(e,t,n){return n=Eu(t,n),"local"==t.C&&(e.b[n]=null),Tu(e,t.C).S(n)}function Cu(e){e.c&&(clearInterval(e.c),e.c=null)}function Iu(e){this.a=e,this.b=_u()}(e=wu.prototype).get=function(e,t){return Tu(this,e.C).get(Eu(e,t))},e.set=function(e,t,n){var r=Eu(e,n),i=this,o=Tu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=Eu(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),H(this.a)&&(Tu(this,"local").$(this.f),this.h||(Yn()||!Dr())&&a.indexedDB||!this.l||function(e){Cu(e),e.c=setInterval((function(){for(var t in e.a){var n=a.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new xt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=Eu(e,t),this.a[e]&&(B(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),H(this.a)&&(Tu(this,"local").ea(this.f),Cu(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Za(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Tu(this,"local").ea(this.f):Cu(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.Za(t))},yt&&Ct&&10==Ct&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else F(e,T(this.Za,this))},e.Za=function(e){this.a[e]&&F(this.a[e],(function(e){e()}))};var ku,Nu={name:"authEvent",C:"local"};function Au(){this.a=_u()}function Du(e,t){this.b=Ru,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0!==ku||(ku=a.Int32Array?new Int32Array(Uu):Uu),this.reset()}C(Du,(function(){this.b=-1}));for(var Ru=64,Ou=Ru-1,xu=[],Pu=0;Pu<Ou;Pu++)xu[Pu]=0;var Mu=W(128,xu);function Lu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|ku[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Fu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(s(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Lu(e),i=0);else{if(!m(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Lu(e),i=0)}}e.c=i,e.g+=n}Du.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):z(this.h)};var Uu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ju(){Du.call(this,8,Vu)}C(ju,Du);var Vu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function qu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Au,this.g=new Iu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Bu(e){return new Gr("invalid-cordova-configuration",e)}function Wu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function zu(e){return e.f||(e.f=e.ia().then((function(){return new Be((function(t){e.ya((function n(r){return t(r),e.La(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Ku(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ji(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Er(wn(o=_n(i),"firebaseError")||null))?Yr(o):null)?new go(r.c,r.b,null,null,o,null,r.R()):new go(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Wu(e,i)}))}var n=new go("unknown",null,null,null,new Gr("no-auth-event")),r=!1,i=un(500).then((function(){return Ku(e).then((function(){r||Wu(e,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(mr("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},To=To||new wo,function(e){var t=To;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=mr("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Ku(e){var t=null;return function(e){return e.b.get(Nu,e.a).then((function(e){return bo(e)}))}(e.g).then((function(n){return t=n,Su((n=e.g).b,Nu,n.a)})).then((function(){return t}))}function Hu(e){this.a=e,this.b=_u()}(e=qu.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(ir(void 0)?rr().then((function(){return new Be((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Xe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof mr("universalLinks.subscribe",a))throw Bu("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",a))throw Bu("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",a))throw Bu("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",a))throw Bu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Gr("cordova-not-ready")}))},e.Fb=function(e,t){return t(new Gr("operation-not-supported-in-this-environment")),Ye()},e.Db=function(){return Xe(new Gr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Xe(new Gr("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ye().then((function(){return vo(t),zu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new go(t,r,null,o,new Gr("no-auth-event"),null,i),u=mr("BuildInfo.packageName",a);if("string"!=typeof u)throw new Gr("invalid-cordova-configuration");var c=mr("BuildInfo.displayName",a),l={};if(dr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!dr().toLowerCase().match(/android/))return Xe(new Gr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new ju;Fu(t,e),e=[];var n=8*t.g;t.c<56?Fu(t,Mu,56-t.c):Fu(t,Mu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Lu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),l.sessionId=o;var h=Vs(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Nu,s.A(),t)})).then((function(){var t=mr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new Gr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=mr("cordova.plugins.browsertab.openUrl",a)))throw new Gr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=mr("cordova.InAppBrowser.open",a)))throw new Gr("invalid-cordova-configuration");t=dr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new Be((function(e,t){u=function(){var t=mr("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ya(u),c=function(){s=s||un(2e3).then((function(){t(new Gr("redirect-cancelled-by-user"))}))},l=function(){Nr()&&c()},o.addEventListener("resume",c,!1),dr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return Ku(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.La(u),i.c=null}))},e.ya=function(e){this.b.push(e),zu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new go("unknown",null,null,null,new Gr("no-auth-event")),e(t))}))},e.La=function(e){B(this.b,(function(t){return t==e}))};var Qu={name:"pendingRedirect",C:"session"};function Gu(e){return Su(e.b,Qu,e.a)}function Yu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=T(this.o,this),this.b=new cc,this.w=new dc,this.g=new Hu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Xu(this.B,this.u,this.m,Ei)}function Xu(e,t,n,r){var i=cs.SDK_VERSION||null;return ir()?new qu(e,t,n,i,r):new Ls(e,t,n,i,r)}function $u(e){e.f||(e.f=!0,e.a.ya(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function Ju(e){e.a.Ob()&&$u(e).s((function(t){var n=new go("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)})),e.a.Jb()||lc(e.b)}function Zu(e,t){V(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Qu,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Gu(e.g).then((function(){$u(e).s((function(t){var n=new go("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));ic(t)&&e.o(n)}))})):Ju(e)})).s((function(){Ju(e)}))}function ec(e,t){B(e.h,(function(e){return e==t}))}Yu.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=Xu(this.B,this.u,this.m),this.i={}},Yu.prototype.o=function(e){if(!e)throw new Gr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=S())),t=!0;break}}return lc(this.b),t};var tc=new kr(2e3,1e4),nc=new kr(3e4,6e4);function rc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.ya(e.l))}),(function(){e.reset()}),i,o,a)}function ic(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function oc(e,t,n,r,i){var o;return function(e){return e.b.set(Qu,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(ic(t))throw new Gr("operation-not-supported-in-this-environment");return o=t,Gu(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new Be((function(){})):Gu(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function ac(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),tc.get())}Yu.prototype.oa=function(){return this.b.oa()};var sc={};function uc(e,t,n){var r=t+":"+n;return sc[r]||(sc[r]=new Yu(e,t,n)),sc[r]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function lc(e){e.g||(e.g=!0,pc(e,!1,null,null))}function hc(e){e.g&&!e.i&&pc(e,!1,null,null)}function fc(e,t){if(e.b=function(){return Ye(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function pc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Xe(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):fc(e,n):fc(e,{user:null}),e.f=[],e.c=[]}function dc(){}function mc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function yc(e,t){this.a=t,Mr(this,"verificationId",e)}function vc(e,t,n,r){return new po(e).Va(t,n).then((function(e){return new yc(e,r)}))}function gc(e){var t=Ti(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Gr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Lr(this,{token:e,expirationTime:Ar(1e3*t.exp),authTime:Ar(1e3*t.auth_time),issuedAtTime:Ar(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function bc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function wc(e){this.f=e,this.b=this.a=null,this.c=0}function _c(e,t){var n=t[Aa],r=t.refreshToken;t=Tc(t.expiresIn),e.b=n,e.c=t,e.a=r}function Tc(e){return S()+1e3*parseInt(e,10)}function Ec(e,t){this.a=e||null,this.b=t||null,Lr(this,{lastSignInTime:Ar(t||null),creationTime:Ar(e||null)})}function Sc(e,t,n,r,i,o){Lr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Cc(e,t){for(var n in Ot.call(this,e),t)this[n]=t[n]}function Ic(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=cs.SDK_VERSION?pr(cs.SDK_VERSION):null,this.a=new ka(this.l,Ci(Ei),e),this.b=new wc(this.a),xc(this,t[Aa]),_c(this.b,t),Mr(this,"refreshToken",this.b.a),Lc(this,n||{}),nn.call(this),this.J=!1,this.o&&vr()&&(this.i=uc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new bc((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-S()-3e5;return 0<t?t:0}))}(this),this.W=T(this.Ha,this);var r=this;this.ga=null,this.va=function(e){r.sa(e.g)},this.Z=null,this.P=[],this.ua=function(e){Nc(r,e.c)},this.Y=null}function kc(e,t){e.Z&&Qt(e.Z,"languageCodeChanged",e.va),(e.Z=t)&&zt(t,"languageCodeChanged",e.va)}function Nc(e,t){e.P=t,Ma(e.a,cs.SDK_VERSION?pr(cs.SDK_VERSION,e.P):null)}function Ac(e,t){e.Y&&Qt(e.Y,"frameworkChanged",e.ua),(e.Y=t)&&zt(t,"frameworkChanged",e.ua)}function Dc(t){try{return cs.app(t.m).auth()}catch(e){throw new Gr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Rc(e){e.B||e.w.b||(e.w.start(),Qt(e,"tokenChanged",e.W),zt(e,"tokenChanged",e.W))}function Oc(e){Qt(e,"tokenChanged",e.W),e.w.stop()}function xc(e,t){e.ma=t,Mr(e,"_lat",t)}function Pc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Je(t).then((function(){return e}))}function Mc(e){e.i&&!e.J&&(e.J=!0,Zu(e.i,e))}function Lc(e,t){Lr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Ec(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Fc(){}function Uc(e){return Ye().then((function(){if(e.B)throw new Gr("app-deleted")}))}function jc(e){return U(e.providerData,(function(e){return e.providerId}))}function Vc(e,t){t&&(qc(e,t.providerId),e.providerData.push(t))}function qc(e,t){B(e.providerData,(function(e){return e.providerId==t}))}function Bc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Mr(e,t,n)}function Wc(e,t){e!=t&&(Lr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Mr(e,"metadata",function(e){return new Ec(e.a,e.b)}(t.metadata)):Mr(e,"metadata",new Ec),F(t.providerData,(function(t){Vc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Mr(e,"refreshToken",e.b.a))}function zc(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return Cs(e.a,os,{idToken:t}).then(T(e.zc,e))}(e,t).then((function(){return n||Bc(e,"isAnonymous",!1),t}))}))}function Kc(e,t){t[Aa]&&e.ma!=t[Aa]&&(_c(e.b,t),e.dispatchEvent(new Cc("tokenChanged")),xc(e,t[Aa]),Bc(e,"refreshToken",e.b.a))}function Hc(e,t){return zc(e).then((function(){if(V(jc(e),t))return Pc(e).then((function(){throw new Gr("provider-already-linked")}))}))}function Qc(e,t,n){return Fr({user:e,credential:yo(t),additionalUserInfo:t=Di(t),operationType:n})}function Gc(e,t){return Kc(e,t),e.reload().then((function(){return e}))}function Yc(e,t,n,r,i){if(!vr())return Xe(new Gr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Xe(e.h);var o=Ai(n.providerId),a=Sr(e.uid+":::"),s=null;(!wr()||or())&&e.o&&n.isOAuthProvider&&(s=Vs(e.o,e.l,e.m,t,n,null,a,cs.SDK_VERSION||null,null,null,e.tenantId));var u=er(s,o&&o.Da,o&&o.Ca);return r=r().then((function(){if($c(e),!i)return e.G().then((function(){}))})).then((function(){return rc(e.i,u,t,n,a,!!s,e.tenantId)})).then((function(){return new Be((function(n,r){e.ja(t,null,new Gr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.c=ac(e.i,e,t,u,a)}))})).then((function(e){return u&&Zn(u),e?Fr(e):null})).s((function(e){throw u&&Zn(u),e})),Jc(e,r,i)}function Xc(e,t,n,r,i){if(!vr())return Xe(new Gr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Xe(e.h);var o=null,a=Sr(e.uid+":::");return r=r().then((function(){if($c(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=a,Pc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(tl,e.A(),t.a)),t})).then((function(){return oc(e.i,t,n,a,e.tenantId)})).s((function(t){if(o=t,e.da)return nl(e.da);throw o})).then((function(){if(o)throw o})),Jc(e,r,i)}function $c(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Gr("internal-error");throw new Gr("auth-domain-config-required")}}function Jc(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Xe(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Cc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){q(e.I,r)})),r}function Zc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Aa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-S())/1e3;var r=new Ic(t,n,e);return e.providerData&&F(e.providerData,(function(e){e&&Vc(r,Fr(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function el(e){this.a=e,this.b=_u()}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(pc(this,!0,null,e.a),Ye()):t.za(n,r)?function(e,t,n){n=n.za(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){pc(e,s,t,null)})).s((function(t){pc(e,s,null,t)}))}(this,e,t):Xe(new Gr("invalid-auth-event")):(pc(this,!1,null,null),Ye())}else Xe(new Gr("invalid-auth-event"))},cc.prototype.oa=function(){var e=this;return new Be((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Gr("timeout");e.a&&e.a.cancel(),e.a=un(nc.get()).then((function(){e.b||(e.g=!0,pc(e,!0,null,t))}))}(e))}))},dc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Ye()):t.za(n,r)?function(e,t){var n=e.b,r=e.c;t.za(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):Xe(new Gr("invalid-auth-event"))}else Xe(new Gr("invalid-auth-event"))},yc.prototype.confirm=function(e){return e=mo(this.verificationId,e),this.a(e)},bc.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=un(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return e=a.document,t=null,Nr()||!e?Ye():new Be((function(n){t=function(){Nr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}));var e,t})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},bc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},wc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Xe(new Gr("user-token-expired")):e||!this.b||S()>this.c-3e4?this.a?function(e,t){return function(e,t){return new Be((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?La(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(ks(e)):e.access_token&&e.refresh_token?n(e):r(new Gr("internal-error")):r(new Gr("network-request-failed"))}),"POST",xn(t).toString(),e.g,e.u.get()):r(new Gr("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=Tc(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ye(null):Ye({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ec.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Cc,Ot),C(Ic,nn),Ic.prototype.sa=function(e){this.ga=e,Pa(this.a,e)},Ic.prototype.ha=function(){return this.ga},Ic.prototype.Aa=function(){return z(this.P)},Ic.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Mr(Ic.prototype,"providerId","firebase"),(e=Ic.prototype).reload=function(){var e=this;return Jc(this,Uc(this).then((function(){return zc(e).then((function(){return Pc(e)})).then(Fc)})))},e.dc=function(e){return this.G(e).then((function(e){return new gc(e)}))},e.G=function(e){var t=this;return Jc(this,Uc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Gr("internal-error");return e.accessToken!=t.ma&&(xc(t,e.accessToken),t.dispatchEvent(new Cc("tokenChanged"))),Bc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Gr("internal-error");Lc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?U(e,(function(e){return new Sc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Vc(this,t[n]);Bc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(e)},e.gb=function(e){var t=this,n=null;return Jc(this,e.f(this.a,this.uid).then((function(e){return Kc(t,e),n=Qc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.rc=function(e){return xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(e)},e.eb=function(e){var t=this,n=null;return Jc(this,Hc(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Qc(t,e,"link"),Gc(t,e)})).then((function(){return n})))},e.sc=function(e,t){var n=this;return Jc(this,Hc(this,"phone").then((function(){return vc(Dc(n),e,t,T(n.eb,n))})))},e.Bc=function(e,t){var n=this;return Jc(this,Ye().then((function(){return vc(Dc(n),e,t,T(n.gb,n))})),!0)},e.rb=function(e){var t=this;return Jc(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},e.Sc=function(e){var t=this;return Jc(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Kc(t,e),t.reload()})))},e.sb=function(e){var t=this;return Jc(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Kc(t,e),t.reload()})))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Uc(this);var t=this;return Jc(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Kc(t,e),Bc(t,"displayName",e.displayName||null),Bc(t,"photoURL",e.photoUrl||null),F(t.providerData,(function(e){"password"===e.providerId&&(Mr(e,"displayName",t.displayName),Mr(e,"photoURL",t.photoURL))})),Pc(t)})).then(Fc))},e.Qc=function(e){var t=this;return Jc(this,zc(this).then((function(n){return V(jc(t),e)?function(e,t,n){return Cs(e,ns,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return F(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),F(jc(t),(function(e){n[e]||qc(t,e)})),n[po.PROVIDER_ID]||Mr(t,"phoneNumber",null),Pc(t)})):Pc(t).then((function(){throw new Gr("no-such-provider")}))})))},e.delete=function(){var e=this;return Jc(this,this.G().then((function(t){return Cs(e.a,ts,{idToken:t})})).then((function(){e.dispatchEvent(new Cc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");kc(e,null),Ac(e,null),e.I=[],e.B=!0,Oc(e),Mr(e,"refreshToken",null),e.i&&ec(e.i,e)}))},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?T(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?T(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?T(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?T(this.Cb,this):null},e.tc=function(e){var t=this;return Yc(this,"linkViaPopup",e,(function(){return Hc(t,e.providerId).then((function(){return Pc(t)}))}),!1)},e.Cc=function(e){return Yc(this,"reauthViaPopup",e,(function(){return Ye()}),!0)},e.uc=function(e){var t=this;return Xc(this,"linkViaRedirect",e,(function(){return Hc(t,e.providerId)}),!1)},e.Dc=function(e){return Xc(this,"reauthViaRedirect",e,(function(){return Ye()}),!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jc(this,this.G().then((function(n){return Ga(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Qc(i,e,"link"),Gc(i,e)})).then((function(){return o})))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jc(this,Ye().then((function(){return qi(Ya(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Qc(i,e,"reauthenticate"),Kc(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(e){var t=this,n=null;return Jc(this,this.G().then((function(t){return n=t,void 0===e||H(e)?{}:vi(new si(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(e,this.metadata.A()),F(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var tl={name:"redirectUser",C:"session"};function nl(e){return Su(e.b,tl,e.a)}function rl(e){this.a=e,this.b=_u(),this.c=null,this.f=function(e){var t=al("local"),n=al("session"),r=al("none");return function(e,t,n){var r=Eu(t,n),i=Tu(e,t.C);return e.get(t,n).then((function(o){var s=null;try{s=Er(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ol,e.a).then((function(e){return e?al(e):t}))}))}))})).then((function(t){return e.c=t,il(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(al("local"),this.a,T(this.g,this))}function il(e,t){var n,r=[];for(n in bu)bu[n]!==t&&r.push(Su(e.b,al(bu[n]),e.a));return r.push(Su(e.b,ol,e.a)),function(e){return new Be((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)$e(e[s],E(o,s),a);else t(i)}))}(r)}rl.prototype.g=function(){var e=this,t=al("local");ll(this,(function(){return Ye().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return il(e,"local").then((function(){e.c=t}))}))}))};var ol={name:"persistence",C:"session"};function al(e){return{name:"authUser",C:e}}function sl(e,t){return ll(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function ul(e){return ll(e,(function(){return Su(e.b,e.c,e.a)}))}function cl(e,t){return ll(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zc(e||{})}))}))}function ll(e,t){return e.f=e.f.then(t,t),e.f}function hl(e){if(this.l=!1,Mr(this,"settings",new mc),Mr(this,"app",e),!bl(this).options||!bl(this).options.apiKey)throw new Gr("invalid-api-key");e=cs.SDK_VERSION?pr(cs.SDK_VERSION):null,this.b=new ka(bl(this).options&&bl(this).options.apiKey,Ci(Ei),e),this.O=[],this.m=[],this.J=[],this.Ub=cs.INTERNAL.createSubscribe(T(this.oc,this)),this.W=void 0,this.Vb=cs.INTERNAL.createSubscribe(T(this.pc,this)),vl(this,null),this.h=new rl(bl(this).options.apiKey+":"+bl(this).name),this.w=new el(bl(this).options.apiKey+":"+bl(this).name),this.Y=El(this,function(e){var t=bl(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(tl,e.a).then((function(e){return e&&t&&(e.authDomain=t),Zc(e||{})}))}(e.w,bl(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),nl(e.w)}));return El(e,t)}(e).then((function(){return cl(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return sl(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:ul(e.h)}))):null})).then((function(t){vl(e,t||null)}));return El(e,n)}(this)),this.i=El(this,function(e){return e.Y.then((function(){return ml(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(al("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=T(this.Nc,this),this.ub=T(this.aa,this),this.ua=T(this.bc,this),this.va=T(this.mc,this),this.Ha=T(this.nc,this),this.a=null,function(e){var t=bl(e).options.authDomain,n=bl(e).options.apiKey;t&&vr()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=uc(t,n,bl(e).name),Zu(e.a,e),wl(e)&&Mc(wl(e)),e.B){Mc(e.B);var r=e.B;r.sa(e.ha()),kc(r,e),Nc(r=e.B,e.I),Ac(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=T(this.delete,this),this.INTERNAL.logFramework=T(this.vc,this),this.o=0,nn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.sa(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function fl(e){Ot.call(this,"languageCodeChanged"),this.g=e}function pl(e){Ot.call(this,"frameworkChanged"),this.c=e}function dl(e){return e.Tb||Xe(new Gr("auth-domain-config-required"))}function ml(e){if(!vr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=dl(e).then((function(){return e.a.oa()})).then((function(e){return e?Fr(e):null}));return El(e,t)}function yl(e,t){var n={};return n.apiKey=bl(e).options.apiKey,n.authDomain=bl(e).options.authDomain,n.appName=bl(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Ic(e,t);return n&&(i.da=n),r&&Nc(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Aa())})).then((function(t){return wl(e)&&t.uid==wl(e).uid?Wc(wl(e),t):(vl(e,t),Mc(t)),e.aa(t)})).then((function(){Tl(e)}))}function vl(e,t){wl(e)&&(function(e,t){B(e.O,(function(e){return e==t}))}(wl(e),e.ub),Qt(wl(e),"tokenChanged",e.ua),Qt(wl(e),"userDeleted",e.va),Qt(wl(e),"userInvalidated",e.Ha),Oc(wl(e))),t&&(t.O.push(e.ub),zt(t,"tokenChanged",e.ua),zt(t,"userDeleted",e.va),zt(t,"userInvalidated",e.Ha),0<e.o&&Rc(t)),Mr(e,"currentUser",t),t&&(t.sa(e.ha()),kc(t,e),Nc(t,e.I),Ac(t,e))}function gl(e,t){var n=null,r=null;return El(e,t.then((function(t){return n=yo(t),r=Di(t),yl(e,t)})).then((function(){return Fr({user:wl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bl(e){return e.app}function wl(e){return e.currentUser}function _l(e){return wl(e)&&wl(e)._lat||null}function Tl(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](_l(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](_l(e))}}function El(e,t){return e.O.push(t),t.ka((function(){q(e.O,t)})),t}function Sl(){}function Cl(){this.a={},this.b=1e12}rl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Gr("invalid-persistence-type"),n=new Gr("unsupported-persistence-type");e:{for(r in bu)if(bu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(sr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!yr()&&"none"!==e)throw n}}(e),ll(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,il(n,e)})).then((function(){if(n.c=al(e),t)return n.b.set(n.c,t,n.a)})):Ye()}))},C(hl,nn),C(fl,Ot),C(pl,Ot),(e=hl.prototype).mb=function(e){return El(this,e=this.h.mb(e))},e.sa=function(e){this.Z===e||this.l||(this.Z=e,Pa(this.b,this.Z),this.dispatchEvent(new fl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=a.navigator;this.sa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),Ma(this.b,cs.SDK_VERSION?pr(cs.SDK_VERSION,this.I):null),this.dispatchEvent(new pl(this.I))},e.Aa=function(){return z(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:bl(this).options.apiKey,authDomain:bl(this).options.authDomain,appName:bl(this).name,currentUser:wl(this)&&wl(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?T(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Qa(i.b,e).then((function(e){return o=yo(e),a=Di(e),e}));return El(this,e=i.Y.then((function(){return s})).then((function(e){return yl(i,e)})).then((function(){return Fr({user:wl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},e.Lc=function(e){if(!vr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=this,n=Ai(e.providerId),r=Sr(),i=null;(!wr()||or())&&bl(this).options.authDomain&&e.isOAuthProvider&&(i=Vs(bl(this).options.authDomain,bl(this).options.apiKey,bl(this).name,"signInViaPopup",e,null,r,cs.SDK_VERSION||null,null,null,this.R()));var o=er(i,n&&n.Da,n&&n.Ca);return El(this,n=dl(this).then((function(n){return rc(n,o,"signInViaPopup",e,r,!!i,t.R())})).then((function(){return new Be((function(e,n){t.ja("signInViaPopup",null,new Gr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=ac(t.a,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&Zn(o),e?Fr(e):null})).s((function(e){throw o&&Zn(o),e})))},e.Mc=function(e){if(!vr())return Xe(new Gr("operation-not-supported-in-this-environment"));var t=this;return El(this,dl(this).then((function(){return function(e){return ll(e,(function(){return e.b.set(ol,e.c.C,e.a)}))}(t.h)})).then((function(){return oc(t.a,"signInViaRedirect",e,void 0,t.R())})))},e.oa=function(){var e=this;return ml(this).then((function(t){return e.a&&hc(e.a.b),t})).s((function(t){throw e.a&&hc(e.a.b),t}))},e.Rc=function(e){if(!e)return Xe(new Gr("null-user"));if(this.P!=e.tenantId)return Xe(new Gr("tenant-id-mismatch"));var t=this,n={};n.apiKey=bl(this).options.apiKey,n.authDomain=bl(this).options.authDomain,n.appName=bl(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Aa]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,t=new Ic(t,o),n&&(t.da=n),r&&Nc(t,r),Wc(t,e),t}(e,n,t.w,t.Aa());return El(this,this.i.then((function(){if(bl(t).options.apiKey!=e.l)return r.reload()})).then((function(){return wl(t)&&e.uid==wl(t).uid?(Wc(wl(t),e),t.aa(e)):(vl(t,r),Mc(r),t.aa(r))})).then((function(){Tl(t)})))},e.pb=function(){var e=this;return El(this,this.i.then((function(){return e.a&&hc(e.a.b),wl(e)?(vl(e,null),ul(e.h).then((function(){Tl(e)}))):Ye()})))},e.Nc=function(){var e=this;return cl(this.h,bl(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=wl(e)&&t){n=wl(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Wc(wl(e),t),wl(e).G();(wl(e)||t)&&(vl(e,t),t&&(Mc(t),t.da=e.w),e.a&&Zu(e.a,e),Tl(e))}}))},e.aa=function(e){return sl(this.h,e)},e.bc=function(){Tl(this),this.aa(wl(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(wl(t))}))},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),El(e,e.i.then((function(){!e.l&&V(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(_l(e)))})))}(this,(function(){e.next(wl(t))}))},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){y(e)?e(wl(r)):y(e.next)&&e.next(wl(r))})),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),y(e)?e(wl(r)):y(e.next)&&e.next(wl(r))})),this.Vb(e,t,n)},e.cc=function(e){var t=this;return El(this,this.i.then((function(){return wl(t)?wl(t).G(e).then((function(e){return{accessToken:e}})):null})))},e.Hc=function(e){var t=this;return this.i.then((function(){return gl(t,Cs(t.b,ws,{token:e}))})).then((function(e){var n=e.user;return Bc(n,"isAnonymous",!1),t.aa(n),e}))},e.Ic=function(e,t){var n=this;return this.i.then((function(){return gl(n,Cs(n.b,_s,{email:e,password:t}))}))},e.Xb=function(e,t){var n=this;return this.i.then((function(){return gl(n,Cs(n.b,Za,{email:e,password:t}))}))},e.Ra=function(e){var t=this;return this.i.then((function(){return gl(t,e.na(t.b))}))},e.Gc=function(e){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(e)},e.ob=function(){var e=this;return this.i.then((function(){var t=wl(e);return t&&t.isAnonymous?Fr({user:t,credential:null,additionalUserInfo:Fr({providerId:null,isNewUser:!1}),operationType:"signIn"}):gl(e,e.b.ob()).then((function(t){var n=t.user;return Bc(n,"isAnonymous",!0),e.aa(n),t}))}))},e.getUid=function(){return wl(this)&&wl(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&wl(this)&&Rc(wl(this))},e.Ec=function(e){var t=this;F(this.m,(function(n){n==e&&t.o--})),this.o<0&&(this.o=0),0==this.o&&wl(this)&&Oc(wl(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),El(this,this.i.then((function(){t.l||V(t.m,e)&&e(_l(t))})))},e.removeAuthTokenListener=function(e){B(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(al("local"),e.a,this.ma),this.a&&(ec(this.a,this),hc(this.a.b)),Promise.resolve()},e.$b=function(e){return El(this,function(e,t){return Cs(e,es,{identifier:t,continueUri:gr()?Xn():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!co(e)},e.lb=function(e,t){var n=this;return El(this,Ye().then((function(){var e=new si(t);if(!e.c)throw new Gr("argument-error",li+" must be true when sending sign in link to email");return vi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Uc=function(e){return this.Ka(e).then((function(e){return e.data.email}))},e.$a=function(e,t){return El(this,this.b.$a(e,t).then((function(){})))},e.Ka=function(e){return El(this,this.b.Ka(e).then((function(e){return new jr(e)})))},e.Xa=function(e){return El(this,this.b.Xa(e).then((function(){})))},e.kb=function(e,t){var n=this;return El(this,Ye().then((function(){return void 0===t||H(t)?{}:vi(new si(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},e.Kc=function(e,t){return El(this,vc(this,e,t,T(this.Ra,this)))},e.Jc=function(e,t){var n=this;return El(this,Ye().then((function(){var r=t||Xn(),i=uo(e,r);if(!(r=co(r)))throw new Gr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Gr("tenant-id-mismatch");return n.Ra(i)})))},Sl.prototype.render=function(){},Sl.prototype.reset=function(){},Sl.prototype.getResponse=function(){},Sl.prototype.execute=function(){};var Il=null;function kl(e,t){return(t=Nl(t))&&e.a[t]||null}function Nl(e){return(e=void 0===e?1e12:e)?e.toString():null}function Al(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Vn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():zt(this.f,"click",this.i)}function Dl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Rl(){}Cl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Al(e,t),this.b++},Cl.prototype.reset=function(e){var t=kl(this,e);e=Nl(e),t&&e&&(t.delete(),delete this.a[e])},Cl.prototype.getResponse=function(e){return(e=kl(this,e))?e.getResponse():null},Cl.prototype.execute=function(e){(e=kl(this,e))&&e.execute()},Al.prototype.getResponse=function(){return Dl(this),this.b},Al.prototype.execute=function(){Dl(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(t){}e.h&&e.execute()}),6e4)}),500))},Al.prototype.delete=function(){Dl(this),this.g=!0,clearTimeout(this.a),this.a=null,Qt(this.f,"click",this.i)},Rl.prototype.g=function(){return Ye(Il=Il||new Cl)},Rl.prototype.c=function(){};var Ol=null;function xl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Pl=new X(Z,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ml=new kr(3e4,6e4);xl.prototype.g=function(e){var t=this;return new Be((function(n,r){var i=setTimeout((function(){r(new Gr("network-request-failed"))}),Ml.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Gr("internal-error"));delete a[t.a]},Ye(wa(re(Pl,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Gr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},xl.prototype.c=function(){this.b--};var Ll=null;function Fl(e,t,n,r,i,o,s){if(Mr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,s=s?Ol=Ol||new Rl:Ll=Ll||new xl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vl])throw new Gr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ql],!a.document)throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Vn(t)||!this.i&&Vn(t).hasChildNodes())throw new Gr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new ka(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(e){if(Bl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=mr(c,a);"function"==typeof t&&t(e)}};var l=this.a[jl];this.a[jl]=function(){if(Bl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=mr(l,a);"function"==typeof e&&e()}}}var Ul="callback",jl="expired-callback",Vl="sitekey",ql="size";function Bl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Wl(e,t){return e.h.push(t),t.ka((function(){q(e.h,t)})),t}function zl(e){if(e.B)throw new Gr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(e,t,n){var r=!1;try{this.b=n||cs.app()}catch(e){throw new Gr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Gr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Aa()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=cs.SDK_VERSION?pr(cs.SDK_VERSION,o):null,Fl.call(this,n,e,t,(function(){try{var t=i.b.auth().ha()}catch(e){t=null}return t}),o,Ci(Ei),r)}function Hl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Gr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],i<0||i>=Ql.length)throw new Gr("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Gr("argument-error",e+" failed: "+r)}(e=Fl.prototype).Ba=function(){var e=this;return this.f?this.f:this.f=Wl(this,Ye().then((function(){if(gr()&&!ar())return rr();throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,Cs(e.o,hs,{})})).then((function(t){e.a[Vl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){zl(this);var e=this;return Wl(this,this.Ba().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=Vn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!jn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Le(a.name),'"'),a.type){o.push(' type="',Le(a.type),'"');var u={};Y(u,a),delete u.type,a=u}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(s(a)?o.className=a:d(a)?o.className=a.join(" "):qn(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(s(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||v(o)&&0<o.nodeType?r(o):F(Wn(o)?z(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){zl(this);var e=this;return Wl(this,this.render().then((function(t){return new Be((function(n){var r=e.g.getResponse(t);r?n(r):(e.l.push((function t(r){r&&(function(e,t){B(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c))}))})))},e.reset=function(){zl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){zl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Vn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},C(Kl,Fl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:s}}function Yl(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:u}}function Xl(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:v}}function $l(e,t){return{name:e||"",M:"a function",optional:!!t,N:y}}function Jl(e,t){return{name:e||"",M:"null",optional:!!t,N:p}}function Zl(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function eh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&s(e.type)&&y(e.verify))}}}function th(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function nh(e,t){for(var n in t){var r=t[n].name;e[r]=oh(r,e[n],t[n].j)}}function rh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){Hl(e,[n],[r],!0),this[t]=r}),r,n,t[n].Ya),enumerable:!0})}}function ih(e,t,n,r){e[t]=oh(t,n,r)}function oh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Hl(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}nh(hl.prototype,{Xa:{name:"applyActionCode",j:[Gl("code")]},Ka:{name:"checkActionCode",j:[Gl("code")]},$a:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},wc:{name:"onAuthStateChanged",j:[th(Xl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[th(Xl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Gl("email"),th(Xl("opt_actionCodeSettings",!0),Jl(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Xl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Gl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zl()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[Zl()]},Hc:{name:"signInWithCustomToken",j:[Gl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Jc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[th({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Ic)}},Jl(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),rh(hl.prototype,{lc:{name:"languageCode",Ya:th(Gl(),Jl(),"languageCode")},ti:{name:"tenantId",Ya:th(Gl(),Jl(),"tenantId")}}),(hl.Persistence=bu).LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",nh(Ic.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zl()]},eb:{name:"linkWithCredential",j:[Zl()]},sc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zl()]},gb:{name:"reauthenticateWithCredential",j:[Zl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),eh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[th(Xl("opt_actionCodeSettings",!0),Jl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Qc:{name:"unlink",j:[Gl("provider")]},rb:{name:"updateEmail",j:[Gl("email")]},sb:{name:"updatePassword",j:[Gl("password")]},Sc:{name:"updatePhoneNumber",j:[Zl("phone")]},tb:{name:"updateProfile",j:[Xl("profile")]}}),nh(Cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Be.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(mc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:Yl("appVerificationDisabledForTesting")}}),nh(yc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),ih(Vi,"fromJSON",(function(e){e=s(e)?JSON.parse(e):e;for(var t,n=[Qi,ao,ho,zi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[th(Gl(),Xl(),"json")]),ih(so,"credential",(function(e,t){return new oo(e,t)}),[Gl("email"),Gl("password")]),nh(oo.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh($i.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih($i,"credential",Ji,[th(Gl(),Xl(),"token")]),ih(so,"credentialWithLink",uo,[Gl("email"),Gl("emailLink")]),nh(Zi.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(Zi,"credential",eo,[th(Gl(),Xl(),"token")]),nh(to.prototype,{wa:{name:"addScope",j:[Gl("scope")]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(to,"credential",no,[th(Gl(),th(Xl(),Jl()),"idToken"),th(Gl(),Jl(),"accessToken",!0)]),nh(ro.prototype,{Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),ih(ro,"credential",io,[th(Gl(),Xl(),"token"),Gl("secret",!0)]),nh(Xi.prototype,{wa:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[th(Gl(),th(Xl(),Jl()),"optionsOrIdToken"),th(Gl(),Jl(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[Xl("customOAuthParameters")]}}),nh(Ki.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Bi.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),ih(po,"credential",mo,[Gl("verificationId"),Gl("verificationCode")]),nh(po.prototype,{Va:{name:"verifyPhoneNumber",j:[Gl("phoneNumber"),eh()]}}),nh(lo.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Gr.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(So.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Eo.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),nh(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(Jr,"parseLink",ai,[Gl("link")]),function(){if(void 0===cs||!cs.INTERNAL||!cs.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:Vi,Error:Gr};ih(e,"EmailAuthProvider",so,[]),ih(e,"FacebookAuthProvider",$i,[]),ih(e,"GithubAuthProvider",Zi,[]),ih(e,"GoogleAuthProvider",to,[]),ih(e,"TwitterAuthProvider",ro,[]),ih(e,"OAuthProvider",Xi,[Gl("providerId")]),ih(e,"SAMLAuthProvider",Yi,[Gl("providerId")]),ih(e,"PhoneAuthProvider",po,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof hl)}}]),ih(e,"RecaptchaVerifier",Kl,[th(Gl(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Xl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof cs.app.App)}}]),ih(e,"ActionCodeURL",Jr,[]),cs.INTERNAL.registerService("auth",(function(e,t){return t({INTERNAL:{getUid:T((e=new hl(e)).getUid,e),getToken:T(e.cc,e),addAuthTokenListener:T(e.Wb,e),removeAuthTokenListener:T(e.Ec,e)}}),e}),e,(function(e,t){if("create"===e)try{t.auth()}catch(e){}})),cs.INTERNAL.extendNamespace({User:Ic})}()}).apply("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ls=(hs.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Na(t))},hs.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ka(t)},hs.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},hs.prototype.prefixedName_=function(e){return this.prefix_+e},hs.prototype.toString=function(){return this.domStorage_.toString()},hs);function hs(e){this.domStorage_=e,this.prefix_="firebase:"}var fs=(ps.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},ps.prototype.get=function(e){return Da(this.cache_,e)?this.cache_[e]:null},ps.prototype.remove=function(e){delete this.cache_[e]},ps);function ps(){this.cache_={},this.isInMemoryStorage=!0}function ds(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ls(t)}}catch(e){}return new fs}function ms(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;la(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}(e),n=new Pa;n.update(t);var r=n.digest();return fa.encodeByteArray(r)}function ys(e,t){la(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(As.logLevel=Fa.VERBOSE,Os=As.log.bind(As),t&&Ns.set("logging_enabled",!0)):"function"==typeof e?Os=e:(Os=null,Ns.remove("logging_enabled"))}function vs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===xs&&(xs=!1,null===Os&&!0===Ns.get("logging_enabled")&&ys(!0)),Os){var n=Rs.apply(null,e);Os(n)}}function gs(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];vs.apply(void 0,oa([e],t))}}function bs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+Rs.apply(void 0,oa(e));As.error(n)}function ws(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+Rs.apply(void 0,oa(e));throw As.error(n),new Error(n)}function _s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+Rs.apply(void 0,oa(e));As.warn(n)}function Ts(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function Es(e,t){return e===t?0:e<t?-1:1}function Ss(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Na(t))}function Cs(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r}var Is,ks=ds("localStorage"),Ns=ds("sessionStorage"),As=new $a("@firebase/database"),Ds=(Is=1,function(){return Is++}),Rs=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++)Array.isArray(t[i])||t[i]&&"object"==typeof t[i]&&"number"==typeof t[i].length?r+=e.apply(null,t[i]):"object"==typeof t[i]?r+=Na(t[i]):r+=t[i],r+=" ";return r},Os=null,xs=!0,Ps="[MIN_NAME]",Ms="[MAX_NAME]",Ls=function(e,t){if(e===t)return 0;if(e===Ps||t===Ms)return-1;if(t===Ps||e===Ms)return 1;var n=Ws(e),r=Ws(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Fs=function e(t){if("object"!=typeof t||null===t)return Na(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=Na(n[o]),i+=":",i+=e(t[n[o]]);return i+"}"};function Us(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function js(e){var t,n,r,i,o,a,s;for(la(!Ts(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Vs(e){try{e()}catch(r){setTimeout((function(){throw _s("Exception was thrown by user callback.",r.stack||""),r}),Math.floor(0))}}function qs(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}var Bs=new RegExp("^-?(0*)\\d{1,10}$"),Ws=function(e){if(Bs.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},zs=(Object.defineProperty(Ks,"Empty",{get:function(){return new Ks("")},enumerable:!0,configurable:!0}),Ks.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Ks.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Ks.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new Ks(this.pieces_,e)},Ks.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Ks.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},Ks.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},Ks.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},Ks.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new Ks(e,0)},Ks.prototype.child=function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof Ks)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)0<r[n].length&&t.push(r[n])}return new Ks(t,0)},Ks.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Ks.relativePath=function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return Ks.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")},Ks.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=Ls(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Ks.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},Ks.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},Ks);function Ks(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}var Hs=(Object.defineProperty(Qs,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Qs,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Qs.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=Ha(e),this.checkValid_()},Qs.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=Ha(e),0<this.parts_.length&&(this.byteLength_-=1)},Qs.prototype.checkValid_=function(){if(this.byteLength_>Qs.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Qs.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Qs.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qs.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Qs.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Qs);function Qs(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Ha(this.parts_[n]);this.checkValid_()}var Gs="firebaseio.com",Ys="websocket",Xs="long_polling",$s=(Js.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Js.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Js.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Js.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Js.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ks.set("host:"+this.host,this.internalHost))},Js.prototype.connectionURL=function(e,t){var n;if(la("string"==typeof e,"typeof type must == string"),la("object"==typeof t,"typeof params must == object"),e===Ys)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Xs)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return Us(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},Js.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},Js.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Js);function Js(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ks.get("host:"+e)||this.host}function Zs(e){var t=hu(e),n=t.namespace;"firebase"===t.domain&&ws(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||ws("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new $s(t.host,t.secure,n,r,"",n!=t.subdomain),path:new zs(t.pathString)}}function eu(e){return"string"==typeof e&&0!==e.length&&!fu.test(e)}function tu(e){return"string"==typeof e&&0!==e.length&&!pu.test(e)}function nu(e){return null===e||"string"==typeof e||"number"==typeof e&&!Ts(e)||e&&"object"==typeof e&&Da(e,".sv")}function ru(e,t,n,r,i){i&&void 0===n||mu(Wa(e,t,i),n,r)}function iu(e,t,n,r,i){if(!i||void 0!==n){var o=Wa(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Us(n,(function(e,t){var n=new zs(e);if(mu(o,t,r.child(n)),".priority"===n.getBack()&&!nu(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!eu(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(zs.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function ou(e,t,n,r){if(!r||void 0!==n){if(Ts(n))throw new Error(Wa(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nu(n))throw new Error(Wa(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function au(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Wa(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function su(e,t,n,r){if(!(r&&void 0===n||eu(n)))throw new Error(Wa(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function uu(e,t,n,r){if(!(r&&void 0===n||tu(n)))throw new Error(Wa(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function cu(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")}function lu(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!eu(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return tu(e=e&&e.replace(/^\/*\.info(\/|$)/,"/"))}(r))throw new Error(Wa(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var hu=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");0<=c&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=ra(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):_s("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));0<=(c=t.indexOf(":"))?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=e.length;var p=t.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},fu=/[\[\].#$\/\u0000-\u001F\u007F]/,pu=/[\[\].#$\u0000-\u001F\u007F]/,du=10485760,mu=function e(t,n,r){var i=r instanceof zs?new Hs(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(Ts(n))throw new Error(t+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>du/3&&Ha(n)>du)throw new Error(t+"contains a string greater than "+du+" utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(Us(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!eu(n)))throw new Error(t+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),e(t,r,i),i.pop()})),o&&a)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},yu=(vu.prototype.cancel=function(e){Ba("OnDisconnect.cancel",0,1,arguments.length),za("OnDisconnect.cancel",1,e,!0);var t=new ma;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},vu.prototype.remove=function(e){Ba("OnDisconnect.remove",0,1,arguments.length),cu("OnDisconnect.remove",this.path_),za("OnDisconnect.remove",1,e,!0);var t=new ma;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},vu.prototype.set=function(e,t){Ba("OnDisconnect.set",1,2,arguments.length),cu("OnDisconnect.set",this.path_),ru("OnDisconnect.set",1,e,this.path_,!1),za("OnDisconnect.set",2,t,!0);var n=new ma;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},vu.prototype.setWithPriority=function(e,t,n){Ba("OnDisconnect.setWithPriority",2,3,arguments.length),cu("OnDisconnect.setWithPriority",this.path_),ru("OnDisconnect.setWithPriority",1,e,this.path_,!1),ou("OnDisconnect.setWithPriority",2,t,!1),za("OnDisconnect.setWithPriority",3,n,!0);var r=new ma;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},vu.prototype.update=function(e,t){if(Ba("OnDisconnect.update",1,2,arguments.length),cu("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,_s("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}iu("OnDisconnect.update",1,e,this.path_,!1),za("OnDisconnect.update",2,t,!0);var i=new ma;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},vu);function vu(e,t){this.repo_=e,this.path_=t}var gu=(bu.prototype.toJSON=function(){return Ba("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},bu);function bu(e,t){this.committed=e,this.snapshot=t}var wu,_u,Tu,Eu=(wu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_u=0,Tu=[],function(e){var t,n=e===_u;_u=e;var r=new Array(8);for(t=7;0<=t;t--)r[t]=wu.charAt(e%64),e=Math.floor(e/64);la(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;0<=t&&63===Tu[t];t--)Tu[t]=0;Tu[t]++}else for(t=0;t<12;t++)Tu[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=wu.charAt(Tu[t]);return la(20===i.length,"nextPushId: Length should be 20."),i}),Su=(Cu.Wrap=function(e,t){return new Cu(e,t)},Cu);function Cu(e,t){this.name=e,this.node=t}var Iu,ku=(Nu.prototype.getCompare=function(){return this.compare.bind(this)},Nu.prototype.indexedValueChanged=function(e,t){var n=new Su(Ps,e),r=new Su(Ps,t);return 0!==this.compare(n,r)},Nu.prototype.minPost=function(){return Su.MIN},Nu);function Nu(){}var Au,Du=(Zo(Ru,Au=ku),Object.defineProperty(Ru,"__EMPTY_NODE",{get:function(){return Iu},set:function(e){Iu=e},enumerable:!0,configurable:!0}),Ru.prototype.compare=function(e,t){return Ls(e.name,t.name)},Ru.prototype.isDefinedOn=function(e){throw ha("KeyIndex.isDefinedOn not expected to be called.")},Ru.prototype.indexedValueChanged=function(e,t){return!1},Ru.prototype.minPost=function(){return Su.MIN},Ru.prototype.maxPost=function(){return new Su(Ms,Iu)},Ru.prototype.makePost=function(e,t){return la("string"==typeof e,"KeyIndex indexValue must always be a string."),new Su(e,Iu)},Ru.prototype.toString=function(){return".key"},Ru);function Ru(){return null!==Au&&Au.apply(this,arguments)||this}var Ou,xu=new Du;function Pu(e){return"number"==typeof e?"number:"+js(e):"string:"+e}function Mu(e){if(e.isLeafNode()){var t=e.val();la("string"==typeof t||"number"==typeof t||"object"==typeof t&&Da(t,".sv"),"Priority must be a string or number.")}else la(e===Ou||e.isEmpty(),"priority of unexpected type.");la(e===Ou||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Lu,Fu,Uu,ju,Vu=(Object.defineProperty(qu,"__childrenNodeConstructor",{get:function(){return Lu},set:function(e){Lu=e},enumerable:!0,configurable:!0}),qu.prototype.isLeafNode=function(){return!0},qu.prototype.getPriority=function(){return this.priorityNode_},qu.prototype.updatePriority=function(e){return new qu(this.value_,e)},qu.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:qu.__childrenNodeConstructor.EMPTY_NODE},qu.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:qu.__childrenNodeConstructor.EMPTY_NODE},qu.prototype.hasChild=function(){return!1},qu.prototype.getPredecessorChildName=function(e,t){return null},qu.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:qu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},qu.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(la(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,qu.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),t)))},qu.prototype.isEmpty=function(){return!1},qu.prototype.numChildren=function(){return 0},qu.prototype.forEachChild=function(e,t){return!1},qu.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},qu.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Pu(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"==t?js(this.value_):this.value_,this.lazyHash_=ms(e)}return this.lazyHash_},qu.prototype.getValue=function(){return this.value_},qu.prototype.compareTo=function(e){return e===qu.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qu.__childrenNodeConstructor?-1:(la(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},qu.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=qu.VALUE_TYPE_ORDER.indexOf(t),i=qu.VALUE_TYPE_ORDER.indexOf(n);return la(0<=r,"Unknown leaf type: "+t),la(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},qu.prototype.withIndex=function(){return this},qu.prototype.isIndexed=function(){return!0},qu.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},qu.VALUE_TYPE_ORDER=["object","boolean","number","string"],qu);function qu(e,t){void 0===t&&(t=qu.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,la(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Mu(this.priorityNode_)}function Bu(){return null!==ju&&ju.apply(this,arguments)||this}var Wu=new(Zo(Bu,ju=ku),Bu.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ls(e.name,t.name):i},Bu.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},Bu.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},Bu.prototype.minPost=function(){return Su.MIN},Bu.prototype.maxPost=function(){return new Su(Ms,new Vu("[PRIORITY-POST]",Uu))},Bu.prototype.makePost=function(e,t){var n=Fu(e);return new Su(t,new Vu("[PRIORITY-POST]",n))},Bu.prototype.toString=function(){return".priority"},Bu),zu=(Ku.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Ku.prototype.hasNext=function(){return 0<this.nodeStack_.length},Ku.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},Ku);function Ku(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}var Hu=(Qu.prototype.copy=function(e,t,n,r,i){return new Qu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Qu.prototype.count=function(){return this.left.count()+1+this.right.count()},Qu.prototype.isEmpty=function(){return!1},Qu.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Qu.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Qu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Qu.prototype.minKey=function(){return this.min_().key},Qu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Qu.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},Qu.prototype.removeMin_=function(){if(this.left.isEmpty())return Xu.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},Qu.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Xu.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},Qu.prototype.isRed_=function(){return this.color},Qu.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},Qu.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},Qu.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},Qu.prototype.rotateLeft_=function(){var e=this.copy(null,null,Qu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Qu.prototype.rotateRight_=function(){var e=this.copy(null,null,Qu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Qu.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Qu.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},Qu.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},Qu.RED=!0,Qu.BLACK=!1,Qu);function Qu(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Qu.RED,this.left=null!=r?r:Xu.EMPTY_NODE,this.right=null!=i?i:Xu.EMPTY_NODE}var Gu=(Yu.prototype.copy=function(e,t,n,r,i){return this},Yu.prototype.insert=function(e,t,n){return new Hu(e,t,null)},Yu.prototype.remove=function(e,t){return this},Yu.prototype.count=function(){return 0},Yu.prototype.isEmpty=function(){return!0},Yu.prototype.inorderTraversal=function(e){return!1},Yu.prototype.reverseTraversal=function(e){return!1},Yu.prototype.minKey=function(){return null},Yu.prototype.maxKey=function(){return null},Yu.prototype.check_=function(){return 0},Yu.prototype.isRed_=function(){return!1},Yu);function Yu(){}var Xu=($u.prototype.insert=function(e,t){return new $u(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Hu.BLACK,null,null))},$u.prototype.remove=function(e){return new $u(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hu.BLACK,null,null))},$u.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},$u.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},$u.prototype.isEmpty=function(){return this.root_.isEmpty()},$u.prototype.count=function(){return this.root_.count()},$u.prototype.minKey=function(){return this.root_.minKey()},$u.prototype.maxKey=function(){return this.root_.maxKey()},$u.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},$u.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},$u.prototype.getIterator=function(e){return new zu(this.root_,null,this.comparator_,!1,e)},$u.prototype.getIteratorFrom=function(e,t){return new zu(this.root_,e,this.comparator_,!1,t)},$u.prototype.getReverseIteratorFrom=function(e,t){return new zu(this.root_,e,this.comparator_,!0,t)},$u.prototype.getReverseIterator=function(e){return new zu(this.root_,null,this.comparator_,!0,e)},$u.EMPTY_NODE=new Gu,$u);function $u(e,t){void 0===t&&(t=$u.EMPTY_NODE),this.comparator_=e,this.root_=t}var Ju=Math.log(2),Zu=(ec.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},ec);function ec(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ju,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}var tc,nc,rc=function(e,t,n,r){e.sort(t);var i=function(t){for(var r=null,i=null,o=e.length,a=function(t,r){var i=o-t,a=o;o-=t;var u=function t(r,i){var o,a,s=i-r;if(0==s)return null;if(1==s)return o=e[r],a=n?n(o):o,new Hu(a,o.node,Hu.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new Hu(a,o.node,Hu.BLACK,c,l)}(1+i,a),c=e[i],l=n?n(c):c;s(new Hu(l,c.node,r,null,u))},s=function(e){r=r?r.left=e:i=e},u=0;u<t.count;++u){var c=t.nextBitIsOne(),l=Math.pow(2,t.count-(u+1));c?a(l,Hu.BLACK):(a(l,Hu.BLACK),a(l,Hu.RED))}return i}(new Zu(e.length));return new Xu(r||t,i)},ic={},oc=(Object.defineProperty(ac,"Default",{get:function(){return la(Wu,"ChildrenNode.ts has not been loaded"),tc=tc||new ac({".priority":ic},{".priority":Wu})},enumerable:!0,configurable:!0}),ac.prototype.get=function(e){var t=Ra(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xu?t:null},ac.prototype.hasIndex=function(e){return Da(this.indexSet_,e.toString())},ac.prototype.addIndex=function(e,t){la(e!==xu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=t.getIterator(Su.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?rc(r,e.getCompare()):ic;var s=e.toString(),u=ea({},this.indexSet_);u[s]=e;var c=ea({},this.indexes_);return c[s]=n,new ac(c,u)},ac.prototype.addToIndexes=function(e,t){var n=this;return new ac(xa(this.indexes_,(function(r,i){var o=Ra(n.indexSet_,i);if(la(o,"Missing index implementation for "+i),r===ic){if(o.isDefinedOn(e.node)){for(var a=[],s=t.getIterator(Su.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),rc(a,o.getCompare())}return ic}var c=t.get(e.name),l=r;return c&&(l=l.remove(new Su(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},ac.prototype.removeFromIndexes=function(e,t){return new ac(xa(this.indexes_,(function(n){if(n===ic)return n;var r=t.get(e.name);return r?n.remove(new Su(e.name,r)):n})),this.indexSet_)},ac);function ac(e,t){this.indexes_=e,this.indexSet_=t}function sc(e,t){return Ls(e.name,t.name)}function uc(e,t){return Ls(e,t)}var cc,lc=(Object.defineProperty(hc,"EMPTY_NODE",{get:function(){return nc=nc||new hc(new Xu(uc),null,oc.Default)},enumerable:!0,configurable:!0}),hc.prototype.isLeafNode=function(){return!1},hc.prototype.getPriority=function(){return this.priorityNode_||nc},hc.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new hc(this.children_,e,this.indexMap_)},hc.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?nc:t},hc.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},hc.prototype.hasChild=function(e){return null!==this.children_.get(e)},hc.prototype.updateImmediateChild=function(e,t){if(la(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n,r,i=new Su(e,t),o=void 0;return r=t.isEmpty()?(o=this.children_.remove(e),this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,t),this.indexMap_.addToIndexes(i,this.children_)),n=o.isEmpty()?nc:this.priorityNode_,new hc(o,n,r)},hc.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;la(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},hc.prototype.isEmpty=function(){return this.children_.isEmpty()},hc.prototype.numChildren=function(){return this.children_.count()},hc.prototype.val=function(e){if(this.isEmpty())return null;var t={},n=0,r=0,i=!0;if(this.forEachChild(Wu,(function(o,a){t[o]=a.val(e),n++,i&&hc.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){var o=[];for(var a in t)o[a]=t[a];return o}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},hc.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Pu(this.getPriority().val())+":"),this.forEachChild(Wu,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ms(e)}return this.lazyHash_},hc.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Su(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},hc.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},hc.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Su(t,this.children_.get(t)):null},hc.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},hc.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Su(t,this.children_.get(t)):null},hc.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},hc.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},hc.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Su.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},hc.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},hc.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Su.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},hc.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pc?-1:0},hc.prototype.withIndex=function(e){if(e===xu||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new hc(this.children_,this.priorityNode_,t)},hc.prototype.isIndexed=function(e){return e===xu||this.indexMap_.hasIndex(e)},hc.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(Wu),r=t.getIterator(Wu),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},hc.prototype.resolveIndex_=function(e){return e===xu?null:this.indexMap_.get(e.toString())},hc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,hc);function hc(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Mu(this.priorityNode_),this.children_.isEmpty()&&la(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function fc(){return cc.call(this,new Xu(uc),lc.EMPTY_NODE,oc.Default)||this}var pc=new(Zo(fc,cc=lc),fc.prototype.compareTo=function(e){return e===this?0:1},fc.prototype.equals=function(e){return e===this},fc.prototype.getPriority=function(){return this},fc.prototype.getImmediateChild=function(e){return lc.EMPTY_NODE},fc.prototype.isEmpty=function(){return!1},fc);Object.defineProperties(Su,{MIN:{value:new Su(Ps,lc.EMPTY_NODE)},MAX:{value:new Su(Ms,pc)}}),Du.__EMPTY_NODE=lc.EMPTY_NODE,Vu.__childrenNodeConstructor=lc,Ou=pc,Uu=pc;var dc,mc=!0;function yc(e,t){if(void 0===t&&(t=null),null===e)return lc.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),la(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Vu(e,yc(t));if(e instanceof Array||!mc){var n=lc.EMPTY_NODE;return Us(e,(function(t,r){if(Da(e,t)&&"."!==t.substring(0,1)){var i=yc(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(yc(t))}var r=[],i=!1;if(Us(e,(function(e,t){if("."!==e.substring(0,1)){var n=yc(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Su(e,n)))}})),0==r.length)return lc.EMPTY_NODE;var o=rc(r,sc,(function(e){return e.name}),uc);if(i){var a=rc(r,Wu.getCompare());return new lc(o,yc(t),new oc({".priority":a},{".priority":Wu}))}return new lc(o,yc(t),oc.Default)}function vc(){return null!==dc&&dc.apply(this,arguments)||this}Fu=yc;var gc,bc=new(Zo(vc,dc=ku),vc.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Ls(e.name,t.name):n},vc.prototype.isDefinedOn=function(e){return!0},vc.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},vc.prototype.minPost=function(){return Su.MIN},vc.prototype.maxPost=function(){return Su.MAX},vc.prototype.makePost=function(e,t){var n=yc(e);return new Su(t,n)},vc.prototype.toString=function(){return".value"},vc),wc=(Zo(_c,gc=ku),_c.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},_c.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},_c.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ls(e.name,t.name):i},_c.prototype.makePost=function(e,t){var n=yc(e),r=lc.EMPTY_NODE.updateChild(this.indexPath_,n);return new Su(t,r)},_c.prototype.maxPost=function(){var e=lc.EMPTY_NODE.updateChild(this.indexPath_,pc);return new Su(Ms,e)},_c.prototype.toString=function(){return this.indexPath_.slice().join("/")},_c);function _c(e){var t=gc.call(this)||this;return t.indexPath_=e,la(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),t}var Tc=(Ec.prototype.val=function(){return Ba("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Ec.prototype.exportVal=function(){return Ba("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Ec.prototype.toJSON=function(){return Ba("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Ec.prototype.exists=function(){return Ba("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Ec.prototype.child=function(e){Ba("DataSnapshot.child",0,1,arguments.length),uu("DataSnapshot.child",1,e=String(e),!1);var t=new zs(e),n=this.ref_.child(t);return new Ec(this.node_.getChild(t),n,Wu)},Ec.prototype.hasChild=function(e){Ba("DataSnapshot.hasChild",1,1,arguments.length),uu("DataSnapshot.hasChild",1,e,!1);var t=new zs(e);return!this.node_.getChild(t).isEmpty()},Ec.prototype.getPriority=function(){return Ba("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Ec.prototype.forEach=function(e){var t=this;return Ba("DataSnapshot.forEach",1,1,arguments.length),za("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(n,r){return e(new Ec(r,t.ref_.child(n),Wu))}))},Ec.prototype.hasChildren=function(){return Ba("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Ec.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Ec.prototype.numChildren=function(){return Ba("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Ec.prototype.getRef=function(){return Ba("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Ec.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Ec);function Ec(e,t,n){this.node_=e,this.ref_=t,this.index_=n}var Sc=(Cc.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},Cc.prototype.getEventType=function(){return this.eventType},Cc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Cc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Na(this.snapshot.exportVal())},Cc);function Cc(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}var Ic=(kc.prototype.getPath=function(){return this.path},kc.prototype.getEventType=function(){return"cancel"},kc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},kc.prototype.toString=function(){return this.path.toString()+":cancel"},kc);function kc(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}var Nc=(Ac.prototype.respondsTo=function(e){return"value"===e},Ac.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Sc("value",this,new Tc(e.snapshotNode,t.getRef(),n))},Ac.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){la(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},Ac.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ic(this,e,t):null},Ac.prototype.matches=function(e){return e instanceof Ac&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},Ac.prototype.hasAnyCallback=function(){return null!==this.callback_},Ac);function Ac(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}var Dc,Rc=(Oc.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Da(this.callbacks_,t)},Oc.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ic(this,e,t):null},Oc.prototype.createEvent=function(e,t){la(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Sc(e.type,this,new Tc(e.snapshotNode,n,r),e.prevName)},Oc.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){la(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},Oc.prototype.matches=function(e){var t=this;if(e instanceof Oc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every((function(n){return e.callbacks_[n]===t.callbacks_[n]}));var o=n[0],a=r[0];return!(a!==o||e.callbacks_[o]&&this.callbacks_[a]&&e.callbacks_[o]!==this.callbacks_[a])}}}return!1},Oc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Oc);function Oc(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}var xc=(Object.defineProperty(Pc,"__referenceConstructor",{get:function(){return la(Dc,"Reference.ts has not been loaded"),Dc},set:function(e){Dc=e},enumerable:!0,configurable:!0}),Pc.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===xu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=Ps)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=Ms)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Wu){if(null!=t&&!nu(t)||null!=n&&!nu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(la(e.getIndex()instanceof wc||e.getIndex()===bc,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Pc.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Pc.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},Pc.prototype.getQueryParams=function(){return this.queryParams_},Pc.prototype.getRef=function(){return Ba("Query.ref",0,0,arguments.length),new Pc.__referenceConstructor(this.repo,this.path)},Pc.prototype.on=function(e,t,n,r){Ba("Query.on",2,4,arguments.length),au("Query.on",1,e,!1),za("Query.on",2,t,!1);var i=Pc.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,i.cancel,i.context);else{var o={};o[e]=t,this.onChildEvent(o,i.cancel,i.context)}return t},Pc.prototype.onValueEvent=function(e,t,n){var r=new Nc(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Pc.prototype.onChildEvent=function(e,t,n){var r=new Rc(e,t,n);this.repo.addEventCallbackForQuery(this,r)},Pc.prototype.off=function(e,t,n){Ba("Query.off",0,3,arguments.length),au("Query.off",1,e,!0),za("Query.off",2,t,!0),Ka("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new Nc(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new Rc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Pc.prototype.once=function(e,t,n,r){var i=this;Ba("Query.once",1,4,arguments.length),au("Query.once",1,e,!1),za("Query.once",2,t,!0);var o=Pc.getCancelAndContextArgs_("Query.once",n,r),a=!0,s=new ma;s.promise.catch((function(){}));var u=function n(r){a&&(a=!1,i.off(e,n),t&&t.bind(o.context)(r),s.resolve(r))};return this.on(e,u,(function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),s.reject(t)})),s.promise},Pc.prototype.limitToFirst=function(e){if(Ba("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Pc(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},Pc.prototype.limitToLast=function(e){if(Ba("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Pc(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},Pc.prototype.orderByChild=function(e){if(Ba("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');uu("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new zs(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new wc(t),r=this.queryParams_.orderBy(n);return Pc.validateQueryEndpoints_(r),new Pc(this.repo,this.path,r,!0)},Pc.prototype.orderByKey=function(){Ba("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(xu);return Pc.validateQueryEndpoints_(e),new Pc(this.repo,this.path,e,!0)},Pc.prototype.orderByPriority=function(){Ba("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Wu);return Pc.validateQueryEndpoints_(e),new Pc(this.repo,this.path,e,!0)},Pc.prototype.orderByValue=function(){Ba("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(bc);return Pc.validateQueryEndpoints_(e),new Pc(this.repo,this.path,e,!0)},Pc.prototype.startAt=function(e,t){void 0===e&&(e=null),Ba("Query.startAt",0,2,arguments.length),ru("Query.startAt",1,e,this.path,!0),su("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(Pc.validateLimit_(n),Pc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(t=e=null),new Pc(this.repo,this.path,n,this.orderByCalled_)},Pc.prototype.endAt=function(e,t){void 0===e&&(e=null),Ba("Query.endAt",0,2,arguments.length),ru("Query.endAt",1,e,this.path,!0),su("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(Pc.validateLimit_(n),Pc.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Pc(this.repo,this.path,n,this.orderByCalled_)},Pc.prototype.equalTo=function(e,t){if(Ba("Query.equalTo",1,2,arguments.length),ru("Query.equalTo",1,e,this.path,!1),su("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},Pc.prototype.toString=function(){return Ba("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Pc.prototype.toJSON=function(){return Ba("Query.toJSON",0,1,arguments.length),this.toString()},Pc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Pc.prototype.queryIdentifier=function(){var e=this.queryObject(),t=Fs(e);return"{}"===t?"default":t},Pc.prototype.isEqual=function(e){if(Ba("Query.isEqual",1,1,arguments.length),!(e instanceof Pc))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.repo===e.repo,n=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return t&&n&&r},Pc.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,za(e,3,r.cancel,!0),r.context=n,Ka(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(Wa(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(Pc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Pc);function Pc(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}var Mc=(Lc.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&0<this.children.size){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},Lc.prototype.remember=function(e,t){if(e.isEmpty())this.value=t,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,t);else{var n=e.getFront();this.children.has(n)||this.children.set(n,new Lc);var r=this.children.get(n);e=e.popFront(),r.remember(e,t)}},Lc.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Wu,(function(e,t){n.remember(new zs(e),t)})),this.forget(e)}if(0<this.children.size){var r=e.getFront();return e=e.popFront(),!this.children.has(r)||this.children.get(r).forget(e)&&this.children.delete(r),0===this.children.size}return!0},Lc.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,r){var i=new zs(e.toString()+"/"+n);r.forEachTree(i,t)}))},Lc.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},Lc);function Lc(){this.value=null,this.children=new Map}function Fc(e,t){return e&&"object"==typeof e?(la(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}var Uc,jc,Vc=function e(t,n){var r,i=Fc(t.getPriority().val(),n);if(t.isLeafNode()){var o=t,a=Fc(o.getValue(),n);return a!==o.getValue()||i!==o.getPriority().val()?new Vu(a,yc(i)):t}var s=t;return i!==(r=s).getPriority().val()&&(r=r.updatePriority(new Vu(i))),s.forEachChild(Wu,(function(t,i){var o=e(i,n);o!==i&&(r=r.updateImmediateChild(t,o))})),r};(jc=Uc=Uc||{})[jc.OVERWRITE=0]="OVERWRITE",jc[jc.MERGE=1]="MERGE",jc[jc.ACK_USER_WRITE=2]="ACK_USER_WRITE",jc[jc.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var qc=(Bc.User=new Bc(!0,!1,null,!1),Bc.Server=new Bc(!1,!0,null,!1),Bc.forServerTaggedQuery=function(e){return new Bc(!1,!0,e,!0)},Bc);function Bc(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,la(!r||t,"Tagged queries must be from server.")}var Wc,zc=(Kc.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return la(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new zs(e));return new Kc(zs.Empty,t,this.revert)}return la(this.path.getFront()===e,"operationForChild called for unrelated child."),new Kc(this.path.popFront(),this.affectedTree,this.revert)},Kc);function Kc(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Uc.ACK_USER_WRITE,this.source=qc.User}var Hc=(Qc.fromObject=function(e){var t=Qc.Empty;return Us(e,(function(e,n){t=t.set(new zs(e),n)})),t},Qc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Qc.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:zs.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null==i?null:{path:new zs(n).child(i.path),value:i.value}},Qc.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},Qc.prototype.subtree=function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):Qc.Empty},Qc.prototype.set=function(e,t){if(e.isEmpty())return new Qc(t,this.children);var n=e.getFront(),r=(this.children.get(n)||Qc.Empty).set(e.popFront(),t),i=this.children.insert(n,r);return new Qc(this.value,i)},Qc.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?Qc.Empty:new Qc(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r=n.remove(e.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?Qc.Empty:new Qc(this.value,i)}return this},Qc.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},Qc.prototype.setTree=function(e,t){if(e.isEmpty())return t;var n,r=e.getFront(),i=(this.children.get(r)||Qc.Empty).setTree(e.popFront(),t);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new Qc(this.value,n)},Qc.prototype.fold=function(e){return this.fold_(zs.Empty,e)},Qc.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},Qc.prototype.findOnPath=function(e,t){return this.findOnPath_(e,zs.Empty,t)},Qc.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},Qc.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,zs.Empty,t)},Qc.prototype.foreachOnPath_=function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(e.popFront(),t.child(r),n):Qc.Empty},Qc.prototype.foreach=function(e){this.foreach_(zs.Empty,e)},Qc.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},Qc.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},Qc.Empty=new Qc(null),Qc);function Qc(e,t){void 0===t&&(t=Wc=Wc||new Xu(Es)),this.value=e,this.children=t}var Gc=(Yc.prototype.operationForChild=function(e){return this.path.isEmpty()?new Yc(this.source,zs.Empty):new Yc(this.source,this.path.popFront())},Yc);function Yc(e,t){this.source=e,this.path=t,this.type=Uc.LISTEN_COMPLETE}var Xc=($c.prototype.operationForChild=function(e){return this.path.isEmpty()?new $c(this.source,zs.Empty,this.snap.getImmediateChild(e)):new $c(this.source,this.path.popFront(),this.snap)},$c);function $c(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Uc.OVERWRITE}var Jc=(Zc.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new zs(e));return t.isEmpty()?null:t.value?new Xc(this.source,zs.Empty,t.value):new Zc(this.source,zs.Empty,t)}return la(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new Zc(this.source,this.path.popFront(),this.children)},Zc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Zc);function Zc(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Uc.MERGE}var el=(tl.prototype.isFullyInitialized=function(){return this.fullyInitialized_},tl.prototype.isFiltered=function(){return this.filtered_},tl.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},tl.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},tl.prototype.getNode=function(){return this.node_},tl);function tl(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}var nl=(rl.prototype.updateEventSnap=function(e,t,n){return new rl(new el(e,t,n),this.serverCache_)},rl.prototype.updateServerSnap=function(e,t,n){return new rl(this.eventCache_,new el(e,t,n))},rl.prototype.getEventCache=function(){return this.eventCache_},rl.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},rl.prototype.getServerCache=function(){return this.serverCache_},rl.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},rl.Empty=new rl(new el(lc.EMPTY_NODE,!1,!1),new el(lc.EMPTY_NODE,!1,!1)),rl);function rl(e,t){this.eventCache_=e,this.serverCache_=t}var il=(ol.valueChange=function(e){return new ol(ol.VALUE,e)},ol.childAddedChange=function(e,t){return new ol(ol.CHILD_ADDED,t,e)},ol.childRemovedChange=function(e,t){return new ol(ol.CHILD_REMOVED,t,e)},ol.childChangedChange=function(e,t,n){return new ol(ol.CHILD_CHANGED,t,e,n)},ol.childMovedChange=function(e,t){return new ol(ol.CHILD_MOVED,t,e)},ol.CHILD_ADDED="child_added",ol.CHILD_REMOVED="child_removed",ol.CHILD_CHANGED="child_changed",ol.CHILD_MOVED="child_moved",ol.VALUE="value",ol);function ol(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}var al=(sl.prototype.updateChild=function(e,t,n,r,i,o){la(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(il.childRemovedChange(t,a)):la(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(il.childAddedChange(t,n)):o.trackChildChange(il.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},sl.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Wu,(function(e,r){t.hasChild(e)||n.trackChildChange(il.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(Wu,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(il.childChangedChange(t,r,i))}else n.trackChildChange(il.childAddedChange(t,r))}))),t.withIndex(this.index_)},sl.prototype.updatePriority=function(e,t){return e.isEmpty()?lc.EMPTY_NODE:e.updatePriority(t)},sl.prototype.filtersNodes=function(){return!1},sl.prototype.getIndexedFilter=function(){return this},sl.prototype.getIndex=function(){return this.index_},sl);function sl(e){this.index_=e}var ul=(cl.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;la(t==il.CHILD_ADDED||t==il.CHILD_CHANGED||t==il.CHILD_REMOVED,"Only child changes supported for tracking"),la(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==il.CHILD_ADDED&&i==il.CHILD_REMOVED)this.changeMap.set(n,il.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==il.CHILD_REMOVED&&i==il.CHILD_ADDED)this.changeMap.delete(n);else if(t==il.CHILD_REMOVED&&i==il.CHILD_CHANGED)this.changeMap.set(n,il.childRemovedChange(n,r.oldSnap));else if(t==il.CHILD_CHANGED&&i==il.CHILD_ADDED)this.changeMap.set(n,il.childAddedChange(n,e.snapshotNode));else{if(t!=il.CHILD_CHANGED||i!=il.CHILD_CHANGED)throw ha("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,il.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},cl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},cl);function cl(){this.changeMap=new Map}function ll(){}var hl=new(ll.prototype.getCompleteChild=function(e){return null},ll.prototype.getChildAfterChild=function(e,t,n){return null},ll),fl=(pl.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new el(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},pl.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},pl);function pl(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}var dl=function(e,t){this.viewCache=e,this.changes=t},ml=(yl.prototype.assertIndexed=function(e){la(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),la(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},yl.prototype.applyOperation=function(e,t,n,r){var i,o,a=new ul;if(t.type===Uc.OVERWRITE){var s=t;i=s.source.fromUser?this.applyUserOverwrite_(e,s.path,s.snap,n,r,a):(la(s.source.fromServer,"Unknown source."),o=s.source.tagged||e.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(e,s.path,s.snap,n,r,o,a))}else if(t.type===Uc.MERGE){var u=t;i=u.source.fromUser?this.applyUserMerge_(e,u.path,u.children,n,r,a):(la(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.getServerCache().isFiltered(),this.applyServerMerge_(e,u.path,u.children,n,r,o,a))}else if(t.type===Uc.ACK_USER_WRITE){var c=t;i=c.revert?this.revertUserWrite_(e,c.path,n,r,a):this.ackUserWrite_(e,c.path,c.affectedTree,n,r,a)}else{if(t.type!==Uc.LISTEN_COMPLETE)throw ha("Unknown operation type: "+t.type);i=this.listenComplete_(e,t.path,n,a)}var l=a.getChanges();return yl.maybeAddValueEvent_(e,i,l),new dl(i,l)},yl.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(il.valueChange(t.getCompleteEventSnap()))}},yl.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(la(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof lc?u:lc.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=t.getFront();if(".priority"==f){la(1==t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var m=t.popFront(),y=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);y=null!=v?o.getNode().getImmediateChild(f).updateChild(m,v):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,e.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,m,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},yl.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,hl,null)}var d=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),m=new fl(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,m,a)},yl.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),c=new fl(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):lc.EMPTY_NODE}if(f.equals(p))a=e;else{var m=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},yl.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},yl.prototype.applyUserMerge_=function(e,t,n,r,i,o){var a=this,s=e;return n.foreach((function(n,u){var c=t.child(n);yl.cacheHasChild_(e,c.getFront())&&(s=a.applyUserOverwrite_(s,c,u,r,i,o))})),n.foreach((function(n,u){var c=t.child(n);yl.cacheHasChild_(e,c.getFront())||(s=a.applyUserOverwrite_(s,c,u,r,i,o))})),s},yl.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},yl.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:Hc.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new zs(t),h,r,i,o,a)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new zs(t),f,r,i,o,a)}})),c},yl.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var u=Hc.Empty;return s.getNode().forEachChild(xu,(function(e,t){u=u.set(new zs(e),t)})),this.applyServerMerge_(e,t,u,r,i,a,o)}return e}var c=Hc.Empty;return n.foreach((function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))})),this.applyServerMerge_(e,t,c,r,i,a,o)},yl.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,hl,r)},yl.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new fl(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();la(l instanceof lc,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,lc.EMPTY_NODE,t.popFront(),a,i):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(zs.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},yl);function yl(e){this.filter_=e}var vl=(gl.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach((function(e){e.type===il.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(il.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(i,il.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,il.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,il.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,il.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,il.VALUE,e,n,t),i},gl.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter((function(e){return e.type===t}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},gl.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},gl.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw ha("Should only compare child_ events.");var n=new Su(e.childName,e.snapshotNode),r=new Su(t.childName,t.snapshotNode);return this.index_.compare(n,r)},gl);function gl(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}var bl,wl=(_l.prototype.getQuery=function(){return this.query_},_l.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},_l.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},_l.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},_l.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},_l.prototype.removeEventRegistration=function(e,t){var n=[];if(t){la(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},_l.prototype.applyOperation=function(e,t,n){e.type===Uc.MERGE&&null!==e.source.queryId&&(la(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),la(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),la(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},_l.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wu,(function(e,t){n.push(il.childAddedChange(e,t))})),t.isFullyInitialized()&&n.push(il.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},_l.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},_l);function _l(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new al(n.getIndex()),i=n.getNodeFilter();this.processor_=new ml(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(lc.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(lc.EMPTY_NODE,a.getNode(),null),c=new el(s,o.isFullyInitialized(),r.filtersNodes()),l=new el(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new nl(l,c),this.eventGenerator_=new vl(this.query_)}var Tl=(Object.defineProperty(El,"__referenceConstructor",{get:function(){return la(bl,"Reference.ts has not been loaded"),bl},set:function(e){la(!bl,"__referenceConstructor has already been defined"),bl=e},enumerable:!0,configurable:!0}),El.prototype.isEmpty=function(){return 0===this.views.size},El.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var a=this.views.get(o);return la(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,n)}var s=[];try{for(var u=ra(this.views.values()),c=u.next();!c.done;c=u.next())a=c.value,s=s.concat(a.applyOperation(e,t,n))}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},El.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s,u=n.calcCompleteEventCache(i?r:null);s=!!u||(u=r instanceof lc?n.calcCompleteEventChildren(r):lc.EMPTY_NODE,!1);var c=new nl(new el(u,s,!1),new el(r,i,!1));a=new wl(e,c),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},El.prototype.removeEventRegistration=function(e,t,n){var r,i,o=e.queryIdentifier(),a=[],s=[],u=this.hasCompleteView();if("default"===o)try{for(var c=ra(this.views.entries()),l=c.next();!l.done;l=c.next()){var h=ia(l.value,2),f=h[0],p=h[1];s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery()))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery())));return u&&!this.hasCompleteView()&&a.push(new El.__referenceConstructor(e.repo,e.path)),{removed:a,events:s}},El.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=ra(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},El.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=ra(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},El.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},El.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},El.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},El.prototype.getCompleteView=function(){var e,t;try{for(var n=ra(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},El);function El(){this.views=new Map}var Sl=(Cl.prototype.addWrite=function(e,t){if(e.isEmpty())return new Cl(new Hc(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,i=n.value,o=zs.relativePath(r,e);return i=i.updateChild(o,t),new Cl(this.writeTree_.set(r,i))}var a=new Hc(t);return new Cl(this.writeTree_.setTree(e,a))},Cl.prototype.addWrites=function(e,t){var n=this;return Us(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},Cl.prototype.removeWrite=function(e){return e.isEmpty()?Cl.Empty:new Cl(this.writeTree_.setTree(e,Hc.Empty))},Cl.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},Cl.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(zs.relativePath(t.path,e)):null},Cl.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wu,(function(t,n){e.push(new Su(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Su(t,n.value))})),e},Cl.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return new Cl(null!=t?new Hc(t):this.writeTree_.subtree(e))},Cl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},Cl.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(la(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r}(zs.Empty,this.writeTree_,e)},Cl.Empty=new Cl(new Hc(null)),Cl);function Cl(e){this.writeTree_=e}var Il=(kl.prototype.childWrites=function(e){return new Nl(e,this)},kl.prototype.addOverwrite=function(e,t,n,r){la(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},kl.prototype.addMerge=function(e,t,n){la(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},kl.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},kl.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));la(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(n<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Us(r.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))})),!0)},kl.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},kl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(zs.Empty)){var o=kl.layerTree_(this.allWrites_,(function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);return u=t||lc.EMPTY_NODE,o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);if(s.isEmpty())return t;if(null!=t||s.hasCompleteWrite(zs.Empty)){var u=t||lc.EMPTY_NODE;return s.apply(u)}return null},kl.prototype.calcCompleteEventChildren=function(e,t){var n=lc.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Wu,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Wu,(function(e,t){var r=i.childCompoundWrite(new zs(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},kl.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){la(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},kl.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},kl.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},kl.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(zs.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},kl.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},kl.prototype.resetTree_=function(){this.visibleWrites_=kl.layerTree_(this.allWrites_,kl.DefaultFilter_,zs.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},kl.DefaultFilter_=function(e){return e.visible},kl.layerTree_=function(e,t,n){for(var r=Sl.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=zs.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=zs.relativePath(a,n),r=r.addWrite(zs.Empty,o.snap.getChild(s)));else{if(!o.children)throw ha("WriteRecord should have .snap or .children");if(n.contains(a))s=zs.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=zs.relativePath(a,n)).isEmpty())r=r.addWrites(zs.Empty,o.children);else{var u=Ra(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(zs.Empty,c)}}}}}return r},kl);function kl(){this.visibleWrites_=Sl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Nl=(Al.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},Al.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},Al.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},Al.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},Al.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},Al.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},Al.prototype.child=function(e){return new Al(this.treePath_.child(e),this.writeTree_)},Al);function Al(e,t){this.treePath_=e,this.writeTree_=t}var Dl=(Rl.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Xc(qc.User,e,t)):[]},Rl.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=Hc.fromObject(t);return this.applyOperationToSyncPoints_(new Jc(qc.User,e,r))},Rl.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=Hc.Empty;return null!=n.snap?r=r.set(zs.Empty,!0):Us(n.children,(function(e,t){r=r.set(new zs(e),t)})),this.applyOperationToSyncPoints_(new zc(n.path,r,t))}return[]},Rl.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Xc(qc.Server,e,t))},Rl.prototype.applyServerMerge=function(e,t){var n=Hc.fromObject(t);return this.applyOperationToSyncPoints_(new Jc(qc.Server,e,n))},Rl.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Gc(qc.Server,e))},Rl.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Rl.parseQueryKey_(r),o=i.path,a=i.queryId,s=zs.relativePath(o,e),u=new Xc(qc.forServerTaggedQuery(a),s,t);return this.applyTaggedOperation_(o,u)},Rl.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var i=Rl.parseQueryKey_(r),o=i.path,a=i.queryId,s=zs.relativePath(o,e),u=Hc.fromObject(t),c=new Jc(qc.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},Rl.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=Rl.parseQueryKey_(n),i=r.path,o=r.queryId,a=zs.relativePath(i,e),s=new Gc(qc.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},Rl.prototype.addEventRegistration=function(e,t){var n=e.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,(function(e,t){var o=zs.relativePath(e,n);r=r||t.getCompleteServerCache(o),i=i||t.hasCompleteView()}));var o,a=this.syncPointTree_.get(n);a?(i=i||a.hasCompleteView(),r=r||a.getCompleteServerCache(zs.Empty)):(a=new Tl,this.syncPointTree_=this.syncPointTree_.set(n,a)),null!=r?o=!0:(o=!1,r=lc.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=t.getCompleteServerCache(zs.Empty);n&&(r=r.updateImmediateChild(e,n))})));var s=a.viewExistsForQuery(e);if(!s&&!e.getQueryParams().loadsAllData()){var u=Rl.makeQueryKey_(e);la(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Rl.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var l=this.pendingWriteTree_.childWrites(n),h=a.addEventRegistration(e,t,l,r,o);if(!s&&!i){var f=a.viewForQuery(e);h=h.concat(this.setupListener_(e,f))}return h},Rl.prototype.removeEventRegistration=function(e,t,n){var r=this,i=e.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var s=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(i,(function(e,t){return t.hasCompleteView()}));if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),p=0;p<f.length;++p){var d=f[p],m=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Rl.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Rl.queryForListening_(e),null):u.forEach((function(e){var t=r.queryToTagMap.get(Rl.makeQueryKey_(e));r.listenProvider_.stopListening(Rl.queryForListening_(e),t)}))),this.removeTags_(u)}return a},Rl.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=zs.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},Rl.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),Us(n,(function(e,t){r=r.concat(t)})),r}))},Rl.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=Rl.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Rl.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},Rl.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),i=this.createListenerForView_(t),o=this.listenProvider_.startListening(Rl.queryForListening_(e),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)la(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),Us(n,(function(e,t){r=r.concat(t)})),r})),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(Rl.queryForListening_(c),this.tagForQuery_(c))}return o},Rl.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||lc.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},Rl.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},Rl.parseQueryKey_=function(e){var t=e.indexOf("$");return la(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new zs(e.substr(0,t))}},Rl.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},Rl.prototype.tagForQuery_=function(e){var t=Rl.makeQueryKey_(e);return this.queryToTagMap.get(t)},Rl.getNextQueryTag_=function(){return Rl.nextQueryTag_++},Rl.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);la(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},Rl.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(zs.Empty))},Rl.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(zs.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(zs.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},Rl.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(zs.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(zs.Empty));var a=[];return t.children.inorderTraversal((function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(e,r,n))),a},Rl.nextQueryTag_=1,Rl);function Rl(e){this.listenProvider_=e,this.syncPointTree_=Hc.Empty,this.pendingWriteTree_=new Il,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Ol=(xl.prototype.getNode=function(e){return this.rootNode_.getChild(e)},xl.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},xl);function xl(){this.rootNode_=lc.EMPTY_NODE}var Pl=(Ml.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,(function(e){return e&&"auth/token-not-initialized"===e.code?(vs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}))},Ml.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},Ml.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},Ml.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(e)},Ml);function Ml(e){this.app_=e}var Ll=(Fl.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Da(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},Fl.prototype.get=function(){return pa(this.counters_)},Fl);function Fl(){this.counters_={}}var Ul=(jl.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Ll),this.collections_[t]},jl.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},jl.collections_={},jl.reporters_={},jl);function jl(){}var Vl=(ql.prototype.get=function(){var e=this.collection_.get(),t=ea({},e);return this.last_&&Us(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},ql);function ql(e){this.collection_=e,this.last_=null}var Bl=(Wl.prototype.includeStat=function(e){this.statsToReport_[e]=!0},Wl.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Us(t,(function(t,i){0<i&&Da(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),qs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Wl);function Wl(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vl(e);var n=1e4+2e4*Math.random();qs(this.reportStats_.bind(this),Math.floor(n))}var zl=(Kl.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Hl(i)),t.add(r)}t&&this.eventLists_.push(t)},Kl.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},Kl.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},Kl.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},Kl);function Kl(){this.eventLists_=[],this.recursionDepth_=0}var Hl=(Ql.prototype.add=function(e){this.events_.push(e)},Ql.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();Os&&vs("event: "+t.toString()),Vs(n)}}},Ql.prototype.getPath=function(){return this.path_},Ql);function Ql(e){this.path_=e,this.events_=[]}var Gl=(Yl.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=oa(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},Yl.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},Yl.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},Yl.prototype.validateEventType_=function(e){la(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},Yl);function Yl(e){this.allowedEvents_=e,this.listeners_={},la(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}var Xl,$l=(Zo(Jl,Xl=Gl),Jl.getInstance=function(){return new Jl},Jl.prototype.getInitialEvent=function(e){return la("visible"===e,"Unknown event type: "+e),[this.visible_]},Jl);function Jl(){var e,t,n=Xl.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,(function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))}),!1),n}var Zl,eh=(Zo(th,Zl=Gl),th.getInstance=function(){return new th},th.prototype.getInitialEvent=function(e){return la("online"===e,"Unknown event type: "+e),[this.online_]},th.prototype.currentlyOnline=function(){return this.online_},th);function th(){var e=Zl.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ga()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}var nh=(rh.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},rh.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Vs((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},rh);function rh(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ih=(oh.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ah((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ia(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ia(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Gs)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},oh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},oh.forceAllow=function(){oh.forceAllow_=!0},oh.forceDisallow=function(){oh.forceDisallow_=!0},oh.isAvailable=function(){return!!oh.forceAllow_||!(oh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},oh.prototype.markConnectionHealthy=function(){},oh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},oh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},oh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},oh.prototype.send=function(e){var t=Na(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Cs(function(e){var t=sa(e);return fa.encodeByteArray(t,!0)}(t),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},oh.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},oh.prototype.incrementIncomingBytes_=function(e){var t=Na(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},oh);function oh(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gs(e),this.stats_=Ul.getCollection(t),this.urlFn=function(e){return t.connectionURL(Xs,e)}}var ah=(sh.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||vs("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},sh.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},sh.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},sh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},sh.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},sh.prototype.addLongPollTag_=function(e,t){var n=this;function r(){n.outstandingRequests.delete(t),n.newRequest_()}this.outstandingRequests.add(t);var i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},sh.prototype.addTag=function(e,t){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){vs("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},sh);function sh(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ds(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=sh.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(e){vs("frame writing exception"),e.stack&&vs(e.stack),vs(e)}}var uh="",ch=null;"undefined"!=typeof MozWebSocket?ch=MozWebSocket:"undefined"!=typeof WebSocket&&(ch=WebSocket);var lh=(hh.connectionURL_=function(e,t,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Gs)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL(Ys,r)},hh.prototype.open=function(e,t){var r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ks.set("previous_websocket_failure",!0);try{if(wa()){var i=ca.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+uh+"/"+n.platform+"/"+i}},a=Object({NODE_ENV:"production",PUBLIC_URL:""}),s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new ch(this.connURL,[],o)}else this.mySock=new ch(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var u=e.message||e.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},hh.prototype.start=function(){},hh.forceDisallow=function(){hh.forceDisallow_=!0},hh.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==ch&&!hh.forceDisallow_},hh.previouslyFailed=function(){return ks.isInMemoryStorage||!0===ks.get("previous_websocket_failure")},hh.prototype.markConnectionHealthy=function(){ks.remove("previous_websocket_failure")},hh.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ka(t);this.onMessage(n)}},hh.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},hh.prototype.extractFrameCount_=function(e){if(la(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},hh.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},hh.prototype.send=function(e){this.resetKeepAlive();var t=Na(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Cs(t,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},hh.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},hh.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},hh.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},hh.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},hh.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},hh.responsesRequiredToBeHealthy=2,hh.healthyTimeout=3e4,hh);function hh(e,t,n,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gs(this.connId),this.stats_=Ul.getCollection(t),this.connURL=hh.connectionURL_(t,n,r)}var fh=(Object.defineProperty(ph,"ALL_TRANSPORTS",{get:function(){return[ih,lh]},enumerable:!0,configurable:!0}),ph.prototype.initTransports_=function(e){var t,n,r=lh&&lh.isAvailable(),i=r&&!lh.previouslyFailed();if(e.webSocketOnly&&(r||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[lh];else{var o=this.transports_=[];try{for(var a=ra(ph.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}},ph.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},ph.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},ph);function ph(e){this.initTransports_(e)}var dh=(mh.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;0<i&&(this.healthyTimeout_=qs((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},mh.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},mh.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},mh.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},mh.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},mh.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},mh.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},mh.prototype.onSecondaryMessageReceived_=function(e){var t=Ss("t",e),n=Ss("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},mh.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},mh.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},mh.prototype.onPrimaryMessageReceived_=function(e){var t=Ss("t",e),n=Ss("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},mh.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},mh.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},mh.prototype.onControl_=function(e){var t=Ss("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?bs("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bs("Unknown control packet command: "+t)}},mh.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())},mh.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},mh.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qs((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},mh.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},mh.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qs((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},mh.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},mh.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},mh.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},mh.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},mh.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},mh.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},mh.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},mh);function mh(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gs("c:"+this.id+":"),this.transportManager_=new fh(t),this.log_("Connection created"),this.start_()}var yh=(vh.prototype.put=function(e,t,n,r){},vh.prototype.merge=function(e,t,n,r){},vh.prototype.refreshAuthToken=function(e){},vh.prototype.onDisconnectPut=function(e,t,n){},vh.prototype.onDisconnectMerge=function(e,t,n){},vh.prototype.onDisconnectCancel=function(e,t){},vh.prototype.reportStats=function(e){},vh);function vh(){}var gh,bh=(Zo(wh,gh=yh),wh.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Na(i)),la(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},wh.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),la(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),la(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},wh.prototype.sendListen_=function(e){var t=this,n=e.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};e.tag&&(o.q=n.queryObject(),o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;wh.warnOnListenWarnings_(a,n),(t.listens.get(r)&&t.listens.get(r).get(i))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(r,i),e.onComplete&&e.onComplete(s,a))}))},wh.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&Da(e,"w")){var n=Ra(e,"w");Array.isArray(n)&&~n.indexOf("no_index")&&_s('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+t.getQueryParams().getIndex().toString()+'" at '+t.path.toString()+" to your security rules for better performance.")}},wh.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},wh.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||function(e){var t=Aa(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},wh.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Aa(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},wh.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),la(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},wh.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},wh.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},wh.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},wh.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},wh.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},wh.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},wh.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},wh.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},wh.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},wh.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},wh.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Na(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},wh.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):bs("Unrecognized action received from server: "+Na(e)+"\nAre you using the latest client?")},wh.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},wh.prototype.scheduleConnect_=function(e){var t=this;la(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},wh.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},wh.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},wh.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},wh.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+wh.nextConnectionId_++,i=this,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,n())};this.realtime_={close:u,sendRequest:function(e){la(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(u){a?vs("getToken() completed but was canceled"):(vs("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,s=new dh(r,i.repoInfo_,e,t,n,(function(e){_s(e+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")}),o))})).then(null,(function(e){i.log_("Failed to get token: "+e),a||u()}))}},wh.prototype.interrupt=function(e){vs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},wh.prototype.resume=function(e){vs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Oa(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},wh.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},wh.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},wh.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return Fs(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},wh.prototype.removeListen_=function(e,t){var n,r=new zs(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},wh.prototype.onAuthRevoked_=function(e,t){vs("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},wh.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},wh.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=ra(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,ra(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},wh.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+uh.replace(/\./g,"-")]=1,ga()?e["framework.cordova"]=1:ba()&&(e["framework.reactnative"]=1),this.reportStats(e)},wh.prototype.shouldReconnect_=function(){var e=eh.getInstance().currentlyOnline();return Oa(this.interruptReasons_)&&e},wh.nextPersistentConnectionId_=0,wh.nextConnectionId_=0,wh);function wh(e,t,n,r,i,o){var a=gh.call(this)||this;if(a.repoInfo_=e,a.onDataUpdate_=t,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=wh.nextPersistentConnectionId_++,a.log_=gs("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!wa())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),$l.getInstance().on("visible",a.onVisible_,a),-1===e.host.indexOf("fblocal")&&eh.getInstance().on("online",a.onOnline_,a),a}var _h,Th=(Zo(Eh,_h=yh),Eh.prototype.reportStats=function(e){throw new Error("Method not implemented.")},Eh.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(la(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},Eh.prototype.listen=function(e,t,n,r){var i=this,o=e.path.toString();this.log_("Listen called for "+o+" "+e.queryIdentifier());var a=Eh.getListenId_(e,n),s={};this.listens_[a]=s;var u=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,(function(e,t){var u=t;404===e&&(e=u=null),null===e&&i.onDataUpdate_(o,u,!1,n),Ra(i.listens_,a)===s&&r(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)}))},Eh.prototype.unlisten=function(e,t){var n=Eh.getListenId_(e,t);delete this.listens_[n]},Eh.prototype.refreshAuthToken=function(e){},Eh.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(200<=s.status&&s.status<300){try{e=ka(s.responseText)}catch(e){_s("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&_s("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},Eh);function Eh(e,t,n){var r=_h.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=t,r.authTokenProvider_=n,r.log_=gs("p:rest:"),r.listens_={},r}var Sh="repo_interrupt",Ch=(Ih.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Ih.prototype.name=function(){return this.repoInfo_.namespace},Ih.prototype.serverTime=function(){var e=this.infoData_.getNode(new zs(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},Ih.prototype.generateServerValues=function(){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:this.serverTime()})},Ih.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new zs(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=xa(t,(function(e){return yc(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=yc(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=xa(t,(function(e){return yc(e)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=yc(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},Ih.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},Ih.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},Ih.prototype.onServerInfoUpdate_=function(e){var t=this;Us(e,(function(e,n){t.updateInfo_(e,n)}))},Ih.prototype.updateInfo_=function(e,t){var n=new zs("/.info/"+e),r=yc(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Ih.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Ih.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=yc(t,n),s=Vc(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),(function(t,n){var o="ok"===t;o||_s("set at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,a),i.callOnCompleteCallback(r,t,n)}));var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Ih.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),a={};if(Us(t,(function(e,t){i=!1;var n=yc(t);a[e]=Vc(n,o)})),i)vs("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||_s("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=0<a.length?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,t,i)})),Us(t,(function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},Ih.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=function(e,t){var n=new Mc;return e.forEachTree(new zs(""),(function(e,r){n.remember(e,Vc(r,t))})),n}(this.onDisconnect_,t),r=[];n.forEachTree(zs.Empty,(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new Mc,this.eventQueue_.raiseEventsForChangedPath(zs.Empty,r)},Ih.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},Ih.prototype.onDisconnectSet=function(e,t,n){var r=this,i=yc(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},Ih.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=yc(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},Ih.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(Oa(t))return vs("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&Us(t,(function(t,n){var i=yc(n);r.onDisconnect_.remember(e.child(t),i)})),r.callOnCompleteCallback(n,i,o)}))},Ih.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},Ih.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},Ih.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Sh)},Ih.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Sh)},Ih.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new Vl(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);Us(t,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)}))}},Ih.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},Ih.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),vs.apply(void 0,oa([n],e))},Ih.prototype.callOnCompleteCallback=function(e,t,n){e&&Vs((function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(Ih.prototype,"database",{get:function(){return this.__database||(this.__database=new Kh(this))},enumerable:!0,configurable:!0}),Ih);function Ih(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Mc,this.persistentConnection_=null;var i=new Pl(n);if(this.stats_=Ul.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Th(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Na(o)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new bh(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(e){r.server_.refreshAuthToken(e)})),this.statsReporter_=Ul.getOrCreateReporter(e,(function(){return new Bl(r.stats_,r.server_)})),this.transactions_init_(),this.infoData_=new Ol,this.infoSyncTree_=new Dl({startListening:function(e,t,n,i){var o=[],a=r.infoData_.getNode(e.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Dl({startListening:function(e,t,n,i){return r.server_.listen(e,n,t,(function(t,n){var o=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}var kh=(Nh.prototype.getStartPost=function(){return this.startPost_},Nh.prototype.getEndPost=function(){return this.endPost_},Nh.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},Nh.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Su(t,n))||(n=lc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},Nh.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=lc.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(lc.EMPTY_NODE);var i=this;return t.forEachChild(Wu,(function(e,t){i.matches(new Su(e,t))||(r=r.updateImmediateChild(e,lc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},Nh.prototype.updatePriority=function(e,t){return e},Nh.prototype.filtersNodes=function(){return!0},Nh.prototype.getIndexedFilter=function(){return this.indexedFilter_},Nh.prototype.getIndex=function(){return this.index_},Nh.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},Nh.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},Nh);function Nh(e){this.indexedFilter_=new al(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nh.getStartPost_(e),this.endPost_=Nh.getEndPost_(e)}var Ah=(Dh.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Su(t,n))||(n=lc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},Dh.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=lc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=lc.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(lc.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,lc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},Dh.prototype.updatePriority=function(e,t){return e},Dh.prototype.filtersNodes=function(){return!0},Dh.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Dh.prototype.getIndex=function(){return this.index_},Dh.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;la(s.numChildren()==this.limit_,"");var u=new Su(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(il.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(il.childRemovedChange(t,h));var d=s.updateImmediateChild(t,lc.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(il.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?e:l&&0<=o(c,u)?(null!=i&&(i.trackChildChange(il.childRemovedChange(c.name,c.node)),i.trackChildChange(il.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,lc.EMPTY_NODE)):e},Dh);function Dh(e){this.rangedFilter_=new kh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}var Rh=(Oh.prototype.hasStart=function(){return this.startSet_},Oh.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Oh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Oh.prototype.getIndexStartValue=function(){return la(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Oh.prototype.getIndexStartName=function(){return la(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ps},Oh.prototype.hasEnd=function(){return this.endSet_},Oh.prototype.getIndexEndValue=function(){return la(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Oh.prototype.getIndexEndName=function(){return la(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ms},Oh.prototype.hasLimit=function(){return this.limitSet_},Oh.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Oh.prototype.getLimit=function(){return la(this.limitSet_,"Only valid if limit has been set"),this.limit_},Oh.prototype.getIndex=function(){return this.index_},Oh.prototype.copy_=function(){var e=new Oh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},Oh.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},Oh.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=Oh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},Oh.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=Oh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},Oh.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},Oh.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},Oh.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},Oh.prototype.getQueryObject=function(){var e=Oh.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==Wu&&(t[e.INDEX]=this.index_.toString()),t},Oh.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Oh.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Wu},Oh.prototype.getNodeFilter=function(){return this.loadsAllData()?new al(this.getIndex()):this.hasLimit()?new Ah(this):new kh(this)},Oh.prototype.toRestQueryStringParameters=function(){var e,t=Oh.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(e=this.index_===Wu?t.PRIORITY_INDEX:this.index_===bc?t.VALUE_INDEX:this.index_===xu?t.KEY_INDEX:(la(this.index_ instanceof wc,"Unrecognized index type!"),this.index_.toString()),n[t.ORDER_BY]=Na(e),this.startSet_&&(n[t.START_AT]=Na(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+Na(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=Na(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+Na(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_)),n},Oh.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Oh.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Oh.DEFAULT=new Oh,Oh);function Oh(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wu}var xh,Ph=(Zo(Mh,xh=xc),Mh.prototype.getKey=function(){return Ba("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Mh.prototype.child=function(e){return Ba("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof zs||(null===this.path.getFront()?function(e,t,n,r){uu("Reference.child",1,n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),!1)}(0,0,e):uu("Reference.child",1,e,!1)),new Mh(this.repo,this.path.child(e))},Mh.prototype.getParent=function(){Ba("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new Mh(this.repo,e)},Mh.prototype.getRoot=function(){Ba("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},Mh.prototype.databaseProp=function(){return this.repo.database},Mh.prototype.set=function(e,t){Ba("Reference.set",1,2,arguments.length),cu("Reference.set",this.path),ru("Reference.set",1,e,this.path,!1),za("Reference.set",2,t,!0);var n=new ma;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},Mh.prototype.update=function(e,t){if(Ba("Reference.update",1,2,arguments.length),cu("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,_s("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}iu("Reference.update",1,e,this.path,!1),za("Reference.update",2,t,!0);var i=new ma;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},Mh.prototype.setWithPriority=function(e,t,n){if(Ba("Reference.setWithPriority",2,3,arguments.length),cu("Reference.setWithPriority",this.path),ru("Reference.setWithPriority",1,e,this.path,!1),ou("Reference.setWithPriority",2,t,!1),za("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new ma;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},Mh.prototype.remove=function(e){return Ba("Reference.remove",0,1,arguments.length),cu("Reference.remove",this.path),za("Reference.remove",1,e,!0),this.set(null,e)},Mh.prototype.transaction=function(e,t,n){if(Ba("Reference.transaction",1,3,arguments.length),cu("Reference.transaction",this.path),za("Reference.transaction",1,e,!1),za("Reference.transaction",2,t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Wa("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new ma;return"function"==typeof t&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,e,(function(e,n,i){e?r.reject(e):r.resolve(new gu(n,i)),"function"==typeof t&&t(e,n,i)}),n),r.promise},Mh.prototype.setPriority=function(e,t){Ba("Reference.setPriority",1,2,arguments.length),cu("Reference.setPriority",this.path),ou("Reference.setPriority",1,e,!1),za("Reference.setPriority",2,t,!0);var n=new ma;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},Mh.prototype.push=function(e,t){Ba("Reference.push",0,2,arguments.length),cu("Reference.push",this.path),ru("Reference.push",1,e,this.path,!0),za("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=Eu(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},Mh.prototype.onDisconnect=function(){return cu("Reference.onDisconnect",this.path),new yu(this.repo,this.path)},Object.defineProperty(Mh.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Mh.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Mh.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Mh.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Mh);function Mh(e,t){if(!(e instanceof Ch))throw new Error("new Reference() no longer supported - use app.database().");return xh.call(this,e,t,Rh.DEFAULT,!1)||this}xc.__referenceConstructor=Ph,Tl.__referenceConstructor=Ph;var Lh,Fh,Uh=function(){this.children={},this.childCount=0,this.value=null},jh=(Vh.prototype.subTree=function(e){for(var t,n=e instanceof zs?e:new zs(e),r=this;null!==(t=n.getFront());)r=new Vh(t,r,Ra(r.node_.children,t)||new Uh),n=n.popFront();return r},Vh.prototype.getValue=function(){return this.node_.value},Vh.prototype.setValue=function(e){la(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},Vh.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Vh.prototype.hasChildren=function(){return 0<this.node_.childCount},Vh.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Vh.prototype.forEachChild=function(e){var t=this;Us(this.node_.children,(function(n,r){e(new Vh(n,t,r))}))},Vh.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},Vh.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},Vh.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},Vh.prototype.path=function(){return new zs(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Vh.prototype.name=function(){return this.name_},Vh.prototype.parent=function(){return this.parent_},Vh.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Vh.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=Da(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},Vh);function Vh(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Uh),this.name_=e,this.parent_=t,this.node_=n}(Fh=Lh=Lh||{})[Fh.RUN=0]="RUN",Fh[Fh.SENT=1]="SENT",Fh[Fh.COMPLETED=2]="COMPLETED",Fh[Fh.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Fh[Fh.NEEDS_ABORT=4]="NEEDS_ABORT",Ch.MAX_TRANSACTION_RETRIES_=25,Ch.prototype.transactions_init_=function(){this.transactionQueueTree_=new jh},Ch.prototype.startTransaction=function(e,t,n,r){function i(){}this.log_("transaction on "+e);var o=new Ph(this,e);o.on("value",i);var a={path:e,update:t,onComplete:n,status:null,order:Ds(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Tc(a.currentInputSnapshot,new Ph(this,a.path),Wu);a.onComplete(null,!1,c)}}else{mu("transaction failed: Data returned ",u,a.path),a.status=Lh.RUN;var l=this.transactionQueueTree_.subTree(e),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&Da(u,".priority")?(f=Ra(u,".priority"),la(nu(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||lc.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),d=yc(u,f),m=Vc(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y),this.sendReadyTransactions_()}},Ch.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||lc.EMPTY_NODE},Ch.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);la(0<n.length,"Sending zero length transaction queue"),n.every((function(e){return e.status===Lh.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},Ch.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,a=i.hash(),s=0;s<t.length;s++){var u=t[s];la(u.status===Lh.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Lh.SENT,u.retryCount++;var c=zs.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<t.length;a++){if(t[a].status=Lh.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new Ph(n,t[a].path),c=new Tc(s,u,Wu);o.push(t[a].onComplete.bind(null,null,!0,c))}t[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i),a=0;a<o.length;a++)Vs(o[a])}else{if("datastale"===r)for(a=0;a<t.length;a++)t[a].status===Lh.SENT_NEEDS_ABORT?t[a].status=Lh.NEEDS_ABORT:t[a].status=Lh.RUN;else for(_s("transaction at "+h.toString()+" failed: "+r),a=0;a<t.length;a++)t[a].status=Lh.NEEDS_ABORT,t[a].abortReason=r;n.rerunTransactions_(e)}}),a)},Ch.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},Ch.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter((function(e){return e.status===Lh.RUN})).map((function(e){return e.currentWriteId})),a=0;a<e.length;a++){var s=e[a],u=zs.relativePath(t,s.path),c=!1,l=void 0;if(la(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Lh.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Lh.RUN)if(s.retryCount>=Ch.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=e[a].update(h.val());if(void 0!==f){mu("transaction failed: Data returned ",f,s.path);var p=yc(f);"object"==typeof f&&null!=f&&Da(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=s.currentWriteId,m=this.generateServerValues(),y=Vc(p,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[a].status=Lh.COMPLETED,n=e[a].unwatcher,setTimeout(n,Math.floor(0)),e[a].onComplete))if("nodata"===l){var v=new Ph(this,e[a].path),g=e[a].currentInputSnapshot,b=new Tc(g,v,Wu);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)Vs(r[a]);this.sendReadyTransactions_()}},Ch.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},Ch.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},Ch.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},Ch.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Lh.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(0<n.length?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},Ch.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},Ch.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===Lh.SENT_NEEDS_ABORT||(t[o].status===Lh.SENT?(la(i===o-1,"All SENT items should be at beginning of queue."),t[i=o].status=Lh.SENT_NEEDS_ABORT,t[o].abortReason="set"):(la(t[o].status===Lh.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)Vs(n[o])}};var qh,Bh="databaseURL",Wh=(zh.getInstance=function(){return qh=qh||new zh},zh.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},zh.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},zh.prototype.databaseFromApp=function(e,t){var r=t||e.options[Bh];void 0===r&&ws("Can't determine Firebase Database URL.  Be sure to include "+Bh+" option when calling firebase.initializeApp().");var i=Zs(r),o=i.repoInfo,a=void 0;return"undefined"!=typeof n&&(a=Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_DATABASE_EMULATOR_HOST),a&&(o=(i=Zs(r="http://"+a+"?ns="+o.namespace)).repoInfo),lu("Invalid Firebase Database URL",1,i),i.path.isEmpty()||ws("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,e).database},zh.prototype.deleteRepo=function(e){var t=Ra(this.repos_,e.app.name);t&&Ra(t,e.repoInfo_.toURLString())===e||ws("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},zh.prototype.createRepo=function(e,t){var n=Ra(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=Ra(n,e.toURLString());return r&&ws("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Ch(e,this.useRestClient_,t),n[e.toURLString()]=r},zh.prototype.forceRestClient=function(e){this.useRestClient_=e},zh);function zh(){this.repos_={},this.useRestClient_=!1}var Kh=(Object.defineProperty(Hh.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Hh.prototype.ref=function(e){return this.checkDeleted_("ref"),Ba("database.ref",0,1,arguments.length),e instanceof Ph?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},Hh.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Ba(t,1,1,arguments.length);var n=Zs(e);lu(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&ws(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Hh.prototype.checkDeleted_=function(e){null===this.repo_&&ws("Cannot call "+e+" on a deleted database.")},Hh.prototype.goOffline=function(){Ba("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Hh.prototype.goOnline=function(){Ba("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Hh.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Hh);function Hh(e){(this.repo_=e)instanceof Ch||ws("Don't call new Database() directly - please use firebase.database()."),this.root_=new Ph(e,zs.Empty),this.INTERNAL=new Qh(this)}var Qh=(Gh.prototype.delete=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return this.database.checkDeleted_("delete"),Wh.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},Gh);function Gh(e){this.database=e}var Yh=Object.freeze({__proto__:null,forceLongPolling:function(){lh.forceDisallow(),ih.forceAllow()},forceWebSockets:function(){ih.forceDisallow()},isWebSocketsAvailable:function(){return lh.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),Xh=bh;bh.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},bh.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var $h,Jh,Zh=dh,ef=$s,tf=Object.freeze({__proto__:null,DataConnection:Xh,RealTimeConnection:Zh,hijackHash:function(e){var t=bh.prototype.put;return bh.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){bh.prototype.put=t}},ConnectionTarget:ef,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){Wh.getInstance().forceRestClient(e)}}),nf=Kh.ServerValue;$h=(Jh=cs).SDK_VERSION,uh=$h,Jh.INTERNAL.registerService("database",(function(e,t,n){return Wh.getInstance().databaseFromApp(e,n)}),{Reference:Ph,Query:xc,Database:Kh,DataSnapshot:Tc,enableLogging:ys,INTERNAL:Yh,ServerValue:nf,TEST_ACCESS:tf},null,!0);var rf,of="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},af=af||{},sf=of;function uf(e){return"string"==typeof e}function cf(e){return"number"==typeof e}function lf(e,t){e=e.split("."),t=t||sf;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function hf(){}function ff(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function pf(e){return"array"==ff(e)}function df(e){var t=ff(e);return"array"==t||"object"==t&&"number"==typeof e.length}function mf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var yf="closure_uid_"+(1e9*Math.random()>>>0),vf=0;function gf(e,t,n){return e.call.apply(e.bind,arguments)}function bf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wf(e,t,n){return(wf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gf:bf).apply(null,arguments)}function _f(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}var Tf=Date.now||function(){return+new Date};function Ef(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Sf(){this.j=this.j,this.i=this.i}Sf.prototype.j=!1,Sf.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[yf]||(this[yf]=++vf))},Sf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Cf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(uf(e))return uf(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},If=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=uf(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function kf(){return Array.prototype.concat.apply([],arguments)}function Nf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Af(e){return/^[\s\xa0]*$/.test(e)}var Df,Rf=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Of(e,t){return-1!=e.indexOf(t)}function xf(e,t){return e<t?-1:t<e?1:0}e:{var Pf=sf.navigator;if(Pf){var Mf=Pf.userAgent;if(Mf){Df=Mf;break e}}Df=""}function Lf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ff(e){var t,n={};for(t in e)n[t]=e[t];return n}var Uf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jf(e){for(var t,n,r=1;r<arguments.length;r++){for(t in n=arguments[r])e[t]=n[t];for(var i=0;i<Uf.length;i++)t=Uf[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function Vf(e){return Vf[" "](e),e}Vf[" "]=hf;var qf,Bf,Wf=Of(Df,"Opera"),zf=Of(Df,"Trident")||Of(Df,"MSIE"),Kf=Of(Df,"Edge"),Hf=Kf||zf,Qf=Of(Df,"Gecko")&&!(Of(Df.toLowerCase(),"webkit")&&!Of(Df,"Edge"))&&!(Of(Df,"Trident")||Of(Df,"MSIE"))&&!Of(Df,"Edge"),Gf=Of(Df.toLowerCase(),"webkit")&&!Of(Df,"Edge");function Yf(){var e=sf.document;return e?e.documentMode:void 0}e:{var Xf="",$f=(Bf=Df,Qf?/rv:([^\);]+)(\)|;)/.exec(Bf):Kf?/Edge\/([\d\.]+)/.exec(Bf):zf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bf):Gf?/WebKit\/(\S+)/.exec(Bf):Wf?/(?:Version)[ \/]?(\S+)/.exec(Bf):void 0);if($f&&(Xf=$f?$f[1]:""),zf){var Jf=Yf();if(null!=Jf&&Jf>parseFloat(Xf)){qf=String(Jf);break e}}qf=Xf}var Zf,ep={};function tp(e){return function(t,n){var r=ep;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=Rf(String(qf)).split("."),r=Rf(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=xf(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||xf(0==a[2].length,0==s[2].length)||xf(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}var np=sf.document;Zf=np&&zf?Yf()||("CSS1Compat"==np.compatMode?parseInt(qf,10):5):void 0;var rp=!zf||9<=Number(Zf),ip=zf&&!tp("9"),op=function(){if(!sf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sf.addEventListener("test",hf,t),sf.removeEventListener("test",hf,t)}catch(e){}return e}();function ap(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function sp(e,t){if(ap.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Qf){e:{try{Vf(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=uf(e.pointerType)?e.pointerType:up[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}ap.prototype.b=function(){this.Ja=!1},Ef(sp,ap);var up={2:"touch",3:"pen",4:"mouse"};sp.prototype.b=function(){sp.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ip)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var cp="closure_listenable_"+(1e6*Math.random()|0),lp=0;function hp(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++lp,this.X=this.Z=!1}function fp(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function pp(e){this.src=e,this.a={},this.b=0}function dp(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Cf(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fp(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function mp(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}pp.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=mp(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new hp(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var yp="closure_lm_"+(1e6*Math.random()|0),vp={};function gp(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(pf(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ip(r),t&&t[cp]?t.Ba(n,r,mf(i)?!!i.capture:!!i,o):bp(t,n,r,!0,i,o)}(e,t,n,r,i);if(pf(t)){for(var o=0;o<t.length;o++)gp(e,t[o],n,r,i);return null}return n=Ip(n),e&&e[cp]?e.Aa(t,n,mf(r)?!!r.capture:!!r,i):bp(e,t,n,!1,r,i)}function bp(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=mf(i)?!!i.capture:!!i;if(a&&!rp)return null;var s=Sp(e);if(s||(e[yp]=s=new pp(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Ep,t=rp?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)op||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_p(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function wp(e){if(!cf(e)&&e&&!e.X){var t=e.src;if(t&&t[cp])dp(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_p(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Sp(t))?(dp(n,e),0==n.b&&(n.src=null,t[yp]=null)):fp(e)}}}function _p(e){return e in vp?vp[e]:vp[e]="on"+e}function Tp(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&wp(e),n.call(r,t)}function Ep(e,t){return!!e.X||Tp(e,rp?new sp(t,this):t=new sp(t||lf("window.event"),this))}function Sp(e){return(e=e[yp])instanceof pp?e:null}var Cp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ip(e){return"function"==ff(e)?e:(e[Cp]||(e[Cp]=function(t){return e.handleEvent(t)}),e[Cp])}function kp(){Sf.call(this),this.c=new pp(this),(this.J=this).B=null}function Np(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&dp(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}Ef(kp,Sf),kp.prototype[cp]=!0,(rf=kp.prototype).addEventListener=function(e,t,n,r){gp(this,e,t,n,r)},rf.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(pf(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=mf(i)?!!i.capture:!!i,r=Ip(r),t&&t[cp]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=mp(a=t.a[n],r,i,o))&&(fp(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&Sp(t))&&(n=t.a[n.toString()],t=-1,n&&(t=mp(n,r,i,o)),(r=-1<t?n[t]:null)&&wp(r))}(this,e,t,n,r)},rf.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(uf(e))e=new ap(e,n);else if(e instanceof ap)e.target=e.target||n;else{var i=e;jf(e=new ap(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Np(a,r,!0,e)&&i}if(i=Np(a=e.a=n,r,!0,e)&&i,i=Np(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Np(a=e.a=t[o],r,!1,e)&&i;return i},rf.G=function(){if(kp.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)fp(n[r]);delete t.a[e],t.b--}}this.B=null},rf.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},rf.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ap=sf.JSON.stringify;function Dp(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Rp(){this.b=this.a=null}Dp.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Op,xp=new Dp((function(){return new Pp}),(function(e){e.reset()}));function Pp(){this.next=this.b=this.a=null}function Mp(e){sf.setTimeout((function(){throw e}),0)}function Lp(e,t){Op||function(){var e=sf.Promise.resolve(void 0);Op=function(){e.then(jp)}}(),Fp||(Op(),Fp=!0),Up.add(e,t)}Rp.prototype.add=function(e,t){var n=xp.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pp.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var Fp=!(Pp.prototype.reset=function(){this.next=this.b=this.a=null}),Up=new Rp;function jp(){for(var e;r=n=void 0,r=null,(n=Up).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){Mp(e)}var t=xp;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;Fp=!1}function Vp(e,t){kp.call(this),this.b=e||1,this.a=t||sf,this.f=wf(this.gb,this),this.g=Tf()}function qp(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Bp(e,t,n){if("function"==ff(e))n&&(e=wf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wf(e.handleEvent,e)}return 2147483647<Number(t)?-1:sf.setTimeout(e,t||0)}function Wp(e,t,n){Sf.call(this),this.f=null!=n?wf(e,n):e,this.c=t,this.b=wf(this.ab,this),this.a=[]}function zp(e){e.U=Bp(e.b,e.c),e.f.apply(null,e.a)}function Kp(e){Sf.call(this),this.b=e,this.a={}}Ef(Vp,kp),(rf=Vp.prototype).ba=!1,rf.L=null,rf.gb=function(){if(this.ba){var e=Tf()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qp(this),this.start()))}},rf.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Tf())},rf.G=function(){Vp.N.G.call(this),qp(this),delete this.a},Ef(Wp,Sf),(rf=Wp.prototype).ea=!1,rf.U=null,rf.Ua=function(e){this.a=arguments,this.U?this.ea=!0:zp(this)},rf.G=function(){Wp.N.G.call(this),this.U&&(sf.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},rf.ab=function(){this.U=null,this.ea&&(this.ea=!1,zp(this))},Ef(Kp,Sf);var Hp=[];function Qp(e,t,n,r){pf(n)||(n&&(Hp[0]=n.toString()),n=Hp);for(var i=0;i<n.length;i++){var o=gp(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Gp(e){Lf(e.a,(function(e,t){this.a.hasOwnProperty(t)&&wp(e)}),e),e.a={}}function Yp(){}Kp.prototype.G=function(){Kp.N.G.call(this),Gp(this)},Kp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xp=new kp;function $p(e){ap.call(this,"serverreachability",e)}function Jp(e){Xp.dispatchEvent(new $p(Xp,e))}function Zp(e){ap.call(this,"statevent",e)}function ed(e){Xp.dispatchEvent(new Zp(Xp,e))}function td(e){ap.call(this,"timingevent",e)}function nd(e,t){if("function"!=ff(e))throw Error("Fn must not be null and must be a function");return sf.setTimeout((function(){e()}),t)}Ef($p,ap),Ef(Zp,ap),Ef(td,ap);var rd={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},id={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function od(){}function ad(e){var t;return(t=e.a)||(t=e.a={}),t}function sd(){}od.prototype.a=null;var ud,cd={OPEN:"a",ib:"b",Na:"c",rb:"d"};function ld(){ap.call(this,"d")}function hd(){ap.call(this,"c")}function fd(){}function pd(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Kp(this),this.O=dd,e=Hf?125:void 0,this.P=new Vp(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}Ef(ld,ap),Ef(hd,ap),Ef(fd,od),ud=new fd;var dd=45e3,md={},yd={};function vd(e,t,n){e.F=1,e.f=Bd(Md(t)),e.l=n,e.H=!0,bd(e,null)}function gd(e,t,n,r){e.F=1,e.f=Bd(Md(t)),e.l=null,e.H=n,bd(e,r)}function bd(e,t){e.v=Tf(),Td(e),e.D=Md(e.f),qd(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Wp(wf(e.Ka,e,e.a),e.J)),Qp(e.I,e.a,"readystatechange",e.eb),t=e.h?Ff(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Jp(1)}function wd(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=_d(e,n);if(i==yd){4==t&&(e.c=4,ed(14),r=!1);break}if(i==md){e.c=4,ed(15),r=!1;break}kd(e,i)}4==t&&0==n.length&&(e.c=1,ed(16),r=!1),e.b=e.b&&r,r||(Id(e),Cd(e))}function _d(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?yd:(n=Number(t.substring(n,r)),isNaN(n)?md:(r+=1)+n>t.length?yd:(t=t.substr(r,n),e.A=r+n,t))}function Td(e){e.R=Tf()+e.O,Ed(e,e.O)}function Ed(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=nd(wf(e.bb,e),t)}function Sd(e){e.i&&(sf.clearTimeout(e.i),e.i=null)}function Cd(e){e.g.Da()||e.m||e.g.na(e)}function Id(e){Sd(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qp(e.P),Gp(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function kd(e,t){try{e.g.Ga(e,t),Jp(4)}catch(e){}}function Nd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(df(e)||uf(e))If(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(df(e)||uf(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(uf(e))return e.split("");if(df(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ad(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ad)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Dd(e,t){Od(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Rd(e))}function Rd(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Od(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Od(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Od(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(rf=pd.prototype).setTimeout=function(e){this.O=e},rf.eb=function(e){e=e.target;var t=this.B;t&&3==Pm(e)?t.Ua():this.Ka(e)},rf.Ka=function(e){try{if(e==this.a)e:{var t=Pm(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!Hf&&!this.a.aa())){this.m||4!=t||7==n||Jp(8==n||r<=0?3:2),Sd(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Mm(this.a,"X-HTTP-Initial-Response");if(a&&!Af(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,ed(12),Id(this),Cd(this);break e}this.s=!0,kd(this,s)}this.H?(wd(this,t,o),Hf&&this.b&&3==t&&(Qp(this.I,this.P,"tick",this.cb),this.P.start())):kd(this,o),4==t&&Id(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,Td(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ed(12)):(this.c=0,ed(13)),Id(this),Cd(this)}}}catch(e){}},rf.cb=function(){if(this.a){var e=Pm(this.a),t=this.a.aa();this.A<t.length&&(Sd(this),wd(this,e,t),this.b&&4!=e&&Td(this))}},rf.cancel=function(){this.m=!0,Id(this)},rf.bb=function(){this.i=null;var e=Tf();0<=e-this.R?(2!=this.F&&(Jp(3),ed(17)),Id(this),this.c=2,Cd(this)):Ed(this,this.R-e)},(rf=Ad.prototype).C=function(){Rd(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},rf.K=function(){return Rd(this),this.a.concat()},rf.get=function(e,t){return Od(this.b,e)?this.b[e]:t},rf.set=function(e,t){Od(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},rf.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var xd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pd(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Pd?(this.h=void 0!==t?t:e.h,Ld(this,e.f),this.j=e.j,Fd(this,e.b),Ud(this,e.i),this.a=e.a,jd(this,nm(e.c)),this.g=e.g):e&&(n=String(e).match(xd))?(this.h=!!t,Ld(this,n[1]||"",!0),this.j=Wd(n[2]||""),Fd(this,n[3]||"",!0),Ud(this,n[4]),this.a=Wd(n[5]||"",!0),jd(this,n[6]||"",!0),this.g=Wd(n[7]||"")):(this.h=!!t,this.c=new $d(null,this.h))}function Md(e){return new Pd(e)}function Ld(e,t,n){e.f=n?Wd(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Fd(e,t,n){e.b=n?Wd(t,!0):t}function Ud(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function jd(e,t,n){t instanceof $d?(e.c=t,function(e,t){t&&!e.f&&(Jd(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zd(this,t),tm(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=zd(t,Yd)),e.c=new $d(t,e.h))}function Vd(e,t,n){e.c.set(t,n)}function qd(e,t,n){pf(n)||(n=[String(n)]),tm(e.c,t,n)}function Bd(e){return Vd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Tf()).toString(36)),e}function Wd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zd(e,t,n){return uf(e)?(e=encodeURI(e).replace(t,Kd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pd.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zd(t,Hd,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(zd(t,Hd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zd(n,"/"==n.charAt(0)?Gd:Qd,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zd(n,Xd)),e.join("")},Pd.prototype.resolve=function(e){var t=Md(this),n=!!e.f;n?Ld(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Fd(t,e.b):n=null!=e.i;var r=e.a;if(n)Ud(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(Of(i,"./")||Of(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?jd(t,nm(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Hd=/[#\/\?@]/g,Qd=/[#\?:]/g,Gd=/[#\?]/g,Yd=/[#\?@]/g,Xd=/#/g;function $d(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Jd(e){e.a||(e.a=new Ad,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zd(e,t){Jd(e),t=rm(e,t),Od(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Dd(e.a,t))}function em(e,t){return Jd(e),t=rm(e,t),Od(e.a.b,t)}function tm(e,t,n){Zd(e,t),0<n.length&&(e.c=null,e.a.set(rm(e,t),Nf(n)),e.b+=n.length)}function nm(e){var t=new $d;return t.c=e.c,e.a&&(t.a=new Ad(e.a),t.b=e.b),t}function rm(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function im(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function om(e){var t=e.a.F.a;if(null!=t)ed(4),t?(ed(10),Qm(e.a,e,!1)):(ed(11),Qm(e.a,e,!0));else{e.b=new pd(e,void 0,void 0),e.b.h=e.h,t=Jm(t=e.a,t.Y()?e.f:null,e.i),ed(4),qd(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vd(t,n,r),gd(e.b,t,!1,e.f)}}function am(){this.a=this.b=null}function sm(){this.a=new Ad}function um(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[yf]||(e[yf]=++vf)):t.charAt(0)+e}function cm(e,t){this.b=e,this.a=t}function lm(e){this.g=e||hm,e=sf.PerformanceNavigationTiming?0<(e=sf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(sf.ka&&sf.ka.Ea&&sf.ka.Ea()&&sf.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sm),this.b=null,this.c=[]}(rf=$d.prototype).add=function(e,t){Jd(this),this.c=null,e=rm(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},rf.forEach=function(e,t){Jd(this),this.a.forEach((function(n,r){If(n,(function(n){e.call(t,n,r,this)}),this)}),this)},rf.K=function(){Jd(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},rf.C=function(e){Jd(this);var t=[];if(uf(e))em(this,e)&&(t=kf(t,this.a.get(rm(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=kf(t,e[n])}return t},rf.set=function(e,t){return Jd(this),this.c=null,em(this,e=rm(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},rf.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},rf.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},Ef((function(){}),(function(){})),(rf=im.prototype).M=null,rf.$=function(e){return this.a.$(e)},rf.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},rf.Da=function(){return!1},rf.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Mm(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Mm(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Xm(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xm(t,2)}else 1==this.M&&(this.g?ed(6):"11111"==t?(ed(5),this.g=!0,(!zf||10<=Number(Zf))&&(this.c=200,this.b.cancel(),ed(11),Qm(this.a,this,!0))):(ed(7),this.g=!1))},rf.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,om(this)):1==this.M&&(this.g?(ed(11),Qm(this.a,this,!0)):(ed(10),Qm(this.a,this,!1)));else{0==this.M?ed(8):1==this.M&&ed(9);var e=this.a;e.m=this.c,Xm(e,2)}},rf.Y=function(){return this.a.Y()},rf.ma=function(){return this.a.ma()},sm.prototype.add=function(e){this.a.set(um(e),e)},sm.prototype.C=function(){return this.a.C()};var hm=10;function fm(e,t){!e.a&&(Of(t,"spdy")||Of(t,"quic")||Of(t,"h2"))&&(e.f=e.g,e.a=new sm,e.b&&(ym(e,e.b),e.b=null))}function pm(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function dm(e){return e.b?1:e.a?e.a.a.c:0}function mm(e,t){return e.b?e.b==t:!!e.a&&(t=um(t),Od(e.a.a.b,t))}function ym(e,t){e.a?e.a.add(t):e.b=t}function vm(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=um(t),n=Od(e.a.a.b,n)),n&&Dd(e.a.a,um(t)))}function gm(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return Nf(e.c);var t=e.c;return If(e.a.C(),(function(e){t=t.concat(e.j)})),t}function bm(){}function wm(){this.a=new bm}function _m(e,t,n){var r=n||"";try{Nd(e,(function(e,n){var i=e;mf(e)&&(i=Ap(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Tm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}lm.prototype.cancel=function(){this.c=gm(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(If(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},bm.prototype.stringify=function(e){return sf.JSON.stringify(e,void 0)},bm.prototype.parse=function(e){return sf.JSON.parse(e,void 0)};var Em=sf.JSON.parse;function Sm(e){kp.call(this),this.headers=new Ad,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cm,this.D=this.F=!1}Ef(Sm,kp);var Cm="",Im=/^https?$/i,km=["POST","PUT"];function Nm(e){return"content-type"==e.toLowerCase()}function Am(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Dm(e),Om(e)}function Dm(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Rm(e){if(e.b&&void 0!==af&&(!e.s[1]||4!=Pm(e)||2!=e.T()))if(e.l&&4==Pm(e))Bp(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Pm(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(xd)[1]||null;if(!o&&sf.self&&sf.self.location){var a=sf.self.location.protocol;o=a.substr(0,a.length-1)}i=!Im.test(o?o.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Dm(e))}finally{Om(e)}}}function Om(e,t){if(e.a){xm(e);var n=e.a,r=e.s[0]?hf:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function xm(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(sf.clearTimeout(e.m),e.m=null)}function Pm(e){return e.a?e.a.readyState:0}function Mm(e,t){return e.a?e.a.getResponseHeader(t):null}function Lm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return Lf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),uf(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vd(e,t,n),e}function Fm(e){this.f=[],this.F=new am,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!lf("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=lf("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=lf("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=lf("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=lf("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new lm(e&&e.concurrentRequestLimit),this.ja=new wm,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Um(e){if(jm(e),3==e.u){var t=e.P++,n=Md(e.B);Vd(n,"SID",e.H),Vd(n,"RID",t),Vd(n,"TYPE","terminate"),Wm(e,n),(t=new pd(e,t,void 0)).F=2,t.f=Bd(Md(n)),n=!1,sf.navigator&&sf.navigator.sendBeacon&&(n=sf.navigator.sendBeacon(t.f.toString(),"")),!n&&sf.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=Tf(),Td(t)}$m(e)}function jm(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(sf.clearTimeout(e.l),e.l=null),Gm(e),e.b.cancel(),e.h&&(cf(e.h)&&sf.clearTimeout(e.h),e.h=null)}function Vm(e,t){e.f.push(new cm(e.Ra++,t)),3==e.u&&qm(e)}function qm(e){pm(e.b)||e.h||(e.h=!0,Lp(e.Ia,e),e.A=0)}function Bm(e,t){var n;n=t?t.W:e.P++;var r=Md(e.B);Vd(r,"SID",e.H),Vd(r,"RID",n),Vd(r,"AID",e.O),Wm(e,r),e.g&&e.i&&Lm(r,e.g,e.i),n=new pd(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=zm(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),ym(e.b,n),vd(n,r,t)}function Wm(e,t){e.c&&Nd({},(function(e,n){Vd(t,n,e)}))}function zm(e,t,n){n=Math.min(e.f.length,n);var r=e.c?wf(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{_m(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Km(e){e.a||e.l||(e.S=1,Lp(e.Ha,e),e.v=0)}function Hm(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=nd(wf(e.Ha,e),Ym(e,e.v)),e.v++,!0)}function Qm(e,t,n){var r=t.l;r&&fm(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Jm(e,null,e.ha),qm(e)}function Gm(e){null!=e.s&&(sf.clearTimeout(e.s),e.s=null)}function Ym(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Xm(e,t){if(2==t){var n=null;e.c&&(n=null);var r=wf(e.fb,e);n||(n=new Pd("//www.google.com/images/cleardot.gif"),sf.location&&"http"==sf.location.protocol||Ld(n,"https"),Bd(n)),function(e,t){var n=new Yp;if(sf.Image){var r=new Image;r.onload=_f(Tm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_f(Tm,n,r,"TestLoadImage: error",!1,t),r.onabort=_f(Tm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_f(Tm,n,r,"TestLoadImage: timeout",!1,t),sf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ed(2);e.u=0,e.c&&e.c.ta(t),$m(e),jm(e)}function $m(e){e.u=0,e.m=-1,e.c&&(0==gm(e.b).length&&0==e.f.length||(e.b.c.length=0,Nf(e.f),e.f.length=0),e.c.sa())}function Jm(e,t,n){var r=function(e){return e instanceof Pd?Md(e):new Pd(e,void 0)}(n);if(""!=r.b)t&&Fd(r,t+"."+r.b),Ud(r,r.i);else{var i,o=sf.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Pd(null,void 0);return e&&Ld(i,e),t&&Fd(i,t),n&&Ud(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&Lf(e.V,(function(e,t){Vd(r,t,e)})),t=e.j,n=e.I,t&&n&&Vd(r,t,n),Vd(r,"VER",e.wa),Wm(e,r),r}function Zm(){}function ey(){if(zf&&!(10<=Number(Zf)))throw Error("Environmental error: no available transport.")}function ty(e,t){kp.call(this),this.a=new Fm(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!Af(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Af(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new iy(this)}function ny(e){ld.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ry(){hd.call(this),this.status=1}function iy(e){this.a=e}(rf=Sm.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ad(this.H):ad(ud),this.a.onreadystatechange=wf(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Am(this,e)}e=n||"";var i=new Ad(this.headers);r&&Nd(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nm,n=e.length,r=uf(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:uf(e)?e.charAt(t):e[t]}(i.K()),n=sf.FormData&&e instanceof sf.FormData,0<=Cf(km,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xm(this),0<this.o&&((this.D=function(e){return zf&&tp(9)&&cf(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=wf(this.Ca,this)):this.m=Bp(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Am(this,e)}},rf.Ca=function(){void 0!==af&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},rf.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Om(this))},rf.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Om(this,!0)),Sm.N.G.call(this)},rf.Fa=function(){this.j||(this.w||this.l||this.g?Rm(this):this.$a())},rf.$a=function(){Rm(this)},rf.T=function(){try{return 2<Pm(this)?this.a.status:-1}catch(e){return-1}},rf.za=function(){try{return 2<Pm(this)?this.a.statusText:""}catch(e){return""}},rf.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},rf.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Em(t)}},rf.ya=function(){return this.h},rf.Ya=function(){return uf(this.f)?this.f:String(this.f)},(rf=Fm.prototype).wa=8,rf.u=1,rf.Da=function(){return 0==this.u},rf.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new pd(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?jf(r=Ff(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&uf(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zm(this,n,t),Vd(i=Md(this.B),"RID",e),Vd(i,"CVER",22),this.o&&this.j&&Vd(i,"X-HTTP-Session-Id",this.j),Wm(this,i),this.g&&r&&Lm(i,this.g,r),ym(this.b,n),this.W?(Vd(i,"$req",t),Vd(i,"SID","null"),n.S=!0,vd(n,i,null)):vd(n,i,t),this.u=2}}else 3==this.u&&(e?Bm(this,e):0==this.f.length||pm(this.b)||Bm(this))},rf.Ha=function(){this.l=null,this.a=new pd(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Md(this.pa);Vd(e,"RID","rpc"),Vd(e,"SID",this.H),Vd(e,"CI",this.ia?"0":"1"),Vd(e,"AID",this.O),Wm(this,e),Vd(e,"TYPE","xmlhttp"),this.g&&this.i&&Lm(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),gd(this.a,e,!0,this.ga)},rf.Ga=function(e,t){if(0!=this.u&&(this.a==e||mm(this.b,e)))if(this.m=e.o,!e.s&&mm(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(pf(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gm(this),this.a.cancel(),this.a=null}Hm(this),ed(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=nd(wf(this.Za,this),6e3));if(dm(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Xm(this,11)}else if(!e.s&&this.a!=e||Gm(this),!Af(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&cf(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Mm(r,"X-Client-Wire-Protocol"))&&fm(this.b,i),this.j&&(r=Mm(r,"X-HTTP-Session-Id")))&&(this.I=r,Vd(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Jm(this,this.Y()?this.ga:null,this.ha),r.s?(vm(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Sd(r),Td(r)),this.a=r):Km(this),0<this.f.length&&qm(this)}else"stop"!=r[0]&&"close"!=r[0]||Xm(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xm(this,7):Um(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},rf.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Hm(this),ed(19))},rf.na=function(e){var t=null;if(this.a==e){Gm(this),this.a=null;var n=2}else{if(!mm(this.b,e))return;t=e.j,vm(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=Tf()-e.v,Xp.dispatchEvent(new td(Xp,e.l?e.l.length:0,t,this.A)),qm(this)):Km(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(dm(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=nd(wf(e.Ia,e,t),Ym(e,e.A)),e.A++,!0))}(this,e)||2==n&&Hm(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xm(this,5);break;case 4:Xm(this,10);break;case 3:Xm(this,6);break;default:Xm(this,2)}}},rf.fb=function(e){ed(e?2:1)},rf.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sm(this.La)).F=this.R,e},rf.ma=function(){return!!this.c&&!0},rf.Y=function(){return this.R},(rf=Zm.prototype).va=function(){},rf.ua=function(){},rf.ta=function(){},rf.sa=function(){},rf.Ta=function(){},ey.prototype.a=function(e,t){return new ty(e,t)},Ef(ty,kp),(rf=ty.prototype).addEventListener=function(e,t,n,r){ty.N.addEventListener.call(this,e,t,n,r)},rf.removeEventListener=function(e,t,n,r){ty.N.removeEventListener.call(this,e,t,n,r)},rf.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;ed(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new im(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Lm(t,e.g,e.i)),(e=e.w).i=n,t=Jm(e.a,null,e.i),ed(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,om(e)):(qd(t,"MODE","init"),!e.a.o&&e.a.j&&qd(t,"X-HTTP-Session-Id",e.a.j),e.b=new pd(e,void 0,void 0),e.b.h=e.h,gd(e.b,t,!1,null),e.M=0)},rf.close=function(){Um(this.a)},rf.Xa=function(e){if(uf(e)){var t={};t.__data__=e,Vm(this.a,t)}else this.h?((t={}).__data__=Ap(e),Vm(this.a,t)):Vm(this.a,e)},rf.G=function(){this.a.c=null,delete this.f,Um(this.a),delete this.a,ty.N.G.call(this)},Ef(ny,ld),Ef(ry,hd),Ef(iy,Zm),iy.prototype.va=function(){this.a.dispatchEvent("a")},iy.prototype.ua=function(e){this.a.dispatchEvent(new ny(e))},iy.prototype.ta=function(e){this.a.dispatchEvent(new ry(e))},iy.prototype.sa=function(){this.a.dispatchEvent("b")};var oy=_f((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),ey);ey.prototype.createWebChannel=ey.prototype.a,ty.prototype.send=ty.prototype.Xa,ty.prototype.open=ty.prototype.Wa,ty.prototype.close=ty.prototype.close,rd.NO_ERROR=0,rd.TIMEOUT=8,rd.HTTP_ERROR=6,id.COMPLETE="complete",(sd.EventType=cd).OPEN="a",cd.CLOSE="b",cd.ERROR="c",cd.MESSAGE="d",kp.prototype.listen=kp.prototype.Aa,Sm.prototype.listenOnce=Sm.prototype.Ba,Sm.prototype.getLastError=Sm.prototype.Ya,Sm.prototype.getLastErrorCode=Sm.prototype.ya,Sm.prototype.getStatus=Sm.prototype.T,Sm.prototype.getStatusText=Sm.prototype.za,Sm.prototype.getResponseJson=Sm.prototype.Va,Sm.prototype.getResponseText=Sm.prototype.aa,Sm.prototype.send=Sm.prototype.ca;var ay,sy,uy={createWebChannelTransport:oy,ErrorCode:rd,EventType:id,WebChannel:sd,XhrIo:Sm},cy=uy.createWebChannelTransport,ly=uy.ErrorCode,hy=uy.EventType,fy=uy.WebChannel,py=uy.XhrIo,dy=cs.SDK_VERSION,my=new $a("@firebase/firestore");function yy(){return my.logLevel===Fa.DEBUG?ay.DEBUG:my.logLevel===Fa.SILENT?ay.SILENT:ay.ERROR}function vy(e){switch(e){case ay.DEBUG:my.logLevel=Fa.DEBUG;break;case ay.ERROR:my.logLevel=Fa.ERROR;break;case ay.SILENT:my.logLevel=Fa.SILENT;break;default:my.error("Firestore ("+dy+"): Invalid value passed to `setLogLevel`")}}function gy(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(my.logLevel<=Fa.DEBUG){var i=n.map(wy);my.debug.apply(my,aa(["Firestore ("+dy+") ["+e+"]: "+t],i))}}function by(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(my.logLevel<=Fa.ERROR){var r=t.map(wy);my.error.apply(my,aa(["Firestore ("+dy+"): "+e],r))}}function wy(e){if("string"==typeof e)return e;var t=Ey.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function _y(e){var t="FIRESTORE ("+dy+") INTERNAL ASSERTION FAILED: "+e;throw by(t),new Error(t)}function Ty(e,t){e||_y(t)}(sy=ay=ay||{})[sy.DEBUG=0]="DEBUG",sy[sy.ERROR=1]="ERROR",sy[sy.SILENT=2]="SILENT";var Ey=(Sy.setPlatform=function(e){Sy.platform&&_y("Platform already defined"),Sy.platform=e},Sy.getPlatform=function(){return Sy.platform||_y("Platform not set"),Sy.platform},Sy);function Sy(){}function Cy(){return Ey.getPlatform().emptyByteString}var Iy,ky={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ny=(Zo(Ay,Iy=Error),Ay);function Ay(e,t){var n=Iy.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Dy(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Ny(ky.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function Ry(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Oy(e,t){return void 0!==e?e:t}function xy(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function Py(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function My(e){for(var t in Ty(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ly(e,t){if(0!==t.length)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Zy(t.length,"argument")+".")}function Fy(e,t,n){if(t.length!==n)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires "+Zy(n,"argument")+", but was called with "+Zy(t.length,"argument")+".")}function Uy(e,t,n){if(t.length<n)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Zy(n,"argument")+", but was called with "+Zy(t.length,"argument")+".")}function jy(e,t,n,r){if(t.length<n||t.length>r)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Zy(t.length,"argument")+".")}function Vy(e,t,n,r){Ky(e,t,Jy(n)+" argument",r)}function qy(e,t,n,r){void 0!==r&&Vy(e,t,n,r)}function By(e,t,n,r){Ky(e,t,n+" option",r)}function Wy(e,t,n,r){void 0!==r&&By(e,t,n,r)}function zy(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Qy(u))}var c=Qy(r);throw new Ny(ky.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function Ky(e,t,n,r){if(!("object"===t?Hy(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Qy(r);throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Hy(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Qy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":_y("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function Gy(e,t,n){if(void 0===n)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Jy(t)+" argument, but it was undefined.")}function Yy(e,t,n){Py(t,(function(t,r){if(n.indexOf(t)<0)throw new Ny(ky.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function Xy(e,t,n,r){var i=Qy(r);return new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires its "+Jy(n)+" argument to be a "+t+", but it was: "+i)}function $y(e,t,n){if(n<=0)throw new Ny(ky.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+Jy(t)+" argument to be a positive number, but it was: "+n+".")}function Jy(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Zy(e,t){return e+" "+t+(1===e?"":"s")}var ev=(tv.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return Ty(20===t.length,"Invalid auto ID: "+t),t},tv);function tv(){}function nv(e,t){return e<t?-1:t<e?1:0}function rv(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function iv(e){return e+"\0"}function ov(){if("undefined"==typeof Uint8Array)throw new Ny(ky.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function av(){if(!Ey.getPlatform().base64Available)throw new Ny(ky.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var sv=(uv.fromBase64String=function(e){Fy("Blob.fromBase64String",arguments,1),Vy("Blob.fromBase64String","string",1,e),av();try{return new uv(Ey.getPlatform().atob(e))}catch(e){throw new Ny(ky.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},uv.fromUint8Array=function(e){if(Fy("Blob.fromUint8Array",arguments,1),ov(),!(e instanceof Uint8Array))throw Xy("Blob.fromUint8Array","Uint8Array",1,e);return new uv(Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join(""))},uv.prototype.toBase64=function(){return Fy("Blob.toBase64",arguments,0),av(),Ey.getPlatform().btoa(this._binaryString)},uv.prototype.toUint8Array=function(){Fy("Blob.toUint8Array",arguments,0),ov();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},uv.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},uv.prototype.isEqual=function(e){return this._binaryString===e._binaryString},uv.prototype._compareTo=function(e){return nv(this._binaryString,e._binaryString)},uv);function uv(e){av(),this._binaryString=e}var cv=Dy(sv,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),lv=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},hv="(default)",fv=(Object.defineProperty(pv.prototype,"isDefaultDatabase",{get:function(){return this.database===hv},enumerable:!0,configurable:!0}),pv.prototype.isEqual=function(e){return e instanceof pv&&e.projectId===this.projectId&&e.database===this.database},pv.prototype.compareTo=function(e){return nv(this.projectId,e.projectId)||nv(this.database,e.database)},pv);function pv(e,t){this.projectId=e,this.database=t||hv}var dv=(mv.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},mv.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},mv.INVALID=-1,mv);function mv(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var yv="__name__",vv=(Object.defineProperty(gv.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),gv.prototype.isEqual=function(e){return 0===gv.comparator(this,e)},gv.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof gv?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},gv.prototype.limit=function(){return this.offset+this.length},gv.prototype.popFirst=function(e){return e=void 0===e?1:e,Ty(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},gv.prototype.popLast=function(){return Ty(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},gv.prototype.firstSegment=function(){return Ty(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},gv.prototype.lastSegment=function(){return this.get(this.length-1)},gv.prototype.get=function(e){return Ty(e<this.length,"Index out of range"),this.segments[this.offset+e]},gv.prototype.isEmpty=function(){return 0===this.length},gv.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},gv.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},gv.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},gv.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},gv.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},gv);function gv(e,t,n){void 0===t?t=0:t>e.length&&_y("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&_y("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var bv,wv=(Zo(_v,bv=vv),_v.prototype.construct=function(e,t,n){return new _v(e,t,n)},_v.prototype.canonicalString=function(){return this.toArray().join("/")},_v.prototype.toString=function(){return this.canonicalString()},_v.fromString=function(e){if(0<=e.indexOf("//"))throw new Ny(ky.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new _v(e.split("/").filter((function(e){return 0<e.length})))},_v.EMPTY_PATH=new _v([]),_v);function _v(){return null!==bv&&bv.apply(this,arguments)||this}var Tv,Ev=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sv=(Zo(Cv,Tv=vv),Cv.prototype.construct=function(e,t,n){return new Cv(e,t,n)},Cv.isValidIdentifier=function(e){return Ev.test(e)},Cv.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),Cv.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},Cv.prototype.toString=function(){return this.canonicalString()},Cv.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===yv},Cv.keyField=function(){return new Cv([yv])},Cv.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new Ny(ky.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new Ny(ky.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ny(ky.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Ny(ky.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cv(t)},Cv.EMPTY_PATH=new Cv([]),Cv);function Cv(){return null!==Tv&&Tv.apply(this,arguments)||this}var Iv=(kv.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},kv.prototype.isEqual=function(e){return null!==e&&0===wv.comparator(this.path,e.path)},kv.prototype.toString=function(){return this.path.toString()},kv.comparator=function(e,t){return wv.comparator(e.path,t.path)},kv.isDocumentKey=function(e){return e.length%2==0},kv.fromSegments=function(e){return new kv(new wv(e.slice()))},kv.fromPathString=function(e){return new kv(wv.fromString(e))},kv.EMPTY=new kv(new wv([])),kv);function kv(e){this.path=e,Ty(kv.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var Nv,Av,Dv=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};(Av=Nv=Nv||{}).All="all",Av.ListenStreamIdle="listen_stream_idle",Av.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Av.WriteStreamIdle="write_stream_idle",Av.WriteStreamConnectionBackoff="write_stream_connection_backoff",Av.OnlineStateTimeout="online_state_timeout",Av.ClientMetadataRefresh="client_metadata_refresh",Av.LruGarbageCollection="lru_garbage_collection",Av.RetryTransaction="retry_transaction";var Rv=(Ov.createAndSchedule=function(e,t,n,r,i){var o=new Ov(e,t,Date.now()+n,r,i);return o.start(n),o},Ov.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},Ov.prototype.skipDelay=function(){return this.handleDelayElapsed()},Ov.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ny(ky.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Ov.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},Ov.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Ov);function Ov(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}var xv=(Object.defineProperty(Pv.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Pv.prototype.enqueueAndForget=function(e){this.enqueue(e)},Pv.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},Pv.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},Pv.prototype.enqueueAndInitiateShutdown=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Pv.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},Pv.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw by("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},Pv.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),Ty(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Rv.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},Pv.prototype.verifyNotFailed=function(){this.failure&&_y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Pv.prototype.verifyOperationInProgress=function(){Ty(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Pv.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},Pv.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Pv.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){Ty(e===Nv.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Nv.All&&i.timerId===e)break}return t.drain()}))},Pv.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},Pv.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);Ty(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Pv);function Pv(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var Mv="\x01",Lv="\x01",Fv="\x10",Uv="\x11";function jv(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=qv(t)),t=Vv(e.get(n),t);return qv(t)}function Vv(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Mv+Fv;break;case Mv:n+=Mv+Uv;break;default:n+=o}}return n}function qv(e){return e+Mv+Lv}function Bv(e){var t=e.length;if(Ty(2<=t,"Invalid path "+e),2===t)return Ty(e.charAt(0)===Mv&&e.charAt(1)===Lv,"Non-empty path "+e+" had length 2"),wv.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Mv,o);switch((a<0||n<a)&&_y('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case Lv:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case Fv:i+=e.substring(o,a),i+="\0";break;case Uv:i+=e.substring(o,a+1);break;default:_y('Invalid encoded resource path: "'+e+'"')}o=a+2}return new wv(r)}var Wv=(zv.now=function(){return zv.fromMillis(Date.now())},zv.fromDate=function(e){return zv.fromMillis(e.getTime())},zv.fromMillis=function(e){var t=Math.floor(e/1e3);return new zv(t,1e6*(e-1e3*t))},zv.prototype.toDate=function(){return new Date(this.toMillis())},zv.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},zv.prototype._compareTo=function(e){return this.seconds===e.seconds?nv(this.nanoseconds,e.nanoseconds):nv(this.seconds,e.seconds)},zv.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},zv.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},zv);function zv(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Ny(ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Ny(ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ny(ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Ny(ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var Kv=(Hv.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new Hv(new Wv(t,e%1e6*1e3))},Hv.fromTimestamp=function(e){return new Hv(e)},Hv.forDeletedDoc=function(){return Hv.MIN},Hv.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},Hv.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},Hv.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Hv.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Hv.prototype.toTimestamp=function(){return this.timestamp},Hv.MIN=new Hv(new Wv(0,0)),Hv);function Hv(e){this.timestamp=e}var Qv=(Gv.prototype.insert=function(e,t){return new Gv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$v.BLACK,null,null))},Gv.prototype.remove=function(e){return new Gv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$v.BLACK,null,null))},Gv.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},Gv.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},Gv.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Gv.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Gv.prototype.minKey=function(){return this.root.minKey()},Gv.prototype.maxKey=function(){return this.root.maxKey()},Gv.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},Gv.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},Gv.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},Gv.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},Gv.prototype.getIterator=function(){return new Yv(this.root,null,this.comparator,!1)},Gv.prototype.getIteratorFrom=function(e){return new Yv(this.root,e,this.comparator,!1)},Gv.prototype.getReverseIterator=function(){return new Yv(this.root,null,this.comparator,!0)},Gv.prototype.getReverseIteratorFrom=function(e){return new Yv(this.root,e,this.comparator,!0)},Gv);function Gv(e,t){this.comparator=e,this.root=t||$v.EMPTY}var Yv=(Xv.prototype.getNext=function(){Ty(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Xv.prototype.hasNext=function(){return 0<this.nodeStack.length},Xv.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Xv);function Xv(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var $v=(Jv.prototype.copy=function(e,t,n,r,i){return new Jv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Jv.prototype.isEmpty=function(){return!1},Jv.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Jv.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Jv.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Jv.prototype.minKey=function(){return this.min().key},Jv.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Jv.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Jv.prototype.removeMin=function(){if(this.left.isEmpty())return Jv.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Jv.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Jv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Jv.prototype.isRed=function(){return this.color},Jv.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Jv.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Jv.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Jv.prototype.rotateLeft=function(){var e=this.copy(null,null,Jv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Jv.prototype.rotateRight=function(){var e=this.copy(null,null,Jv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Jv.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Jv.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Jv.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw _y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw _y("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw _y("Black depths differ");return e+(this.isRed()?0:1)},Jv.EMPTY=null,Jv.RED=!0,Jv.BLACK=!1,Jv);function Jv(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Jv.RED,this.left=null!=r?r:Jv.EMPTY,this.right=null!=i?i:Jv.EMPTY,this.size=this.left.size+1+this.right.size}var Zv=(Object.defineProperty(eg.prototype,"key",{get:function(){throw _y("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(eg.prototype,"value",{get:function(){throw _y("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(eg.prototype,"color",{get:function(){throw _y("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(eg.prototype,"left",{get:function(){throw _y("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(eg.prototype,"right",{get:function(){throw _y("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),eg.prototype.copy=function(e,t,n,r,i){return this},eg.prototype.insert=function(e,t,n){return new $v(e,t)},eg.prototype.remove=function(e,t){return this},eg.prototype.isEmpty=function(){return!0},eg.prototype.inorderTraversal=function(e){return!1},eg.prototype.reverseTraversal=function(e){return!1},eg.prototype.minKey=function(){return null},eg.prototype.maxKey=function(){return null},eg.prototype.isRed=function(){return!1},eg.prototype.checkMaxDepth=function(){return!0},eg.prototype.check=function(){return 0},eg);function eg(){this.size=0}$v.EMPTY=new Zv;var tg=(ng.fromMapKeys=function(e){var t=new ng(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},ng.prototype.has=function(e){return null!==this.data.get(e)},ng.prototype.first=function(){return this.data.minKey()},ng.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(ng.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),ng.prototype.indexOf=function(e){return this.data.indexOf(e)},ng.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},ng.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},ng.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},ng.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},ng.prototype.getIterator=function(){return new rg(this.data.getIterator())},ng.prototype.getIteratorFrom=function(e){return new rg(this.data.getIteratorFrom(e))},ng.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},ng.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},ng.prototype.isEmpty=function(){return this.data.isEmpty()},ng.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},ng.prototype.isEqual=function(e){if(!(e instanceof ng))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},ng.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},ng.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},ng.prototype.copy=function(e){var t=new ng(this.comparator);return t.data=e,t},ng);function ng(e){this.comparator=e,this.data=new Qv(this.comparator)}var rg=(ig.prototype.getNext=function(){return this.iter.getNext().key},ig.prototype.hasNext=function(){return this.iter.hasNext()},ig);function ig(e){this.iter=e}var og=new Qv(Iv.comparator);function ag(){return og}function sg(){return ag()}var ug=new Qv(Iv.comparator);function cg(){return ug}var lg=new Qv(Iv.comparator);function hg(){return lg}var fg=new tg(Iv.comparator);function pg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=fg,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var dg=new tg(nv);function mg(){return dg}var yg=(vg.prototype.applyToRemoteDocument=function(e,t,n){t&&Ty(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;Ty(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},vg.prototype.applyToLocalView=function(e,t){t&&Ty(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},vg.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},vg.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),pg())},vg.prototype.isEqual=function(e){return this.batchId===e.batchId&&rv(this.mutations,e.mutations)&&rv(this.baseMutations,e.baseMutations)},vg);function vg(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,Ty(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var gg=(bg.from=function(e,t,n,r){Ty(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=hg(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new bg(e,t,n,r,i)},bg);function bg(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var wg=(_g.prototype.catch=function(e){return this.next(void 0,e)},_g.prototype.next=function(e,t){var n=this;return this.callbackAttached&&_y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _g((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},_g.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},_g.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof _g?t:_g.resolve(t)}catch(e){return _g.reject(e)}},_g.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):_g.resolve(t)},_g.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):_g.reject(t)},_g.resolve=function(e){return new _g((function(t,n){t(e)}))},_g.reject=function(e){return new _g((function(t,n){n(e)}))},_g.waitFor=function(e){return new _g((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},_g.or=function(e){for(var t=_g.resolve(!1),n=function(e){t=t.next((function(t){return t?_g.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},_g.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},_g);function _g(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}var Tg="SimpleDb",Eg=(Sg.openOrCreate=function(e,t,n){return Ty(Sg.isAvailable(),"IndexedDB not supported in current environment."),gy(Tg,"Opening database:",e),new wg((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Sg(t))},o.onblocked=function(){i(new Ny(ky.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new Ny(ky.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){gy(Tg,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,Bw).next((function(){gy(Tg,"Database upgrade to version "+Bw+" complete")}))}})).toPromise()},Sg.delete=function(e){return gy(Tg,"Removing database:",e),Rg(window.indexedDB.deleteDatabase(e)).toPromise()},Sg.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Sg.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=va(),t=Sg.getIOSVersion(e),n=0<t&&t<10,r=Sg.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Sg.isMockPersistence=function(){return"undefined"!=typeof n&&"YES"===Object({NODE_ENV:"production",PUBLIC_URL:""}).USE_MOCK_PERSISTENCE},Sg.getStore=function(e,t){return e.store(t)},Sg.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Sg.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Sg.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Sg.prototype.runTransaction=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i,o,a,s,u;return na(this,(function(c){switch(c.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,u,c;return na(this,(function(l){switch(l.label){case 0:++o,e=kg.open(s.db,r?"readonly":"readwrite",t),l.label=1;case 1:return l.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),wg.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return l.sent(),[2,{value:a}];case 3:return u=l.sent(),c=i&&"FirebaseError"!==u.name&&o<3,gy(Tg,"Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=c.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},Sg.prototype.close=function(){this.db.close()},Sg);function Sg(e){this.db=e,12.2===Sg.getIOSVersion(va())&&by("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var Cg=(Object.defineProperty(Ig.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Ig.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Ig.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Ig.prototype.done=function(){this.shouldStop=!0},Ig.prototype.skip=function(e){this.nextKey=e},Ig.prototype.delete=function(){return Rg(this.dbCursor.delete())},Ig);function Ig(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var kg=(Ng.open=function(e,t,n){return new Ng(e.transaction(n,t))},Object.defineProperty(Ng.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Ng.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(gy(Tg,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Ng.prototype.store=function(e){var t=this.transaction.objectStore(e);return Ty(!!t,"Object store not part of transaction: "+e),new Ag(t)},Ng);function Ng(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Dv,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=xg(e.target.error);t.completionDeferred.reject(n)}}var Ag=(Dg.prototype.put=function(e,t){return Rg(void 0!==t?(gy(Tg,"PUT",this.store.name,e,t),this.store.put(t,e)):(gy(Tg,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Dg.prototype.add=function(e){return gy(Tg,"ADD",this.store.name,e,e),Rg(this.store.add(e))},Dg.prototype.get=function(e){var t=this;return Rg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),gy(Tg,"GET",t.store.name,e,n),n}))},Dg.prototype.delete=function(e){return gy(Tg,"DELETE",this.store.name,e),Rg(this.store.delete(e))},Dg.prototype.count=function(){return gy(Tg,"COUNT",this.store.name),Rg(this.store.count())},Dg.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},Dg.prototype.deleteAll=function(e,t){gy(Tg,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},Dg.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Dg.prototype.iterateSerial=function(e){var t=this.cursor({});return new wg((function(n,r){t.onerror=function(e){var t=xg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},Dg.prototype.iterateCursor=function(e,t){var n=[];return new wg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Cg(i),a=t(i.primaryKey,i.value,o);if(a instanceof wg){var s=a.catch((function(e){return o.done(),wg.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return wg.waitFor(n)}))},Dg.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(Ty(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Dg.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Dg);function Dg(e){this.store=e}function Rg(e){return new wg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=xg(e.target.error);n(t)}}))}var Og=!1;function xg(e){var t=Eg.getIOSVersion(va());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new Ny("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Og||(Og=!0,setTimeout((function(){throw r}),0)),r}}return e}var Pg,Mg,Lg=(Fg.forUser=function(e,t,n,r){return Ty(""!==e.uid,"UserID must not be an empty string."),new Fg(e.isAuthenticated()?e.uid:"",t,n,r)},Fg.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qg(e).iterate({index:Xw.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},Fg.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=Vg(n),Wg(e).put(t)}))},Fg.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},Fg.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=Vg(t),Wg(e).put(n)}))},Fg.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Bg(e),a=qg(e);return a.add({}).next((function(s){Ty("number"==typeof s,"Auto-generated key is not a number");for(var u=new yg(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new tg((function(e,t){return nv(e.canonicalString(),t.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],m=Jw.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Jw.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),wg.waitFor(l).next((function(){return u}))}))},Fg.prototype.lookupMutationBatch=function(e,t){var n=this;return qg(e).get(t).next((function(e){return e?(Ty(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},Fg.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?wg.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},Fg.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return qg(e).iterate({index:Xw.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Ty(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},Fg.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qg(e).iterate({index:Xw.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},Fg.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qg(e).loadAll(Xw.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},Fg.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Jw.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Bg(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Bv(u);if(s===n.userId&&t.path.isEqual(l))return qg(e).get(c).next((function(e){if(!e)throw _y("Dangling document-mutation reference found: "+r+" which points to "+c);Ty(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},Fg.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tg(nv),i=[];return t.forEach((function(t){var o=Jw.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Bg(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Bv(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),wg.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},Fg.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;Ty(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),Ty(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Jw.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new tg(nv);return Bg(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Bv(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},Fg.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(qg(e).get(t).next((function(e){if(null===e)throw _y("Dangling document-mutation reference found, which points to "+t);Ty(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),wg.waitFor(i).next((function(){return r}))},Fg.prototype.removeMutationBatch=function(e,t){var n=this;return jg(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),wg.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},Fg.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},Fg.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wg.resolve();var r=IDBKeyRange.lowerBound(Jw.prefixForUser(t.userId)),i=[];return Bg(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Bv(e[1]);i.push(o)}else r.done()})).next((function(){Ty(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},Fg.prototype.containsKey=function(e,t){return Ug(e,this.userId,t)},Fg.prototype.getMutationQueueMetadata=function(e){var t=this;return Wg(e).get(this.userId).next((function(e){return e||new Gw(t.userId,-1,"")}))},Fg);function Fg(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Ug(e,t,n){var r=Jw.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Bg(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function jg(e,t,n){var r=e.store(Xw.store),i=e.store(Jw.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Ty(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Jw.key(t,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return wg.waitFor(o).next((function(){return c}))}function Vg(e){return e instanceof Uint8Array?(Ty(Eg.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function qg(e){return K_.getStore(e,Xw.store)}function Bg(e){return K_.getStore(e,Jw.store)}function Wg(e){return K_.getStore(e,Gw.store)}(Mg=Pg=Pg||{})[Mg.QueryCache=0]="QueryCache",Mg[Mg.SyncEngine=1]="SyncEngine";var zg=(Kg.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},Kg.prototype.after=function(e){return this.seek(e+2),this.next()},Kg.prototype.seek=function(e){Ty((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},Kg.forTargetCache=function(){return new Kg(Pg.QueryCache,2)},Kg.forSyncEngine=function(){return new Kg(Pg.SyncEngine)},Kg);function Kg(e,t){Ty((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var Hg=(Qg.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},Qg.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return Kv.fromTimestamp(new Wv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},Qg.prototype.getHighestSequenceNumber=function(e){return Xg(e.simpleDbTransaction)},Qg.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},Qg.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},Qg.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},Qg.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Gg(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return Ty(0<t.targetCount,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},Qg.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Gg(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return wg.waitFor(o)})).next((function(){return i}))},Qg.prototype.forEachTarget=function(e,t){var n=this;return Gg(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},Qg.prototype.retrieveMetadata=function(e){return Yg(e.simpleDbTransaction)},Qg.prototype.saveMetadata=function(e,t){return function(e){return K_.getStore(e,l_.store)}(e).put(l_.key,t)},Qg.prototype.saveTargetData=function(e,t){return Gg(e).put(this.serializer.toDbTarget(t))},Qg.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Qg.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},Qg.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Gg(e).iterate({range:i,index:a_.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},Qg.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=$g(e);return t.forEach((function(t){var a=jv(t.path);i.push(o.put(new u_(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),wg.waitFor(i)},Qg.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=$g(e);return wg.forEach(t,(function(t){var o=jv(t.path);return wg.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},Qg.prototype.removeMatchingKeysForTargetId=function(e,t){var n=$g(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Qg.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$g(e),i=pg();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Bv(e[1]),o=new Iv(r);i=i.add(o)})).next((function(){return i}))},Qg.prototype.containsKey=function(e,t){var n=jv(t.path),r=IDBKeyRange.bound([n],[iv(n)],!1,!0),i=0;return $g(e).iterate({index:u_.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},Qg.prototype.getTargetDataForTarget=function(e,t){var n=this;return Gg(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},Qg);function Qg(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=zg.forTargetCache()}function Gg(e){return K_.getStore(e,a_.store)}function Yg(e){return Eg.getStore(e,l_.store).get(l_.key).next((function(e){return Ty(null!==e,"Missing metadata row."),e}))}function Xg(e){return Yg(e).next((function(e){return e.highestListenSequenceNumber}))}function $g(e){return K_.getStore(e,u_.store)}var Jg=(Zg.fromSet=function(e){return new Zg(e)},Zg.fromArray=function(e){var t=new tg(Sv.comparator);return e.forEach((function(e){return t=t.add(e)})),new Zg(t)},Zg.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},Zg.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Zg);function Zg(e){this.fields=e}var eb=(tb.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},tb);function tb(e,t){this.field=e,this.transform=t}var nb,rb,ib=function(e,t){this.version=e,this.transformResults=t};(rb=nb=nb||{})[rb.Set=0]="Set",rb[rb.Patch=1]="Patch",rb[rb.Transform=2]="Transform",rb[rb.Delete=3]="Delete";var ob=(ab.exists=function(e){return new ab(void 0,e)},ab.updateTime=function(e){return new ab(e)},Object.defineProperty(ab.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),ab.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof gw&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof gw:(Ty(this.isNone,"Precondition should be empty"),!0)},ab.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},ab.NONE=new ab,ab);function ab(e,t){this.updateTime=e,this.exists=t,Ty(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var sb=(ub.prototype.verifyKeyMatches=function(e){null!=e&&Ty(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},ub.getPostMutationVersion=function(e){return e instanceof gw?e.version:Kv.MIN},ub);function ub(){}var cb,lb=(Zo(hb,cb=sb),hb.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),Ty(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new gw(this.key,n,{hasCommittedMutations:!0},this.value)},hb.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=sb.getPostMutationVersion(e);return new gw(this.key,r,{hasLocalMutations:!0},this.value)},hb.prototype.extractBaseValue=function(e){return null},hb.prototype.isEqual=function(e){return e instanceof hb&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},hb);function hb(e,t,n){var r=cb.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=nb.Set,r}var fb,pb=(Zo(db,fb=sb),db.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Ty(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Sw(this.key,t.version);var n=this.patchDocument(e);return new gw(this.key,t.version,{hasCommittedMutations:!0},n)},db.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=sb.getPostMutationVersion(e),i=this.patchDocument(e);return new gw(this.key,r,{hasLocalMutations:!0},i)},db.prototype.extractBaseValue=function(e){return null},db.prototype.isEqual=function(e){return e instanceof db&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},db.prototype.patchDocument=function(e){var t;return t=e instanceof gw?e.data():lw.EMPTY,this.patchObject(t)},db.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},db);function db(e,t,n,r){var i=fb.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=nb.Patch,i}var mb,yb=(Zo(vb,mb=sb),vb.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Ty(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Sw(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new gw(this.key,i,{hasCommittedMutations:!0},o)},vb.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new gw(this.key,r.version,{hasLocalMutations:!0},o)},vb.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof gw?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?lw.EMPTY.set(i.field,a):t.set(i.field,a))}return t},vb.prototype.isEqual=function(e){return e instanceof vb&&this.key.isEqual(e.key)&&rv(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},vb.prototype.requireDocument=function(e){Ty(e instanceof gw,"Unknown MaybeDocument type "+e);var t=e;return Ty(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},vb.prototype.serverTransformResults=function(e,t){var n=[];Ty(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof gw&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},vb.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof gw&&(u=t.field(a.field)),null===u&&n instanceof gw&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},vb.prototype.transformObject=function(e,t){Ty(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},vb);function vb(e,t){var n=mb.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=nb.Transform,n.precondition=ob.exists(!0),n}var gb,bb,wb,_b,Tb,Eb=(Zo(Sb,gb=sb),Sb.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),Ty(null==t.transformResults,"Transform results received by DeleteMutation."),new _w(this.key,t.version,{hasCommittedMutations:!0})},Sb.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&Ty(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new _w(this.key,Kv.forDeletedDoc())):e},Sb.prototype.extractBaseValue=function(e){return null},Sb.prototype.isEqual=function(e){return e instanceof Sb&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Sb);function Sb(e,t){var n=gb.call(this)||this;return n.key=e,n.precondition=t,n.type=nb.Delete,n}(wb=bb=bb||{})[wb.NullValue=0]="NullValue",wb[wb.BooleanValue=1]="BooleanValue",wb[wb.NumberValue=2]="NumberValue",wb[wb.TimestampValue=3]="TimestampValue",wb[wb.StringValue=4]="StringValue",wb[wb.BlobValue=5]="BlobValue",wb[wb.RefValue=6]="RefValue",wb[wb.GeoPointValue=7]="GeoPointValue",wb[wb.ArrayValue=8]="ArrayValue",wb[wb.ObjectValue=9]="ObjectValue",(Tb=_b=_b||{})[Tb.Default=0]="Default",Tb[Tb.Estimate=1]="Estimate",Tb[Tb.Previous=2]="Previous";var Cb=(Ib.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Ib(_b.Estimate,t);case"previous":return new Ib(_b.Previous,t);case"none":case void 0:return new Ib(_b.Default,t);default:return _y("fromSnapshotOptions() called with invalid options.")}},Ib);function Ib(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var kb=(Nb.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Nb.prototype.defaultCompareTo=function(e){return Ty(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),nv(this.typeOrder,e.typeOrder)},Nb);function Nb(){}var Ab,Db=(Zo(Rb,Ab=kb),Rb.prototype.value=function(e){return null},Rb.prototype.isEqual=function(e){return e instanceof Rb},Rb.prototype.compareTo=function(e){return e instanceof Rb?0:this.defaultCompareTo(e)},Rb.INSTANCE=new Rb,Rb);function Rb(){var e=Ab.call(this)||this;return e.typeOrder=bb.NullValue,e.internalValue=null,e}var Ob,xb=(Zo(Pb,Ob=kb),Pb.prototype.value=function(e){return this.internalValue},Pb.prototype.isEqual=function(e){return e instanceof Pb&&this.internalValue===e.internalValue},Pb.prototype.compareTo=function(e){return e instanceof Pb?nv(this,e):this.defaultCompareTo(e)},Pb.of=function(e){return e?Pb.TRUE:Pb.FALSE},Pb.TRUE=new Pb(!0),Pb.FALSE=new Pb(!1),Pb);function Pb(e){var t=Ob.call(this)||this;return t.internalValue=e,t.typeOrder=bb.BooleanValue,t}var Mb,Lb=(Zo(Fb,Mb=kb),Fb.prototype.value=function(e){return this.internalValue},Fb.prototype.compareTo=function(e){return e instanceof Fb?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Fb);function Fb(e){var t=Mb.call(this)||this;return t.internalValue=e,t.typeOrder=bb.NumberValue,t}function Ub(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var jb,Vb=(Zo(qb,jb=Lb),qb.prototype.isEqual=function(e){return e instanceof qb&&Ub(this.internalValue,e.internalValue)},qb);function qb(){return null!==jb&&jb.apply(this,arguments)||this}var Bb,Wb=(Zo(zb,Bb=Lb),zb.prototype.isEqual=function(e){return e instanceof zb&&Ub(this.internalValue,e.internalValue)},zb.NAN=new zb(NaN),zb.POSITIVE_INFINITY=new zb(1/0),zb.NEGATIVE_INFINITY=new zb(-1/0),zb);function zb(){return null!==Bb&&Bb.apply(this,arguments)||this}var Kb,Hb=(Zo(Qb,Kb=kb),Qb.prototype.value=function(e){return this.internalValue},Qb.prototype.isEqual=function(e){return e instanceof Qb&&this.internalValue===e.internalValue},Qb.prototype.compareTo=function(e){return e instanceof Qb?nv(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Qb);function Qb(e){var t=Kb.call(this)||this;return t.internalValue=e,t.typeOrder=bb.StringValue,t}var Gb,Yb=(Zo(Xb,Gb=kb),Xb.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Xb.prototype.isEqual=function(e){return e instanceof Xb&&this.internalValue.isEqual(e.internalValue)},Xb.prototype.compareTo=function(e){return e instanceof Xb?this.internalValue._compareTo(e.internalValue):e instanceof Jb?-1:this.defaultCompareTo(e)},Xb);function Xb(e){var t=Gb.call(this)||this;return t.internalValue=e,t.typeOrder=bb.TimestampValue,t}var $b,Jb=(Zo(Zb,$b=kb),Zb.prototype.value=function(e){return e&&e.serverTimestampBehavior===_b.Estimate?new Yb(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===_b.Previous&&this.previousValue?this.previousValue.value(e):null},Zb.prototype.isEqual=function(e){return e instanceof Zb&&this.localWriteTime.isEqual(e.localWriteTime)},Zb.prototype.compareTo=function(e){return e instanceof Zb?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Yb?1:this.defaultCompareTo(e)},Zb.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Zb);function Zb(e,t){var n=$b.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=bb.TimestampValue,n}var ew,tw=(Zo(nw,ew=kb),nw.prototype.value=function(e){return this.internalValue},nw.prototype.isEqual=function(e){return e instanceof nw&&this.internalValue.isEqual(e.internalValue)},nw.prototype.compareTo=function(e){return e instanceof nw?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},nw);function nw(e){var t=ew.call(this)||this;return t.internalValue=e,t.typeOrder=bb.BlobValue,t}var rw,iw=(Zo(ow,rw=kb),ow.prototype.value=function(e){return this.key},ow.prototype.isEqual=function(e){return e instanceof ow&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},ow.prototype.compareTo=function(e){if(e instanceof ow){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Iv.comparator(this.key,e.key)}return this.defaultCompareTo(e)},ow);function ow(e,t){var n=rw.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=bb.RefValue,n}var aw,sw=(Zo(uw,aw=kb),uw.prototype.value=function(e){return this.internalValue},uw.prototype.isEqual=function(e){return e instanceof uw&&this.internalValue.isEqual(e.internalValue)},uw.prototype.compareTo=function(e){return e instanceof uw?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},uw);function uw(e){var t=aw.call(this)||this;return t.internalValue=e,t.typeOrder=bb.GeoPointValue,t}var cw,lw=(Zo(hw,cw=kb),hw.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},hw.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},hw.prototype.isEqual=function(e){if(e instanceof hw){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},hw.prototype.compareTo=function(e){if(e instanceof hw){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=nv(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return nv(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},hw.prototype.set=function(e,t){if(Ty(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof hw||(n=hw.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},hw.prototype.delete=function(e){if(Ty(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new hw(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof hw){var n=t.delete(e.popFirst());return new hw(this.internalValue.insert(e.firstSegment(),n))}return this},hw.prototype.contains=function(e){return null!==this.field(e)},hw.prototype.field=function(e){Ty(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof hw?t.internalValue.get(e):null})),t},hw.prototype.fieldMask=function(){var e=new tg(Sv.comparator);return this.internalValue.forEach((function(t,n){var r=new Sv([t]);if(n instanceof hw){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),Jg.fromSet(e)},hw.prototype.toString=function(){return this.internalValue.toString()},hw.prototype.child=function(e){return this.internalValue.get(e)||void 0},hw.prototype.setChild=function(e,t){return new hw(this.internalValue.insert(e,t))},hw.EMPTY=new hw(new Qv(nv)),hw);function hw(e){var t=cw.call(this)||this;return t.internalValue=e,t.typeOrder=bb.ObjectValue,t}var fw,pw=(Zo(dw,fw=kb),dw.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},dw.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},dw.prototype.forEach=function(e){this.internalValue.forEach(e)},dw.prototype.isEqual=function(e){if(e instanceof dw){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},dw.prototype.compareTo=function(e){if(e instanceof dw){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return nv(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},dw.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},dw);function dw(e){var t=fw.call(this)||this;return t.internalValue=e,t.typeOrder=bb.ArrayValue,t}var mw=(yw.compareByKey=function(e,t){return Iv.comparator(e.key,t.key)},yw);function yw(e,t){this.key=e,this.version=t}var vw,gw=(Zo(bw,vw=mw),bw.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},bw.prototype.data=function(){var e=this;if(!this.objectValue){var t=lw.EMPTY;Py(this.proto.fields||{},(function(n,r){t=t.set(new Sv([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},bw.prototype.value=function(){return this.data().value()},bw.prototype.isEqual=function(e){return e instanceof bw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},bw.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(bw.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),bw.prototype.getProtoField=function(e){Ty(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},bw.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):_y("Trying to compare documents on fields that don't exist")},bw);function bw(e,t,n,r,i,o){var a=vw.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,Ty(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var ww,_w=(Zo(Tw,ww=mw),Tw.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Tw.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Tw.prototype.isEqual=function(e){return e instanceof Tw&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Tw);function Tw(e,t,n){var r=ww.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Ew,Sw=(Zo(Cw,Ew=mw),Cw.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Cw.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Cw.prototype.isEqual=function(e){return e instanceof Cw&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Cw);function Cw(){return null!==Ew&&Ew.apply(this,arguments)||this}var Iw=(kw.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},kw.prototype.has=function(e){return void 0!==this.get(e)},kw.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},kw.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},kw.prototype.forEach=function(e){Py(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},kw.prototype.isEmpty=function(){return My(this.inner)},kw);function kw(e){this.mapKeyFn=e,this.inner={}}var Nw=(Object.defineProperty(Aw.prototype,"readTime",{get:function(){return Ty(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){Ty(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Aw.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Aw.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Aw.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wg.resolve(n):this.getFromCache(e,t)},Aw.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Aw.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Aw.prototype.assertNotApplied=function(){Ty(!this.changesApplied,"Changes have already been applied.")},Aw);function Aw(){this.changes=new Iw((function(e){return e.toString()})),this.changesApplied=!1}var Dw,Rw=(Ow.prototype.addEntry=function(e,t,n){return Mw(e).put(Lw(t),n)},Ow.prototype.removeEntry=function(e,t){var n=Mw(e),r=Lw(t);return n.delete(r)},Ow.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},Ow.prototype.getEntry=function(e,t){var n=this;return Mw(e).get(Lw(t)).next((function(e){return n.maybeDecodeDocument(e)}))},Ow.prototype.getSizedEntry=function(e,t){var n=this;return Mw(e).get(Lw(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Fw(e)}:null}))},Ow.prototype.getEntries=function(e,t){var n=this,r=sg();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},Ow.prototype.getSizedEntries=function(e,t){var n=this,r=sg(),i=new Qv(Iv.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,Fw(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},Ow.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return wg.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Mw(e).iterate({range:r},(function(e,t,r){for(var a=Iv.fromSegments(e);o&&Iv.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},Ow.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;Ty(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=cg(),o=t.path.length+1,a={};if(n.isEqual(Kv.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=n_.collectionReadTimeIndex}return Mw(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof gw&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},Ow.prototype.getNewDocumentChanges=function(e,t){var n=this,r=ag(),i=this.serializer.toDbTimestampKey(t),o=Mw(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:n_.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},Ow.prototype.getLastDocumentChange=function(e){var t,n=this,r=Mw(e),i=Kv.MIN;return r.iterate({index:n_.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},Ow.prototype.newChangeBuffer=function(e){return new Ow.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},Ow.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},Ow.prototype.getMetadata=function(e){return Pw(e).get(i_.key).next((function(e){return Ty(!!e,"Missing document cache metadata"),e}))},Ow.prototype.setMetadata=function(e,t){return Pw(e).put(i_.key,t)},Ow.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof _w&&t.version.isEqual(Kv.forDeletedDoc())?null:t}return null},Ow.RemoteDocumentChangeBuffer=(Zo(xw,Dw=Nw),xw.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new tg((function(e,t){return nv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(Ty(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){Ty(!t.readTime.isEqual(Kv.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=Fw(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new _w(o,Kv.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),wg.waitFor(n)},xw.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},xw.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},xw),Ow);function Ow(e,t){this.serializer=e,this.indexManager=t}function xw(e,t){var n=Dw.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new Iw((function(e){return e.toString()})),n}function Pw(e){return K_.getStore(e,i_.store)}function Mw(e){return K_.getStore(e,n_.store)}function Lw(e){return e.path.toArray()}function Fw(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw _y("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Uw=(jw.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),wg.resolve()},jw.prototype.getCollectionParents=function(e,t){return wg.resolve(this.collectionParentIndex.getEntries(t))},jw);function jw(){this.collectionParentIndex=new Vw}var Vw=(qw.prototype.add=function(e){Ty(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tg(wv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},qw.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},qw.prototype.getEntries=function(e){return(this.index[e]||new tg(wv.comparator)).toArray()},qw);function qw(){this.index={}}var Bw=9,Ww=(zw.prototype.createOrUpgrade=function(e,t,n,r){var i=this;Ty(n<r&&0<=n&&r<=Bw,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new kg(t);n<1&&1<=r&&(function(e){e.createObjectStore(Hw.store)}(e),function(e){e.createObjectStore(Gw.store,{keyPath:Gw.keyPath}),e.createObjectStore(Xw.store,{keyPath:Xw.keyPath,autoIncrement:!0}).createIndex(Xw.userMutationsIndex,Xw.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Jw.store)}(e),d_(e),function(e){e.createObjectStore(n_.store)}(e));var a=wg.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(u_.store),e.deleteObjectStore(a_.store),e.deleteObjectStore(l_.store)}(e),d_(e)),a=a.next((function(){return function(e){var t=e.store(l_.store),n=new l_(0,0,Kv.MIN.toTimestamp(),0);return t.put(l_.key,n)}(o)}))),n<4&&4<=r&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Xw.store).loadAll().next((function(n){e.deleteObjectStore(Xw.store),e.createObjectStore(Xw.store,{keyPath:Xw.keyPath,autoIncrement:!0}).createIndex(Xw.userMutationsIndex,Xw.userMutationsKeyPath,{unique:!0});var r=t.store(Xw.store),i=n.map((function(e){return r.put(e)}));return wg.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(m_.store,{keyPath:m_.keyPath})}(e)}))),n<5&&5<=r&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&6<=r&&(a=a.next((function(){return function(e){e.createObjectStore(i_.store)}(e),i.addDocumentGlobal(o)}))),n<7&&7<=r&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&8<=r&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&9<=r&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(n_.store);t.createIndex(n_.readTimeIndex,n_.readTimeIndexPath,{unique:!1}),t.createIndex(n_.collectionReadTimeIndex,n_.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},zw.prototype.addDocumentGlobal=function(e){var t=0;return e.store(n_.store).iterate((function(e,n){t+=Fw(n)})).next((function(){var n=new i_(t);return e.store(i_.store).put(i_.key,n)}))},zw.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Gw.store),r=e.store(Xw.store);return n.loadAll().next((function(n){return wg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Xw.userMutationsIndex,i).next((function(r){return wg.forEach(r,(function(r){Ty(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return jg(e,n.userId,i).next((function(){}))}))}))}))}))},zw.prototype.ensureSequenceNumbers=function(e){var t=e.store(u_.store),n=e.store(n_.store);return Xg(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new wv(n),a=function(e){return[0,jv(e)]}(o);r.push(t.get(a).next((function(n){return n?wg.resolve():function(n){return t.put(new u_(0,jv(n),e))}(o)})))})).next((function(){return wg.waitFor(r)}))}))},zw.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:jv(n)})}}e.createObjectStore(f_.store,{keyPath:f_.keyPath});var r=t.store(f_.store),i=new Vw;return t.store(n_.store).iterate({keysOnly:!0},(function(e,t){return n(new wv(e).popLast())})).next((function(){return t.store(Jw.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],Bv(r)).popLast())}))}))},zw);function zw(e){this.serializer=e}var Kw=function(e,t){this.seconds=e,this.nanoseconds=t},Hw=(Qw.store="owner",Qw.key="owner",Qw);function Qw(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Gw=(Yw.store="mutationQueues",Yw.keyPath="userId",Yw);function Yw(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var Xw=($w.store="mutations",$w.keyPath="batchId",$w.userMutationsIndex="userMutationsIndex",$w.userMutationsKeyPath=["userId","batchId"],$w);function $w(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var Jw=(Zw.prefixForUser=function(e){return[e]},Zw.prefixForPath=function(e,t){return[e,jv(t)]},Zw.key=function(e,t,n){return[e,jv(t),n]},Zw.store="documentMutations",Zw.PLACEHOLDER=new Zw,Zw);function Zw(){}var e_=function(e,t){this.path=e,this.readTime=t},t_=function(e,t){this.path=e,this.version=t},n_=(r_.store="remoteDocuments",r_.readTimeIndex="readTimeIndex",r_.readTimeIndexPath="readTime",r_.collectionReadTimeIndex="collectionReadTimeIndex",r_.collectionReadTimeIndexPath=["parentPath","readTime"],r_);function r_(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var i_=(o_.store="remoteDocumentGlobal",o_.key="remoteDocumentGlobalKey",o_);function o_(e){this.byteSize=e}var a_=(s_.store="targets",s_.keyPath="targetId",s_.queryTargetsIndexName="queryTargetsIndex",s_.queryTargetsKeyPath=["canonicalId","targetId"],s_);function s_(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var u_=(c_.store="targetDocuments",c_.keyPath=["targetId","path"],c_.documentTargetsIndex="documentTargetsIndex",c_.documentTargetsKeyPath=["path","targetId"],c_);function c_(e,t,n){this.targetId=e,this.path=t,Ty(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var l_=(h_.key="targetGlobalKey",h_.store="targetGlobal",h_);function h_(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var f_=(p_.store="collectionParents",p_.keyPath=["collectionId","parent"],p_);function p_(e,t){this.collectionId=e,this.parent=t}function d_(e){e.createObjectStore(u_.store,{keyPath:u_.keyPath}).createIndex(u_.documentTargetsIndex,u_.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(a_.store,{keyPath:a_.keyPath}).createIndex(a_.queryTargetsIndexName,a_.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(l_.store)}var m_=(y_.store="clientMetadata",y_.keyPath="clientId",y_);function y_(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var v_,g_,b_=aa(aa(aa([Gw.store,Xw.store,Jw.store,n_.store,a_.store,Hw.store,l_.store,u_.store],[m_.store]),[i_.store]),[f_.store]),w_=(__.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(Ty(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return wg.resolve();var r=t.lastSegment(),i=t.popLast();return e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)})),T_(e).put({collectionId:r,parent:jv(i)})},__.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[iv(t),""],!1,!0);return T_(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Bv(o.parent))}return n}))},__);function __(){this.collectionParentsCache=new Vw}function T_(e){return K_.getStore(e,f_.store)}(g_=v_=v_||{})[g_.Listen=0]="Listen",g_[g_.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",g_[g_.LimboResolution=2]="LimboResolution";var E_=(S_.prototype.withSequenceNumber=function(e){return new S_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},S_.prototype.withResumeToken=function(e,t){return new S_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},S_.prototype.withLastLimboFreeSnapshotVersion=function(e){return new S_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},S_.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},S_);function S_(e,t,n,r,i,o,a){void 0===i&&(i=Kv.MIN),void 0===o&&(o=Kv.MIN),void 0===a&&(a=Cy()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var C_=(I_.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Iv.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new _w(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Iv.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Sw(t,n)):_y("Unexpected DbRemoteDocument")},I_.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof gw){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new n_(null,null,i,o,n,r)}if(e instanceof _w){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new n_(null,new e_(a,s),null,o,n,r)}if(e instanceof Sw){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new n_(new t_(a,u),null,null,!0,n,r)}return _y("Unexpected MaybeDocument")},I_.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},I_.prototype.fromDbTimestampKey=function(e){var t=new Wv(e[0],e[1]);return Kv.fromTimestamp(t)},I_.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Kw(t.seconds,t.nanoseconds)},I_.prototype.fromDbTimestamp=function(e){var t=new Wv(e.seconds,e.nanoseconds);return Kv.fromTimestamp(t)},I_.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new Xw(e,t.batchId,t.localWriteTime.toMillis(),r,i)},I_.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Wv.fromMillis(e.localWriteTimeMs);return new yg(e.batchId,i,n,r)},I_.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(jv(e.path))})),t},I_.prototype.fromDbResourcePaths=function(e){for(var t=pg(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Iv(Bv(i)))}return t},I_.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Kv.MIN,i=e.resumeToken;return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new E_(t,e.targetId,v_.Listen,e.lastListenSequenceNumber,n,r,i)},I_.prototype.toDbTarget=function(e){Ty(v_.Listen===e.purpose,"Only queries with purpose "+v_.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),n=e.resumeToken instanceof Uint8Array?(Ty(Eg.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new a_(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},I_);function I_(e){this.remoteSerializer=e}function k_(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=nv(n,i);return 0===a?nv(r,o):a}var N_=(A_.prototype.nextIndex=function(){return++this.previousIndex},A_.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();k_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(A_.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),A_);function A_(e){this.maxElements=e,this.buffer=new tg(k_),this.previousIndex=0}var D_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R_=(O_.withCacheSize=function(e){return new O_(e,O_.DEFAULT_COLLECTION_PERCENTILE,O_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},O_.COLLECTION_DISABLED=-1,O_.MINIMUM_CACHE_SIZE_BYTES=1048576,O_.DEFAULT=new O_(O_.DEFAULT_CACHE_SIZE_BYTES=41943040,O_.DEFAULT_COLLECTION_PERCENTILE=10,O_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),O_.DISABLED=new O_(O_.COLLECTION_DISABLED,0,0),O_);function O_(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var x_=(P_.prototype.start=function(){Ty(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==R_.COLLECTION_DISABLED&&this.scheduleGC()},P_.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(P_.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),P_.prototype.scheduleGC=function(){var e=this;Ty(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;gy("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Nv.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Q_)}))},P_);function P_(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var M_=(L_.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},L_.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wg.resolve(dv.INVALID);var r=new N_(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},L_.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},L_.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},L_.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===R_.COLLECTION_DISABLED?(gy("LruGarbageCollector","Garbage collection skipped; disabled"),wg.resolve(D_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(gy("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),D_):n.runGarbageCollection(e,t)}))},L_.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},L_.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(gy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),yy()<=ay.DEBUG&&gy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),wg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},L_);function L_(e,t){this.delegate=e,this.params=t}var F_=(U_.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},U_.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},U_);function U_(){this.onCommittedListeners=[]}var j_,V_="IndexedDbPersistence",q_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",B_="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",W_=(Zo(z_,j_=F_),z_);function z_(e,t){var n=j_.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var K_=(H_.getStore=function(e,t){if(e instanceof W_)return Eg.getStore(e.simpleDbTransaction,t);throw _y("IndexedDbPersistence must use instances of IndexedDbTransaction")},H_.createIndexedDbPersistence=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:if(!H_.isAvailable())throw new Ny(ky.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new H_(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},H_.prototype.start=function(){var e=this;return Ty(!this.started,"IndexedDbPersistence double-started!"),Ty(null!==this.window,"Expected 'window' to be defined"),Eg.openOrCreate(this.dbName,Bw,new Ww(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[l_.store],(function(e){return Xg(e)}))})).then((function(t){e.listenSequence=new dv(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},H_.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return ta(t,void 0,void 0,(function(){return na(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},H_.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return ta(t,void 0,void 0,(function(){return na(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},H_.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return ta(t,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},H_.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",b_,(function(t){return Y_(t).put(new m_(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return gy(V_,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},H_.prototype.verifyPrimaryLease=function(e){var t=this;return G_(e).get(Hw.key).next((function(e){return wg.resolve(t.isLocalClient(e))}))},H_.prototype.removeClientMetadata=function(e){return Y_(e).delete(this.clientId)},H_.prototype.maybeGarbageCollectMultiClientState=function(){return ta(this,void 0,void 0,(function(){var e=this;return na(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(t){var n=H_.getStore(t,m_.store);return n.loadAll().next((function(t){var r=e.filterActiveClients(t,18e5),i=t.filter((function(e){return-1===r.indexOf(e)}));return wg.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:t.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),t.label=2;case 2:return[2]}}))}))},H_.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Nv.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},H_.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},H_.prototype.canActAsPrimary=function(e){var t=this;return G_(e).get(Hw.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Ny(ky.FAILED_PRECONDITION,B_);return!1}}return!(!t.networkEnabled||!t.inForeground)||Y_(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&gy(V_,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},H_.prototype.shutdown=function(){return ta(this,void 0,void 0,(function(){var e=this;return na(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Hw.store,m_.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},H_.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},H_.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[m_.store],(function(t){return Y_(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},H_.clearPersistence=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return H_.isAvailable()?(t=e+H_.MAIN_DATABASE,[4,Eg.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(H_.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),H_.prototype.getMutationQueue=function(e){return Ty(this.started,"Cannot initialize MutationQueue before persistence is started."),Lg.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},H_.prototype.getTargetCache=function(){return Ty(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},H_.prototype.getRemoteDocumentCache=function(){return Ty(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},H_.prototype.getIndexManager=function(){return Ty(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},H_.prototype.runTransaction=function(e,t,n){var r=this;gy(V_,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,b_,(function(o){return i=new W_(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw by("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new Ny(ky.FAILED_PRECONDITION,q_);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},H_.prototype.verifyAllowTabSynchronization=function(e){var t=this;return G_(e).get(Hw.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Ny(ky.FAILED_PRECONDITION,B_)}))},H_.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Hw(this.clientId,this.allowTabSynchronization,Date.now());return G_(e).put(Hw.key,t)},H_.isAvailable=function(){return Eg.isAvailable()},H_.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},H_.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=G_(e);return n.get(Hw.key).next((function(e){return t.isLocalClient(e)?(gy(V_,"Releasing primary lease."),n.delete(Hw.key)):wg.resolve()}))},H_.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(by("Detected an update time that is in the future: "+e+" > "+n),1))},H_.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},H_.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Ty(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},H_.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},H_.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Ty("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},H_.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return gy(V_,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return by(V_,"Failed to get zombied client id.",e),!1}},H_.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){by("Failed to set zombie client id.",e)}},H_.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},H_.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},H_.MAIN_DATABASE="main",H_);function H_(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new X_(this,i),this.dbName=t+H_.MAIN_DATABASE,this.serializer=new C_(a),this.document=r.document,this.targetCache=new Hg(this.referenceDelegate,this.serializer),this.indexManager=new w_,this.remoteDocumentCache=new Rw(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Ny(ky.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function Q_(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){if(!function(e){return e.code===ky.FAILED_PRECONDITION&&e.message===q_}(e))throw e;return gy(V_,"Unexpectedly lost primary lease"),[2]}))}))}function G_(e){return e.store(Hw.store)}function Y_(e){return e.store(m_.store)}var X_=($_.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},$_.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},$_.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},$_.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},$_.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},$_.prototype.addReference=function(e,t){return J_(e,t)},$_.prototype.removeReference=function(e,t){return J_(e,t)},$_.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},$_.prototype.removeMutationReference=function(e,t){return J_(e,t)},$_.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?wg.resolve(!0):function(e,t){var n=!1;return Wg(e).iterateSerial((function(r){return Ug(e,r,t).next((function(e){return e&&(n=!0),wg.resolve(!e)}))})).next((function(){return n}))}(e,t)},$_.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),$g(e).delete(function(e){return[0,jv(e.path)]}(a))}))}));i.push(u)}})).next((function(){return wg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},$_.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},$_.prototype.updateLimboDocument=function(e,t){return J_(e,t)},$_.prototype.forEachOrphanedDocument=function(e,t){var n,r=$g(e),i=dv.INVALID;return r.iterate({index:u_.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==dv.INVALID&&t(new Iv(Bv(n)),i),i=s,n=a):i=dv.INVALID})).next((function(){i!==dv.INVALID&&t(new Iv(Bv(n)),i)}))},$_.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},$_);function $_(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new M_(this,t)}function J_(e,t){return $g(e).put(function(e,t){return new u_(0,jv(e.path),t)}(t,e.currentSequenceNumber))}var Z_=(eT.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},eT.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},eT.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=sg();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},eT.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},eT.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=ag();return i.forEach((function(e,t){t=t||new _w(e,Kv.forDeletedDoc()),o=o.insert(e,t)})),o}))},eT.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},eT.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Iv(t)).next((function(e){var t=cg();return e instanceof gw&&(t=t.insert(e.key,e)),t}))},eT.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;Ty(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=cg();return this.indexManager.getCollectionParents(e,i).next((function(a){return wg.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},eT.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof gw?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},eT.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=pg(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof pb&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof gw&&(c=c.insert(e,t))})),c}))},eT);function eT(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var tT=(nT.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},nT.prototype.addReference=function(e,t){var n=new rT(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},nT.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},nT.prototype.removeReference=function(e,t){this.removeRef(new rT(e,t))},nT.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},nT.prototype.removeReferencesForId=function(e){var t=this,n=Iv.EMPTY,r=new rT(n,e),i=new rT(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},nT.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},nT.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},nT.prototype.referencesForId=function(e){var t=Iv.EMPTY,n=new rT(t,e),r=new rT(t,e+1),i=pg();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},nT.prototype.containsKey=function(e){var t=new rT(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},nT);function nT(){this.refsByKey=new tg(rT.compareByKey),this.refsByTarget=new tg(rT.compareByTargetId)}var rT=(iT.compareByKey=function(e,t){return Iv.comparator(e.key,t.key)||nv(e.targetOrBatchId,t.targetOrBatchId)},iT.compareByTargetId=function(e,t){return nv(e.targetOrBatchId,t.targetOrBatchId)||Iv.comparator(e.key,t.key)},iT);function iT(e,t){this.key=e,this.targetOrBatchId=t}var oT="LocalStore",aT=(sT.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},sT.prototype.handleUserChange=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i=this;return na(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Z_(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=pg(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){c=d[p],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},sT.prototype.localWrite=function(e){var t,n=this,r=Wv.now(),i=e.reduce((function(e,t){return e.add(t.key)}),pg());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new pb(c.key,l,l.fieldMask(),ob.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},sT.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):wg.resolve(null)}))}))},sT.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},sT.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return Ty(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},sT.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},sT.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},sT.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},sT.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},sT.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.targetDataByTarget;var a=[];xy(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.targetCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.targetCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.length){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),sT.shouldPersistTargetData(s,c,o)&&a.push(t.targetCache.updateTargetData(i,c))}}}));var s=ag(),u=pg();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof _w&&c.version.isEqual(Kv.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(Kv.MIN.isEqual(n)&&by(oT,"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):gy(oT,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(Kv.MIN)){var c=t.targetCache.getLastRemoteSnapshotVersion(i).next((function(e){return Ty(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return wg.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.targetDataByTarget=r,e}))},sT.shouldPersistTargetData=function(e,t,n){return Ty(0<t.resumeToken.length,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},sT.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);Ty(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return wg.forEach(e,(function(e){return wg.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},sT.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},sT.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},sT.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,wg.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new E_(e,i,v_.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},sT.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?wg.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},sT.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);if(!r)return Promise.resolve();var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?wg.resolve():wg.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},sT.prototype.executeQuery=function(e,t){var n=this,r=Kv.MIN,i=pg();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:Kv.MIN,t?i:pg())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},sT.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},sT.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},sT.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},sT.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},sT.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=wg.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);Ty(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):Ty(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},sT.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},sT.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},sT.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},sT.prototype.synchronizeLastDocumentChangeReadTime=function(){return ta(this,void 0,void 0,(function(){var e,t=this;return na(this,(function(n){return this.remoteDocuments instanceof Rw?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},sT.RESUME_TOKEN_MAX_AGE_MICROS=3e8,sT);function sT(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new tT,this.targetDataByTarget=new Qv(nv),this.targetIdByTarget=new Iw((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=Kv.MIN,Ty(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Z_(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}var uT=(cT.prototype.checkEmpty=function(e){return wg.resolve(0===this.mutationQueue.length)},cT.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");Ty(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return Ty(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,wg.resolve()},cT.prototype.getLastStreamToken=function(e){return wg.resolve(this.lastStreamToken)},cT.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,wg.resolve()},cT.prototype.addMutationBatch=function(e,t,n,r){Ty(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&Ty(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new yg(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new rT(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return wg.resolve(o)},cT.prototype.lookupMutationBatch=function(e,t){return wg.resolve(this.findMutationBatch(t))},cT.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return Ty(null!=n,"Failed to find local mutation batch."),wg.resolve(n.keys())},cT.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return wg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},cT.prototype.getHighestUnacknowledgedBatchId=function(){return wg.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},cT.prototype.getAllMutationBatches=function(e){return wg.resolve(this.mutationQueue.slice())},cT.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new rT(t,0),i=new rT(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){Ty(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);Ty(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),wg.resolve(o)},cT.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tg(nv);return t.forEach((function(e){var t=new rT(e,0),i=new rT(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){Ty(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),wg.resolve(this.findMutationBatches(r))},cT.prototype.getAllMutationBatchesAffectingQuery=function(e,t){Ty(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Iv.isDocumentKey(i)||(i=i.child(""));var o=new rT(new Iv(i),0),a=new tg(nv);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),wg.resolve(this.findMutationBatches(a))},cT.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},cT.prototype.removeMutationBatch=function(e,t){var n=this;Ty(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wg.forEach(t.mutations,(function(i){var o=new rT(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},cT.prototype.removeCachedMutationKeys=function(e){},cT.prototype.containsKey=function(e,t){var n=new rT(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wg.resolve(t.isEqual(r&&r.key))},cT.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&Ty(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wg.resolve()},cT.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return Ty(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},cT.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},cT.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return Ty(n.batchId===e,"If found batch must match"),n},cT);function cT(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Cy(),this.batchesByDocumentKey=new tg(rT.compareByKey)}var lT,hT=(fT.prototype.addEntry=function(e,t,n){Ty(!n.isEqual(Kv.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},fT.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},fT.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wg.resolve(n?n.maybeDocument:null)},fT.prototype.getEntries=function(e,t){var n=this,r=sg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),wg.resolve(r)},fT.prototype.getDocumentsMatchingQuery=function(e,t,n){Ty(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=cg(),i=new Iv(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof gw&&t.matches(c)&&(r=r.insert(c.key,c))}return wg.resolve(r)},fT.prototype.forEachDocumentKey=function(e,t){return wg.forEach(this.docs,(function(e){return t(e)}))},fT.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},fT.prototype.newChangeBuffer=function(e){return new fT.RemoteDocumentChangeBuffer(this)},fT.prototype.getSize=function(e){return wg.resolve(this.size)},fT.RemoteDocumentChangeBuffer=(Zo(pT,lT=Nw),pT.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),wg.waitFor(n)},pT.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},pT.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},pT),fT);function fT(e,t){this.indexManager=e,this.sizer=t,this.docs=new Qv(Iv.comparator),this.size=0}function pT(e){var t=lT.call(this)||this;return t.documentCache=e,t}var dT=(mT.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),wg.resolve()},mT.prototype.getLastRemoteSnapshotVersion=function(e){return wg.resolve(this.lastRemoteSnapshotVersion)},mT.prototype.getHighestSequenceNumber=function(e){return wg.resolve(this.highestSequenceNumber)},mT.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,wg.resolve(t)},mT.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),wg.resolve()},mT.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},mT.prototype.addTargetData=function(e,t){return Ty(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,wg.resolve()},mT.prototype.updateTargetData=function(e,t){return Ty(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),wg.resolve()},mT.prototype.removeTargetData=function(e,t){return Ty(0<this.targetCount,"Removing a target from an empty cache"),Ty(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,wg.resolve()},mT.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wg.waitFor(o).next((function(){return i}))},mT.prototype.getTargetCount=function(e){return wg.resolve(this.targetCount)},mT.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return wg.resolve(n)},mT.prototype.getTargetDataForTarget=function(e,t){return _y("Not yet implemented.")},mT.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),wg.waitFor(i)},mT.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),wg.waitFor(i)},mT.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),wg.resolve()},mT.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return wg.resolve(n)},mT.prototype.containsKey=function(e,t){return wg.resolve(this.references.containsKey(t))},mT);function mT(e){this.persistence=e,this.targets=new Iw((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=Kv.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new tT,this.targetCount=0,this.targetIdGenerator=zg.forTargetCache()}var yT=(vT.createLruPersistence=function(e,t,n){return new vT(e,(function(e){return new ET(e,new C_(t),n)}))},vT.createEagerPersistence=function(e){return new vT(e,(function(e){return new _T(e)}))},vT.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(vT.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),vT.prototype.getActiveClients=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return[2,[this.clientId]]}))}))},vT.prototype.setPrimaryStateListener=function(e){return e(!0)},vT.prototype.setDatabaseDeletedListener=function(){},vT.prototype.setNetworkEnabled=function(e){},vT.prototype.getIndexManager=function(){return this.indexManager},vT.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new uT(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},vT.prototype.getTargetCache=function(){return this.targetCache},vT.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},vT.prototype.runTransaction=function(e,t,n){var r=this;gy("MemoryPersistence","Starting transaction:",e);var i=new bT(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},vT.prototype.mutationQueuesContainKey=function(e,t){return wg.or(function(e){var t=[];return Py(e,(function(e,n){return t.push(n)})),t}(this.mutationQueues).map((function(n){return function(){return n.containsKey(e,t)}})))},vT);function vT(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new dv(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new dT(this),this.indexManager=new Uw,this.remoteDocumentCache=new hT(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}var gT,bT=(Zo(wT,gT=F_),wT);function wT(e){var t=gT.call(this)||this;return t.currentSequenceNumber=e,t}var _T=(Object.defineProperty(TT.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw _y("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),TT.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},TT.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),wg.resolve()},TT.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),wg.resolve()},TT.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),wg.resolve()},TT.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},TT.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},TT.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wg.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},TT.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},TT.prototype.documentSize=function(e){return 0},TT.prototype.isReferenced=function(e,t){var n=this;return wg.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return wg.resolve(n.inMemoryPins.containsKey(t))}])},TT);function TT(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var ET=(ST.prototype.onTransactionStarted=function(){},ST.prototype.onTransactionCommitted=function(e){return wg.resolve()},ST.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},ST.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},ST.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},ST.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return wg.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?wg.resolve():t(i)}))}))},ST.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ST.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},ST.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},ST.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wg.resolve()},ST.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},ST.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wg.resolve()},ST.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wg.resolve()},ST.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wg.resolve()},ST.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _y("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},ST.prototype.isPinned=function(e,t,n){var r=this;return wg.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return wg.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return wg.resolve(void 0!==e&&n<e)}])},ST.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},ST);function ST(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Iw((function(e){return jv(e.path)})),this.garbageCollector=new M_(this,n)}var CT=(IT.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},IT.prototype.getDocumentsMatchingQuery=function(e,t,n,r){return Ty(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Kv.MIN)},IT);function IT(){}var kT=Number,NT=kT.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),AT=kT.MAX_SAFE_INTEGER||Math.pow(2,53)-1,DT=kT.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function RT(e){return null==e}function OT(e){return DT(e)&&e<=AT&&NT<=e}var xT=(PT.prototype.reset=function(){this.currentBaseMs=0},PT.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},PT.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&gy("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},PT.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},PT.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},PT);function PT(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var MT,LT,FT="PersistentStream";(LT=MT=MT||{})[LT.Initial=0]="Initial",LT[LT.Starting=1]="Starting",LT[LT.Open=2]="Open",LT[LT.Error=3]="Error",LT[LT.Backoff=4]="Backoff";var UT=(jT.prototype.isStarted=function(){return this.state===MT.Starting||this.state===MT.Open||this.state===MT.Backoff},jT.prototype.isOpen=function(){return this.state===MT.Open},jT.prototype.start=function(){this.state!==MT.Error?(Ty(this.state===MT.Initial,"Already started"),this.auth()):this.performBackoff()},jT.prototype.stop=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(MT.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},jT.prototype.inhibitBackoff=function(){Ty(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=MT.Initial,this.backoff.reset()},jT.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},jT.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},jT.prototype.handleIdleCloseTimer=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return this.isOpen()?[2,this.close(MT.Initial)]:[2]}))}))},jT.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},jT.prototype.close=function(e,t){return ta(this,void 0,void 0,(function(){return na(this,(function(n){switch(n.label){case 0:return Ty(this.isStarted(),"Only started streams should be closed."),Ty(e===MT.Error||RT(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==MT.Error?this.backoff.reset():t&&t.code===ky.RESOURCE_EXHAUSTED?(by(t.toString()),by("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===ky.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},jT.prototype.tearDown=function(){},jT.prototype.auth=function(){var e=this;Ty(this.state===MT.Initial,"Must be in initial state to auth"),this.state=MT.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new Ny(ky.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},jT.prototype.startStream=function(e){var t=this;Ty(this.state===MT.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return Ty(t.state===MT.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=MT.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},jT.prototype.performBackoff=function(){var e=this;Ty(this.state===MT.Error,"Should only perform backoff when in Error state"),this.state=MT.Backoff,this.backoff.backoffAndRun((function(){return ta(e,void 0,void 0,(function(){return na(this,(function(e){return Ty(this.state===MT.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=MT.Initial,this.start(),Ty(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},jT.prototype.handleStreamClose=function(e){return Ty(this.isStarted(),"Can't handle server close on non-started stream"),gy(FT,"close with error: "+e),this.stream=null,this.close(MT.Error,e)},jT.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(gy(FT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},jT);function jT(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=MT.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xT(e,t)}var VT,qT=(Zo(BT,VT=UT),BT.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},BT.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},BT.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},BT.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},BT);function BT(e,t,n,r,i){var o=VT.call(this,e,Nv.ListenStreamConnectionBackoff,Nv.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var WT,zT=(Zo(KT,WT=UT),Object.defineProperty(KT.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),KT.prototype.start=function(){this.handshakeComplete_=!1,WT.prototype.start.call(this)},KT.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},KT.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},KT.prototype.onMessage=function(e){if(Ty(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return Ty(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},KT.prototype.writeHandshake=function(){Ty(this.isOpen(),"Writing handshake requires an opened stream"),Ty(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},KT.prototype.writeMutations=function(e){var t=this;Ty(this.isOpen(),"Writing mutations requires an opened stream"),Ty(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Ty(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},KT);function KT(e,t,n,r,i){var o=WT.call(this,e,Nv.WriteStreamConnectionBackoff,Nv.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Cy(),o}var HT=(QT.prototype.newPersistentWriteStream=function(e){return new zT(this.queue,this.connection,this.credentials,this.serializer,e)},QT.prototype.newPersistentWatchStream=function(e){return new qT(this.queue,this.connection,this.credentials,this.serializer,e)},QT.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},QT.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=ag();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);Ty(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},QT.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===ky.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},QT.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===ky.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},QT);function QT(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var GT,YT,XT,$T,JT=(ZT.prototype.lookup=function(e){return ta(this,void 0,void 0,(function(){var t,n=this;return na(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Ny(ky.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof _w||e instanceof gw?n.recordVersion(e):_y("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},ZT.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},ZT.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},ZT.prototype.delete=function(e){this.write([new Eb(e,this.precondition(e))]),this.writtenDocs.add(e)},ZT.prototype.commit=function(){return ta(this,void 0,void 0,(function(){var e;return na(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new Ny(ky.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},ZT.prototype.recordVersion=function(e){var t;if(e instanceof gw)t=e.version;else{if(!(e instanceof _w))throw _y("Document in a transaction was a "+e.constructor.name);t=Kv.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Ny(ky.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},ZT.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?ob.updateTime(t):ob.NONE},ZT.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return ob.exists(!0);if(t.isEqual(Kv.forDeletedDoc()))throw new Ny(ky.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ob.updateTime(t)},ZT.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},ZT.prototype.ensureCommitNotCalled=function(){Ty(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},ZT);function ZT(e){this.datastore=e,this.readVersions=hg(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(YT=GT=GT||{})[YT.Unknown=0]="Unknown",YT[YT.Online=1]="Online",YT[YT.Offline=2]="Offline",($T=XT=XT||{})[$T.RemoteStore=0]="RemoteStore",$T[$T.SharedClientState=1]="SharedClientState";var eE,tE,nE=(rE.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(GT.Unknown),Ty(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Nv.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,Ty(e.state===GT.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(GT.Offline),Promise.resolve()})))},rE.prototype.handleWatchStreamFailure=function(e){this.state===GT.Online?(this.setAndBroadcast(GT.Unknown),Ty(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Ty(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(GT.Offline)))},rE.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===GT.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},rE.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},rE.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(by(t),this.shouldWarnClientIsOffline=!1):gy("OnlineStateTracker",t)},rE.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},rE);function rE(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=GT.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function iE(e){switch(e){case ky.OK:return _y("Treated status OK as error");case ky.CANCELLED:case ky.UNKNOWN:case ky.DEADLINE_EXCEEDED:case ky.RESOURCE_EXHAUSTED:case ky.INTERNAL:case ky.UNAVAILABLE:case ky.UNAUTHENTICATED:return!1;case ky.INVALID_ARGUMENT:case ky.NOT_FOUND:case ky.ALREADY_EXISTS:case ky.PERMISSION_DENIED:case ky.FAILED_PRECONDITION:case ky.ABORTED:case ky.OUT_OF_RANGE:case ky.UNIMPLEMENTED:case ky.DATA_LOSS:return!0;default:return _y("Unknown status code: "+e)}}function oE(e){if(void 0===e)return by("GRPC error has no .code"),ky.UNKNOWN;switch(e){case eE.OK:return ky.OK;case eE.CANCELLED:return ky.CANCELLED;case eE.UNKNOWN:return ky.UNKNOWN;case eE.DEADLINE_EXCEEDED:return ky.DEADLINE_EXCEEDED;case eE.RESOURCE_EXHAUSTED:return ky.RESOURCE_EXHAUSTED;case eE.INTERNAL:return ky.INTERNAL;case eE.UNAVAILABLE:return ky.UNAVAILABLE;case eE.UNAUTHENTICATED:return ky.UNAUTHENTICATED;case eE.INVALID_ARGUMENT:return ky.INVALID_ARGUMENT;case eE.NOT_FOUND:return ky.NOT_FOUND;case eE.ALREADY_EXISTS:return ky.ALREADY_EXISTS;case eE.PERMISSION_DENIED:return ky.PERMISSION_DENIED;case eE.FAILED_PRECONDITION:return ky.FAILED_PRECONDITION;case eE.ABORTED:return ky.ABORTED;case eE.OUT_OF_RANGE:return ky.OUT_OF_RANGE;case eE.UNIMPLEMENTED:return ky.UNIMPLEMENTED;case eE.DATA_LOSS:return ky.DATA_LOSS;default:return _y("Unknown status code: "+e)}}(tE=eE=eE||{})[tE.OK=0]="OK",tE[tE.CANCELLED=1]="CANCELLED",tE[tE.UNKNOWN=2]="UNKNOWN",tE[tE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tE[tE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tE[tE.NOT_FOUND=5]="NOT_FOUND",tE[tE.ALREADY_EXISTS=6]="ALREADY_EXISTS",tE[tE.PERMISSION_DENIED=7]="PERMISSION_DENIED",tE[tE.UNAUTHENTICATED=16]="UNAUTHENTICATED",tE[tE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tE[tE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tE[tE.ABORTED=10]="ABORTED",tE[tE.OUT_OF_RANGE=11]="OUT_OF_RANGE",tE[tE.UNIMPLEMENTED=12]="UNIMPLEMENTED",tE[tE.INTERNAL=13]="INTERNAL",tE[tE.UNAVAILABLE=14]="UNAVAILABLE",tE[tE.DATA_LOSS=15]="DATA_LOSS";var aE,sE,uE,cE,lE=(hE.emptySet=function(e){return new hE(e.comparator)},hE.prototype.has=function(e){return null!=this.keyedMap.get(e)},hE.prototype.get=function(e){return this.keyedMap.get(e)},hE.prototype.first=function(){return this.sortedSet.minKey()},hE.prototype.last=function(){return this.sortedSet.maxKey()},hE.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},hE.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(hE.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),hE.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},hE.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},hE.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},hE.prototype.isEqual=function(e){if(!(e instanceof hE))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},hE.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},hE.prototype.copy=function(e,t){var n=new hE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},hE);function hE(e){this.comparator=e?function(t,n){return e(t,n)||Iv.comparator(t.key,n.key)}:function(e,t){return Iv.comparator(e.key,t.key)},this.keyedMap=cg(),this.sortedSet=new Qv(this.comparator)}(sE=aE=aE||{})[sE.Added=0]="Added",sE[sE.Removed=1]="Removed",sE[sE.Modified=2]="Modified",sE[sE.Metadata=3]="Metadata",(cE=uE=uE||{})[cE.Local=0]="Local",cE[cE.Synced=1]="Synced";var fE=(pE.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==aE.Added&&n.type===aE.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===aE.Metadata&&n.type!==aE.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===aE.Modified&&n.type===aE.Modified?this.changeMap=this.changeMap.insert(t,{type:aE.Modified,doc:e.doc}):e.type===aE.Modified&&n.type===aE.Added?this.changeMap=this.changeMap.insert(t,{type:aE.Added,doc:e.doc}):e.type===aE.Removed&&n.type===aE.Added?this.changeMap=this.changeMap.remove(t):e.type===aE.Removed&&n.type===aE.Modified?this.changeMap=this.changeMap.insert(t,{type:aE.Removed,doc:n.doc}):e.type===aE.Added&&n.type===aE.Removed?this.changeMap=this.changeMap.insert(t,{type:aE.Modified,doc:e.doc}):_y("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},pE.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},pE);function pE(){this.changeMap=new Qv(Iv.comparator)}var dE=(mE.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:aE.Added,doc:e})})),new mE(e,t,lE.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(mE.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),mE.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},mE);function mE(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var yE=(vE.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=gE.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new vE(Kv.MIN,r,mg(),ag(),pg())},vE);function vE(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var gE=(bE.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new bE(Cy(),t,pg(),pg(),pg())},bE);function bE(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var wE,_E,TE=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},EE=function(e,t){this.targetId=e,this.existenceFilter=t};(_E=wE=wE||{})[_E.NoChange=0]="NoChange",_E[_E.Added=1]="Added",_E[_E.Removed=2]="Removed",_E[_E.Current=3]="Current",_E[_E.Reset=4]="Reset";var SE=function(e,t,n,r){void 0===n&&(n=Cy()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},CE=(Object.defineProperty(IE.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(IE.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(IE.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(IE.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),IE.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},IE.prototype.toTargetChange=function(){var e=pg(),t=pg(),n=pg();return this.documentChanges.forEach((function(r,i){switch(i){case aE.Added:e=e.add(r);break;case aE.Modified:t=t.add(r);break;case aE.Removed:n=n.add(r);break;default:_y("Encountered invalid change type: "+i)}})),new gE(this._resumeToken,this._current,e,t,n)},IE.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=DE()},IE.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},IE.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},IE.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},IE.prototype.recordTargetResponse=function(){this.pendingResponses-=1},IE.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},IE);function IE(){this.pendingResponses=0,this.documentChanges=DE(),this._resumeToken=Cy(),this._current=!1,this._hasPendingChanges=!0}var kE=(NE.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof gw?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof _w&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},NE.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case wE.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case wE.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case wE.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),Ty(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case wE.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case wE.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:_y("Unknown target watch change state: "+e.state)}}))},NE.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):xy(this.targetStates,t)},NE.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Iv(i.path);this.removeDocumentFromTarget(t,o,new _w(o,Kv.forDeletedDoc()))}else Ty(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},NE.prototype.createRemoteEvent=function(e){var t=this,n={};xy(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Iv(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new _w(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=pg();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===v_.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new yE(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=ag(),this.pendingDocumentTargetMapping=AE(),this.pendingTargetResets=new tg(nv),i},NE.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?aE.Modified:aE.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},NE.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,aE.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},NE.prototype.removeTarget=function(e){delete this.targetStates[e]},NE.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},NE.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},NE.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new CE),this.targetStates[e]},NE.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new tg(nv),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},NE.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||gy("WatchChangeAggregator","Detected inactive target",e),t},NE.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},NE.prototype.resetTarget=function(e){var t=this;Ty(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new CE,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},NE.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},NE);function NE(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=ag(),this.pendingDocumentTargetMapping=AE(),this.pendingTargetResets=new tg(nv)}function AE(){return new Qv(Iv.comparator)}function DE(){return new Qv(Iv.comparator)}var RE="RemoteStore",OE=(xE.prototype.start=function(){return this.enableNetwork()},xE.prototype.enableNetwork=function(){return ta(this,void 0,void 0,(function(){var e;return na(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(GT.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},xE.prototype.disableNetwork=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(GT.Offline),[2]}}))}))},xE.prototype.disableNetworkInternal=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(gy(RE,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},xE.prototype.shutdown=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return gy(RE,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(GT.Unknown),[2]}}))}))},xE.prototype.listen=function(e){Ry(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},xE.prototype.unlisten=function(e){Ry(this.listenTargets,e)&&(delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),My(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(GT.Unknown)))},xE.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},xE.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},xE.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},xE.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},xE.prototype.startWatchStream=function(){Ty(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new kE(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},xE.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!My(this.listenTargets)},xE.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},xE.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},xE.prototype.onWatchStreamOpen=function(){return ta(this,void 0,void 0,(function(){var e=this;return na(this,(function(t){return xy(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},xE.prototype.onWatchStreamClose=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){return void 0===e&&Ty(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(GT.Unknown),[2]}))}))},xE.prototype.onWatchStreamChange=function(e,t){return ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(GT.Online),e instanceof SE&&e.state===wE.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof TE?this.watchChangeAggregator.handleDocumentChange(e):e instanceof EE?this.watchChangeAggregator.handleExistenceFilter(e):(Ty(e instanceof SE,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Kv.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},xE.prototype.raiseWatchSnapshot=function(e){var t=this;Ty(!e.isEqual(Kv.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return xy(n.targetChanges,(function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(Cy(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new E_(n.target,e,v_.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},xE.prototype.handleTargetError=function(e){var t=this;Ty(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return ta(t,void 0,void 0,(function(){return na(this,(function(t){return Ry(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},xE.prototype.fillWritePipeline=function(){return ta(this,void 0,void 0,(function(){var e,t;return na(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},xE.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},xE.prototype.outstandingWrites=function(){return this.writePipeline.length},xE.prototype.addToWritePipeline=function(e){Ty(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},xE.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},xE.prototype.startWriteStream=function(){Ty(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},xE.prototype.onWriteStreamOpen=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},xE.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Q_)},xE.prototype.onMutationResult=function(e,t){var n=this;Ty(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=gg.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},xE.prototype.onWriteStreamClose=function(e){return ta(this,void 0,void 0,(function(){var t=this;return na(this,(function(n){return void 0===e&&Ty(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},xE.prototype.handleHandshakeError=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){return iE(e.code)?(gy(RE,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Cy(),[2,this.localStore.setLastStreamToken(Cy()).catch(Q_)]):[2]}))}))},xE.prototype.handleWriteError=function(e){return ta(this,void 0,void 0,(function(){var t,n=this;return na(this,(function(r){return function(e){return iE(e)&&e!==ky.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2]}))}))},xE.prototype.createTransaction=function(){return new JT(this.datastore)},xE.prototype.restartNetwork=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(GT.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},xE.prototype.handleCredentialChange=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(gy(RE,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},xE.prototype.applyPrimaryState=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(GT.Unknown),t.label=4;case 4:return[2]}}))}))},xE);function xE(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return ta(o,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(gy(RE,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new nE(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var PE=(Object.defineProperty(ME.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),ME.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},ME.prototype._compareTo=function(e){return nv(this._lat,e._lat)||nv(this._long,e._long)},ME);function ME(e,t){if(Fy("GeoPoint",arguments,2),Vy("GeoPoint","number",1,e),Vy("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Ny(ky.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Ny(ky.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var LE,FE,UE=(jE.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";RT(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},jE.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),RT(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},jE.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},jE.prototype.isDocumentQuery=function(){return Iv.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},jE);function jE(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(FE=LE=LE||{}).First="F",FE.Last="L";var VE=(qE.atPath=function(e){return new qE(e)},Object.defineProperty(qE.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[dS]:this.memoizedOrderBy=[new fS(e),dS];else{Ty(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:uS.ASCENDING;this.memoizedOrderBy.push(a===uS.ASCENDING?dS:mS)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),qE.prototype.addFilter=function(e){Ty(null==this.getInequalityFilterField()||!(e instanceof KE)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Ty(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new qE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},qE.prototype.addOrderBy=function(e){Ty(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new qE(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},qE.prototype.withLimitToFirst=function(e){return new qE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,LE.First,this.startAt,this.endAt)},qE.prototype.withLimitToLast=function(e){return new qE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,LE.Last,this.startAt,this.endAt)},qE.prototype.withStartAt=function(e){return new qE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},qE.prototype.withEndAt=function(e){return new qE(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},qE.prototype.asCollectionQueryAtPath=function(e){return new qE(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},qE.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},qE.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},qE.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},qE.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},qE.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return Ty(n,"orderBy used that doesn't compare on key field"),0},qE.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},qE.prototype.hasLimitToFirst=function(){return!RT(this.limit)&&this.limitType===LE.First},qE.prototype.hasLimitToLast=function(){return!RT(this.limit)&&this.limitType===LE.Last},qE.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},qE.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof KE&&n.isInequality())return n.field}return null},qE.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof KE&&0<=e.indexOf(r.op))return r.op}return null},qE.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},qE.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},qE.prototype.toTarget=function(){if(!this.memorizedTarget)if(this.limitType===LE.First)this.memorizedTarget=new UE(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===uS.DESCENDING?uS.ASCENDING:uS.DESCENDING;e.push(new fS(r.field,i))}var o=this.endAt?new lS(this.endAt.position,!this.endAt.before):null,a=this.startAt?new lS(this.startAt.position,!this.startAt.before):null;this.memorizedTarget=new UE(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memorizedTarget},qE.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Iv.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},qE.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},qE.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},qE.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},qE.prototype.assertValidBound=function(e){Ty(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},qE);function qE(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=LE.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memorizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var BE=(WE.fromString=function(e){switch(e){case"<":return WE.LESS_THAN;case"<=":return WE.LESS_THAN_OR_EQUAL;case"==":return WE.EQUAL;case">=":return WE.GREATER_THAN_OR_EQUAL;case">":return WE.GREATER_THAN;case"array-contains":return WE.ARRAY_CONTAINS;case"in":return WE.IN;case"array-contains-any":return WE.ARRAY_CONTAINS_ANY;default:return _y("Unknown FieldFilter operator: "+e)}},WE.prototype.toString=function(){return this.name},WE.prototype.isEqual=function(e){return this.name===e.name},WE.LESS_THAN=new WE("<"),WE.LESS_THAN_OR_EQUAL=new WE("<="),WE.EQUAL=new WE("=="),WE.GREATER_THAN=new WE(">"),WE.GREATER_THAN_OR_EQUAL=new WE(">="),WE.ARRAY_CONTAINS=new WE("array-contains"),WE.IN=new WE("in"),WE.ARRAY_CONTAINS_ANY=new WE("array-contains-any"),WE);function WE(e){this.name=e}var zE,KE=(Zo(HE,zE=function(){}),HE.create=function(e,t,n){if(e.isKeyField())return t===BE.IN?(Ty(n instanceof pw,"Comparing on key with IN, but filter value not an ArrayValue"),Ty(n.internalValue.every((function(e){return e instanceof iw})),"Comparing on key with IN, but an array value was not a RefValue"),new $E(e,n)):(Ty(n instanceof iw,"Comparing on key, but filter value not a RefValue"),Ty(t!==BE.ARRAY_CONTAINS&&t!==BE.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new GE(e,t,n));if(n.isEqual(Db.INSTANCE)){if(t!==BE.EQUAL)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new HE(e,t,n)}if(n.isEqual(Wb.NAN)){if(t!==BE.EQUAL)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new HE(e,t,n)}return t===BE.ARRAY_CONTAINS?new eS(e,n):t===BE.IN?(Ty(n instanceof pw,"IN filter has invalid value: "+n.toString()),new rS(e,n)):t===BE.ARRAY_CONTAINS_ANY?(Ty(n instanceof pw,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new aS(e,n)):new HE(e,t,n)},HE.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},HE.prototype.matchesComparison=function(e){switch(this.op){case BE.LESS_THAN:return e<0;case BE.LESS_THAN_OR_EQUAL:return e<=0;case BE.EQUAL:return 0===e;case BE.GREATER_THAN:return 0<e;case BE.GREATER_THAN_OR_EQUAL:return 0<=e;default:return _y("Unknown FieldFilter operator: "+this.op)}},HE.prototype.isInequality=function(){return 0<=[BE.LESS_THAN,BE.LESS_THAN_OR_EQUAL,BE.GREATER_THAN,BE.GREATER_THAN_OR_EQUAL].indexOf(this.op)},HE.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},HE.prototype.isEqual=function(e){return e instanceof HE&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},HE.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},HE);function HE(e,t,n){var r=zE.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var QE,GE=(Zo(YE,QE=KE),YE.prototype.matches=function(e){var t=this.value,n=Iv.comparator(e.key,t.key);return this.matchesComparison(n)},YE);function YE(){return null!==QE&&QE.apply(this,arguments)||this}var XE,$E=(Zo(JE,XE=KE),JE.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},JE);function JE(e,t){var n=XE.call(this,e,BE.IN,t)||this;return n.value=t,n}var ZE,eS=(Zo(tS,ZE=KE),tS.prototype.matches=function(e){var t=e.field(this.field);return t instanceof pw&&t.contains(this.value)},tS);function tS(e,t){return ZE.call(this,e,BE.ARRAY_CONTAINS,t)||this}var nS,rS=(Zo(iS,nS=KE),iS.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},iS);function iS(e,t){var n=nS.call(this,e,BE.IN,t)||this;return n.value=t,n}var oS,aS=(Zo(sS,oS=KE),sS.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof pw&&n.internalValue.some((function(e){return t.value.contains(e)}))},sS);function sS(e,t){var n=oS.call(this,e,BE.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var uS=(cS.prototype.toString=function(){return this.name},cS.ASCENDING=new cS("asc"),cS.DESCENDING=new cS("desc"),cS);function cS(e){this.name=e}var lS=(hS.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},hS.prototype.sortsBeforeDocument=function(e,t){Ty(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())Ty(o instanceof iw,"Bound has a non-key value where the key path is being used."),n=Iv.comparator(o.key,t.key);else{var a=t.field(i.field);Ty(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===uS.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},hS.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},hS);function hS(e,t){this.position=e,this.before=t}var fS=(pS.prototype.compare=function(e,t){var n=this.isKeyOrderBy?gw.compareByKey(e,t):gw.compareByField(this.field,e,t);switch(this.dir){case uS.ASCENDING:return n;case uS.DESCENDING:return-1*n;default:return _y("Unknown direction: "+this.dir)}},pS.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},pS.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},pS.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},pS);function pS(e,t){this.field=e,void 0===t&&(t=uS.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var dS=new fS(Sv.keyField(),uS.ASCENDING),mS=new fS(Sv.keyField(),uS.DESCENDING),yS=(vS.prototype.applyToLocalView=function(e,t){return new Jb(t,e)},vS.prototype.applyToRemoteDocument=function(e,t){return t},vS.prototype.computeBaseValue=function(e){return null},vS.prototype.isEqual=function(e){return e instanceof vS},vS.instance=new vS,vS);function vS(){}var gS=(bS.prototype.applyToLocalView=function(e,t){return this.apply(e)},bS.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},bS.prototype.apply=function(e){for(var t=SS(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new pw(t)},bS.prototype.computeBaseValue=function(e){return null},bS.prototype.isEqual=function(e){return e instanceof bS&&rv(e.elements,this.elements)},bS);function bS(e){this.elements=e}var wS=(_S.prototype.applyToLocalView=function(e,t){return this.apply(e)},_S.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},_S.prototype.apply=function(e){for(var t=SS(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new pw(t)},_S.prototype.computeBaseValue=function(e){return null},_S.prototype.isEqual=function(e){return e instanceof _S&&rv(e.elements,this.elements)},_S);function _S(e){this.elements=e}var TS=(ES.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Vb&&this.operand instanceof Vb){var r=n.internalValue+this.operand.internalValue;return new Vb(r)}return r=n.internalValue+this.operand.internalValue,new Wb(r)},ES.prototype.applyToRemoteDocument=function(e,t){return Ty(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},ES.prototype.computeBaseValue=function(e){return e instanceof Lb?e:new Vb(0)},ES.prototype.isEqual=function(e){return e instanceof ES&&this.operand.isEqual(e.operand)},ES);function ES(e){this.operand=e}function SS(e){return e instanceof pw?e.internalValue.slice():[]}var CS=(IS.prototype.isEqual=function(e){return e&&e.count===this.count},IS);function IS(e){this.count=e}var kS,NS,AS=((kS={})[uS.ASCENDING.name]="ASCENDING",kS[uS.DESCENDING.name]="DESCENDING",kS),DS=((NS={})[BE.LESS_THAN.name]="LESS_THAN",NS[BE.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",NS[BE.GREATER_THAN.name]="GREATER_THAN",NS[BE.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",NS[BE.EQUAL.name]="EQUAL",NS[BE.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",NS[BE.IN.name]="IN",NS[BE.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",NS),RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function OS(e,t){Ty(!RT(e),t+" is missing")}function xS(e){return"number"==typeof e?e:"string"==typeof e?Number(e):_y("can't parse "+e)}var PS=(MS.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},MS.prototype.unsafeCastProtoByteString=function(e){return e},MS.prototype.fromRpcStatus=function(e){var t=void 0===e.code?ky.UNKNOWN:oE(e.code);return new Ny(t,e.message||"")},MS.prototype.toInt32Value=function(e){return this.options.useProto3Json||RT(e)?e:{value:e}},MS.prototype.fromInt32Value=function(e){var t;return RT(t="object"==typeof e?e.value:e)?null:t},MS.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},MS.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);Ty(!!e,"Cannot deserialize null or undefined timestamp.");var t=xS(e.seconds||"0"),n=e.nanos||0;return new Wv(t,n)},MS.prototype.fromIso8601String=function(e){var t=0,n=RS.exec(e);if(Ty(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Wv(o,t)},MS.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},MS.prototype.fromBlob=function(e){return"string"==typeof e?(Ty(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),sv.fromBase64String(e)):(Ty(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),sv.fromUint8Array(e))},MS.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},MS.prototype.fromVersion=function(e){return Ty(!!e,"Trying to deserialize version that isn't set"),Kv.fromTimestamp(this.fromTimestamp(e))},MS.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},MS.prototype.fromResourceName=function(e){var t=wv.fromString(e);return Ty(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},MS.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},MS.prototype.fromName=function(e){var t=this.fromResourceName(e);return Ty(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),Ty(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Iv(this.extractLocalPathFromResourceName(t))},MS.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},MS.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?wv.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(MS.prototype,"encodedDatabaseId",{get:function(){return new wv(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),MS.prototype.fullyQualifiedPrefixPath=function(e){return new wv(["projects",e.projectId,"databases",e.database])},MS.prototype.extractLocalPathFromResourceName=function(e){return Ty(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},MS.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},MS.prototype.toValue=function(e){if(e instanceof Db)return{nullValue:"NULL_VALUE"};if(e instanceof xb)return{booleanValue:e.value()};if(e instanceof Vb)return{integerValue:""+e.value()};if(e instanceof Wb){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Hb?{stringValue:e.value()}:e instanceof lw?{mapValue:this.toMapValue(e)}:e instanceof pw?{arrayValue:this.toArrayValue(e)}:e instanceof Yb?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof sw?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof tw?{bytesValue:this.toBytes(e.value())}:e instanceof iw?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:_y("Unknown FieldValue "+JSON.stringify(e))},MS.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Db.INSTANCE;if("booleanValue"in e)return xb.of(e.booleanValue);if("integerValue"in e)return new Vb(xS(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Wb.NAN;if("Infinity"===e.doubleValue)return Wb.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Wb.NEGATIVE_INFINITY}return new Wb(e.doubleValue)}if("stringValue"in e)return new Hb(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){OS(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new pw(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return OS(e.timestampValue,"timestampValue"),new Yb(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){OS(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new sw(new PE(r,i))}if("bytesValue"in e){OS(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new tw(o)}if("referenceValue"in e){OS(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new fv(a.get(1),a.get(3)),u=new Iv(this.extractLocalPathFromResourceName(a));return new iw(s,u)}return _y("Unknown Value proto "+JSON.stringify(e))},MS.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},MS.prototype.toDocument=function(e){return Ty(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},MS.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new gw(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},MS.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},MS.prototype.fromFields=function(e){var t=this,n=e,r=lw.EMPTY;return Py(n,(function(e,n){r=r.set(new Sv([e]),t.fromValue(n))})),r},MS.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},MS.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},MS.prototype.fromFound=function(e){var t=this;Ty(!!e.found,"Tried to deserialize a found document from a missing document."),OS(e.found.name,"doc.found.name"),OS(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new gw(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},MS.prototype.fromMissing=function(e){Ty(!!e.missing,"Tried to deserialize a missing document from a found document."),Ty(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new _w(t,n)},MS.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):_y("invalid batch get response: "+JSON.stringify(e))},MS.prototype.toWatchTargetChangeState=function(e){switch(e){case wE.Added:return"ADD";case wE.Current:return"CURRENT";case wE.NoChange:return"NO_CHANGE";case wE.Removed:return"REMOVE";case wE.Reset:return"RESET";default:return _y("Unknown WatchTargetChangeState: "+e)}},MS.prototype.toTestWatchChange=function(e){if(e instanceof EE)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof TE){if(e.newDoc instanceof gw){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof _w)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof SE){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return eE.OK;switch(e){case ky.OK:return eE.OK;case ky.CANCELLED:return eE.CANCELLED;case ky.UNKNOWN:return eE.UNKNOWN;case ky.DEADLINE_EXCEEDED:return eE.DEADLINE_EXCEEDED;case ky.RESOURCE_EXHAUSTED:return eE.RESOURCE_EXHAUSTED;case ky.INTERNAL:return eE.INTERNAL;case ky.UNAVAILABLE:return eE.UNAVAILABLE;case ky.UNAUTHENTICATED:return eE.UNAUTHENTICATED;case ky.INVALID_ARGUMENT:return eE.INVALID_ARGUMENT;case ky.NOT_FOUND:return eE.NOT_FOUND;case ky.ALREADY_EXISTS:return eE.ALREADY_EXISTS;case ky.PERMISSION_DENIED:return eE.PERMISSION_DENIED;case ky.FAILED_PRECONDITION:return eE.FAILED_PRECONDITION;case ky.ABORTED:return eE.ABORTED;case ky.OUT_OF_RANGE:return eE.OUT_OF_RANGE;case ky.UNIMPLEMENTED:return eE.UNIMPLEMENTED;case ky.DATA_LOSS:return eE.DATA_LOSS;default:return _y("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return _y("Unrecognized watch change: "+JSON.stringify(e))},MS.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){OS(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new SE(r,i,o,s||null)}else if("documentChange"in e){OS(e.documentChange,"documentChange"),OS(e.documentChange.document,"documentChange.name"),OS(e.documentChange.document.name,"documentChange.document.name"),OS(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new gw(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),f=u.targetIds||[],p=u.removedTargetIds||[];t=new TE(f,p,h.key,h)}else if("documentDelete"in e){OS(e.documentDelete,"documentDelete"),OS(e.documentDelete.document,"documentDelete.document");var d=e.documentDelete;c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Kv.forDeletedDoc(),h=new _w(c,l),p=d.removedTargetIds||[],t=new TE([],p,h.key,h)}else if("documentRemove"in e){OS(e.documentRemove,"documentRemove"),OS(e.documentRemove.document,"documentRemove");var m=e.documentRemove;c=this.fromName(m.document),p=m.removedTargetIds||[],t=new TE([],p,c,null)}else{if(!("filter"in e))return _y("Unknown change type "+JSON.stringify(e));OS(e.filter,"filter"),OS(e.filter.targetId,"filter.targetId");var y=e.filter,v=y.count||0,g=new CS(v),b=y.targetId;t=new EE(b,g)}return t},MS.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?wE.NoChange:"ADD"===e?wE.Added:"REMOVE"===e?wE.Removed:"CURRENT"===e?wE.Current:"RESET"===e?wE.Reset:_y("Got unexpected TargetChange.state: "+e)},MS.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Kv.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Kv.MIN:t.readTime?this.fromVersion(t.readTime):Kv.MIN},MS.prototype.toMutation=function(e){var t,n=this;if(e instanceof lb)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Eb)t={delete:this.toName(e.key)};else if(e instanceof pb)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof yb))return _y("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},MS.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):ob.NONE;if(e.update){OS(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new pb(r,i,o,n)}return new lb(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Eb(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return Ty(!0===n.exists,'Transforms only support precondition "exists == true"'),new yb(r,a)}return _y("unknown mutation proto: "+JSON.stringify(e))},MS.prototype.toPrecondition=function(e){return Ty(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_y("Unknown precondition")},MS.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?ob.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?ob.exists(e.exists):ob.NONE},MS.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(Kv.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new ib(r,i)},MS.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(Ty(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},MS.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof yS)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gS)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof wS)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof TS)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw _y("Unknown transform: "+e.transform)},MS.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)Ty("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=yS.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new gS(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new wS(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);Ty(i instanceof Lb,"NUMERIC_ADD transform requires a NumberValue"),n=new TS(i)}else _y("Unknown transform proto: "+JSON.stringify(e));var o=Sv.fromServerFormat(e.fieldPath);return new eb(o,n)},MS.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},MS.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;Ty(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return VE.atPath(this.fromQueryPath(n)).toTarget()},MS.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(Ty(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Ty(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},MS.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Ty(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new VE(t,i,s,a,u,LE.First,c,l).toTarget()},MS.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},MS.prototype.toLabel=function(e){switch(e){case v_.Listen:return null;case v_.ExistenceFilterMismatch:return"existence-filter-mismatch";case v_.LimboResolution:return"limbo-document";default:return _y("Unrecognized query purpose: "+e)}},MS.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},MS.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof KE?t.toUnaryOrFieldFilter(e):_y("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},MS.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):_y("Unknown filter: "+JSON.stringify(e)):[]},MS.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},MS.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},MS.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},MS.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new lS(r,n)},MS.prototype.toDirection=function(e){return AS[e.name]},MS.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return uS.ASCENDING;case"DESCENDING":return uS.DESCENDING;default:return}},MS.prototype.toOperatorName=function(e){return DS[e.name]},MS.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return BE.EQUAL;case"GREATER_THAN":return BE.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return BE.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return BE.LESS_THAN;case"LESS_THAN_OR_EQUAL":return BE.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return BE.ARRAY_CONTAINS;case"IN":return BE.IN;case"ARRAY_CONTAINS_ANY":return BE.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return _y("Unspecified operator");default:return _y("Unknown operator")}},MS.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},MS.prototype.fromFieldPathReference=function(e){return Sv.fromServerFormat(e.fieldPath)},MS.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},MS.prototype.fromPropertyOrder=function(e){return new fS(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},MS.prototype.fromFieldFilter=function(e){return KE.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},MS.prototype.toUnaryOrFieldFilter=function(e){if(e.op===BE.EQUAL){if(e.value.isEqual(Wb.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Db.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},MS.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return KE.create(t,BE.EQUAL,Wb.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return KE.create(n,BE.EQUAL,Db.INSTANCE);case"OPERATOR_UNSPECIFIED":return _y("Unspecified filter");default:return _y("Unknown filter")}},MS.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},MS.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return Sv.fromServerFormat(e)}));return Jg.fromArray(t)},MS);function MS(e,t){this.databaseId=e,this.options=t}var LS=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},FS=(US.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new LS,this.queries.set(t,r)),r.listeners.push(e),Ty(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},US.prototype.unlisten=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},US.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},US.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},US.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},US.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},US.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},US.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},US);function US(e){this.syncEngine=e,this.queries=new Iw((function(e){return e.canonicalId()})),this.onlineState=GT.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var jS=(VS.prototype.onViewSnapshot=function(e){if(Ty(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==aE.Metadata&&t.push(i)}e=new dE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},VS.prototype.onError=function(e){this.queryObserver.error(e)},VS.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},VS.prototype.shouldRaiseInitialEvent=function(e,t){if(Ty(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==GT.Offline;return this.options.waitForSyncWhenOnline&&n?(Ty(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===GT.Offline},VS.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},VS.prototype.raiseInitialEvent=function(e){Ty(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=dE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},VS);function VS(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=GT.Unknown,this.options=n||{}}var qS=(BS.fromSnapshot=function(e,t){for(var n=pg(),r=pg(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case aE.Added:n=n.add(a.doc.key);break;case aE.Removed:r=r.add(a.doc.key)}}return new BS(e,t.fromCache,n,r)},BS);function BS(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}var WS=function(e){this.key=e},zS=function(e){this.key=e},KS=(Object.defineProperty(HS.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),HS.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new fE,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof gw?t:null;h&&(Ty(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:aE.Metadata,doc:h}),d=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:aE.Modified,doc:h}),d=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:aE.Added,doc:h}),d=!0):l&&!h&&(r.track({type:aE.Removed,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(o=h?(a=a.add(h),p?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:aE.Removed,doc:l})}return Ty(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},HS.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},HS.prototype.applyChanges=function(e,t,n){var r=this;Ty(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){function n(e){switch(e){case aE.Added:return 1;case aE.Modified:case aE.Metadata:return 2;case aE.Removed:return 0;default:return _y("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?uE.Synced:uE.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new dE(this.query,e.documentSet,i,o,e.mutatedKeys,s===uE.Local,u,!1),limboChanges:a}:{limboChanges:a}},HS.prototype.applyOnlineStateChange=function(e){return this.current&&e===GT.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new fE,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},HS.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},HS.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return Ty(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},HS.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=pg(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new zS(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new WS(e))})),n},HS.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=pg();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},HS.prototype.computeInitialSnapshot=function(){return dE.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===uE.Local)},HS);function HS(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=pg(),this.mutatedKeys=pg(),this.documentSet=new lE(e.docComparator.bind(e))}var QS=(GS.prototype.run=function(){this.runWithBackOff()},GS.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return ta(e,void 0,void 0,(function(){var e,t,n=this;return na(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},GS.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!RT(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},GS.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},GS.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!iE(t)},GS);function GS(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new xT(this.asyncQueue,Nv.RetryTransaction)}var YS="SyncEngine",XS=function(e,t,n){this.query=e,this.targetId=t,this.view=n},$S=function(e){this.key=e,this.receivedDocument=!1},JS=(Object.defineProperty(ZS.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),ZS.prototype.subscribe=function(e){Ty(null!==e,"SyncEngine listener cannot be null"),Ty(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},ZS.prototype.listen=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},ZS.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i,o,a,s,u;return na(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=c.sent(),i=new KS(e,r.remoteKeys),o=i.computeDocChanges(r.documents),a=gE.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==GT.Offline),Ty(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),Ty(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new XS(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,s.snapshot]}}))}))},ZS.prototype.synchronizeViewAndComputeSnapshot=function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},ZS.prototype.unlisten=function(e){return ta(this,void 0,void 0,(function(){var t,n,r=this;return na(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),Ty(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Q_)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},ZS.prototype.write=function(e,t){return ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},ZS.prototype.runTransaction=function(e,t,n){new QS(e,this.remoteStore,t,n).run()},ZS.prototype.applyRemoteEvent=function(e){return ta(this,void 0,void 0,(function(){var t,n=this;return na(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),Py(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(Ty(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?Ty(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(Ty(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Q_(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},ZS.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===XT.RemoteStore||!this.isPrimary&&t===XT.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);Ty(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},ZS.prototype.rejectListen=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return na(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Qv(Iv.comparator)).insert(r,new _w(r,Kv.forDeletedDoc())),o=pg().add(r),a=new yE(Kv.MIN,{},new tg(nv),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return s.removeAndCleanupTarget(e,t)})).catch(Q_)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},ZS.prototype.applyBatchState=function(e,t,n){return ta(this,void 0,void 0,(function(){var r;return na(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(gy(YS,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):_y("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},ZS.prototype.applySuccessfulWrite=function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Q_(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},ZS.prototype.rejectFailedWrite=function(e,t){return ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Q_(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},ZS.prototype.registerPendingWritesCallback=function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||gy(YS,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},ZS.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},ZS.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new Ny(ky.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},ZS.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Qv(nv)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},ZS.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(Ty(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},ZS.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),Ty(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},ZS.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},ZS.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof WS?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof zS?(gy(YS,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):_y("Unknown limbo change: "+JSON.stringify(i))}},ZS.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){gy(YS,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=VE.atPath(t.path);this.limboResolutionsByTarget[n]=new $S(t),this.remoteStore.listen(new E_(r.toTarget(),n,v_.LimboResolution,dv.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},ZS.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},ZS.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o=this;return na(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=qS.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},ZS.prototype.assertSubscribed=function(e){Ty(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},ZS.prototype.handleCredentialChange=function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},ZS.prototype.applyPrimaryState=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u=this;return na(this,(function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),xy(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},ZS.prototype.resetLimboDocuments=function(){var e=this;xy(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Qv(Iv.comparator)},ZS.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,p;return na(this,(function(d){switch(d.label){case 0:t=[],n=[],r=0,i=e,d.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return d.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=d.sent(),u=0,c=s,d.label=4;case 4:return u<c.length?(l=c[u],Ty(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(f=d.sent()).snapshot&&n.push(f.snapshot),d.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return Ty(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return Ty(!!(p=d.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:d.sent(),d.label=12;case 12:t.push(a),d.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},ZS.prototype.synthesizeTargetToQuery=function(e){return new VE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,LE.First,e.startAt,e.endAt)},ZS.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},ZS.prototype.applyTargetState=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i;return na(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return gy(YS,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=yE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:_y("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},ZS.prototype.applyActiveTargetsChange=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h=this;return na(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(l=r[n],Ty(!this.queriesByTarget[l],"Trying to add an already active target"),[4,this.localStore.getTarget(l)]):[3,6];case 2:return Ty(!!(i=f.sent()),"Query data for active target "+l+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){return na(this,(function(t){switch(t.label){case 0:return s.queriesByTarget[e]?[4,s.localStore.releaseTarget(e,!1).then((function(){h.remoteStore.unlisten(e),h.removeAndCleanupTarget(e)})).catch(Q_)]:[2,"continue"];case 1:return t.sent(),[2]}}))},s=this,u=0,c=t,f.label=7;case 7:return u<c.length?(l=c[u],[5,a(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},ZS.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},ZS.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},ZS.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return pg().add(t.key);var n=pg(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);Ty(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},ZS);function ZS(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Iw((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Qv(Iv.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new tT,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=zg.forSyncEngine(),this.isPrimary=void 0,this.onlineState=GT.Unknown}var eC=(tC.prototype.isAuthenticated=function(){return null!=this.uid},tC.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},tC.prototype.isEqual=function(e){return e.uid===this.uid},tC.UNAUTHENTICATED=new tC(null),tC.GOOGLE_CREDENTIALS=new tC("google-credentials-uid"),tC.FIRST_PARTY=new tC("first-party-uid"),tC);function tC(e){this.uid=e}var nC="SharedClientState",rC="firestore_clients",iC="firestore_mutations",oC="firestore_targets",aC=(sC.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ny(r.error.code,r.error.message)),i?new sC(e,t,r.state,o):(by(nC,"Failed to parse mutation state for ID '"+t+"': "+n),null)},sC.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},sC);function sC(e,t,n,r){this.user=e,this.batchId=t,this.state=n,Ty(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var uC=(cC.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Ny(n.error.code,n.error.message)),r?new cC(e,n.state,i):(by(nC,"Failed to parse target state for ID '"+e+"': "+t),null)},cC.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},cC);function cC(e,t,n){this.targetId=e,this.state=t,Ty(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var lC=(hC.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=mg(),o=0;r&&o<n.activeTargetIds.length;++o)r=OT(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new hC(e,i):(by(nC,"Failed to parse client data for instance '"+e+"': "+t),null)},hC);function hC(e,t){this.clientId=e,this.activeTargetIds=t}var fC=(pC.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in GT&&"string"==typeof t.clientId?new pC(t.clientId,GT[t.onlineState]):(by(nC,"Failed to parse online state: "+e),null)},pC);function pC(e,t){this.clientId=e,this.onlineState=t}var dC=(mC.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},mC.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},mC.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},mC);function mC(){this.activeTargetIds=mg()}var yC=(vC.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},vC.prototype.start=function(){return ta(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return na(this,(function(f){switch(f.label){case 0:return Ty(!this.started,"WebStorageSharedClientState already started"),Ty(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Ty(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=lC.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)l=c[u],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},vC.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},vC.prototype.getAllActiveQueryTargets=function(){var e=mg();return Py(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},vC.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},vC.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},vC.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},vC.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=uC.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},vC.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},vC.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},vC.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},vC.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},vC.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},vC.prototype.setOnlineState=function(e){this.persistOnlineState(e)},vC.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},vC.prototype.getItem=function(e){var t=this.storage.getItem(e);return gy(nC,"READ",e,t),t},vC.prototype.setItem=function(e,t){gy(nC,"SET",e,t),this.storage.setItem(e,t)},vC.prototype.removeItem=function(e){gy(nC,"REMOVE",e),this.storage.removeItem(e)},vC.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(gy(nC,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void by("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return ta(t,void 0,void 0,(function(){var t,n,r,i,o,a;return na(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(Ty(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=dv.INVALID;if(null!=e)try{var n=JSON.parse(e);Ty("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){by(nC,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==dv.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(vC.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),vC.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},vC.prototype.persistMutationState=function(e,t,n){var r=new aC(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},vC.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},vC.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:GT[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},vC.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new uC(e,t,n);this.setItem(r,i.toWebStorageJSON())},vC.prototype.toWebStorageClientStateKey=function(e){return Ty(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),rC+"_"+this.persistenceKey+"_"+e},vC.prototype.toWebStorageQueryTargetMetadataKey=function(e){return oC+"_"+this.persistenceKey+"_"+e},vC.prototype.toWebStorageMutationBatchKey=function(e){var t=iC+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},vC.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},vC.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return Ty(null!==n,"Cannot parse client state key '"+e+"'"),lC.fromWebStorageEntry(n,t)},vC.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);Ty(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return aC.fromWebStorageEntry(new eC(i),r,t)},vC.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);Ty(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return uC.fromWebStorageEntry(r,t)},vC.prototype.fromWebStorageOnlineState=function(e){return fC.fromWebStorageEntry(e)},vC.prototype.handleMutationBatchEvent=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){return e.user.uid!==this.currentUser.uid?(gy(nC,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},vC.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},vC.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(e){return ta(n,void 0,void 0,(function(){return na(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return ta(n,void 0,void 0,(function(){return na(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},vC.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},vC);function vC(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!vC.isAvailable(this.platform))throw new Ny(ky.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new dC,this.clientStateKeyRe=new RegExp("^"+rC+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+iC+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+oC+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}var gC=(bC.prototype.addPendingMutation=function(e){},bC.prototype.updateMutationState=function(e,t,n){},bC.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},bC.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},bC.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},bC.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},bC.prototype.clearQueryState=function(e){delete this.queryState[e]},bC.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},bC.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},bC.prototype.start=function(){return this.localState=new dC,Promise.resolve()},bC.prototype.handleUserChange=function(e,t,n){},bC.prototype.setOnlineState=function(e){},bC.prototype.shutdown=function(){},bC.prototype.writeSequenceNumber=function(e){},bC);function bC(){this.localState=new dC,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var wC="FirestoreClient",_C=(TC.prototype.lruParams=function(){return R_.withCacheSize(this.cacheSizeBytes)},TC);function TC(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var EC=function(){},SC=(CC.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new Dv,r=new Dv,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},CC.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},CC.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof _C?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},CC.prototype.canFallback=function(e){return e instanceof Ny?e.code===ky.FAILED_PRECONDITION||e.code===ky.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},CC.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ny(ky.FAILED_PRECONDITION,"The client has already been terminated.")},CC.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=K_.buildStoragePrefix(this.databaseInfo),i=new PS(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return ta(n,void 0,void 0,(function(){var n,o;return na(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!yC.isAvailable(this.platform))throw new Ny(ky.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new yC(this.asyncQueue,this.platform,r,this.clientId,e):new gC,[4,K_.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},CC.prototype.startMemoryPersistence=function(){return this.persistence=yT.createEagerPersistence(this.clientId),this.sharedClientState=new gC,Promise.resolve(null)},CC.prototype.initializeRest=function(e,t){var n=this;return gy(wC,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return ta(n,void 0,void 0,(function(){var n,i,o,a,s,u,c=this;return na(this,(function(l){switch(l.label){case 0:return n=new CT,this.localStore=new aT(this.persistence,n,e),[4,this.localStore.start()];case 1:return l.sent(),t&&(this.lruScheduler=new x_(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new HT(this.asyncQueue,r,this.credentials,o),s=function(e){return c.syncEngine.applyOnlineStateChange(e,XT.RemoteStore)},u=function(e){return c.syncEngine.applyOnlineStateChange(e,XT.SharedClientState)},this.remoteStore=new OE(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new JS(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new FS(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return ta(c,void 0,void 0,(function(){return na(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return ta(c,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},CC.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),gy(wC,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},CC.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},CC.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return ta(e,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},CC.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Dv;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},CC.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new jS(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},CC.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},CC.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof gw)return e;if(e instanceof _w)return null;throw new Ny(ky.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},CC.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return ta(t,void 0,void 0,(function(){var t,n,r;return na(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new KS(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},CC.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Dv;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},CC.prototype.databaseId=function(){return this.databaseInfo.databaseId},CC.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},CC.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(CC.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),CC.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Dv;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},CC);function CC(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ev.newId()}var IC=(kC.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},kC.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},kC.prototype.mute=function(){this.muted=!0},kC.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},kC);function kC(e){this.observer=e,this.muted=!1}var NC=(AC.documentId=function(){return AC._DOCUMENT_ID},AC.prototype.isEqual=function(e){if(!(e instanceof AC))throw Xy("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},AC._DOCUMENT_ID=new AC(Sv.keyField().canonicalString()),AC);function AC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new Ny(ky.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Zy(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(Vy("FieldPath","string",n,e[n]),0===e[n].length)throw new Ny(ky.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sv(e)}var DC=new RegExp("[~\\*/\\[\\]]"),RC=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},OC=(xC.prototype.getToken=function(){return Promise.resolve(null)},xC.prototype.invalidateToken=function(){},xC.prototype.setChangeListener=function(e){Ty(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(eC.UNAUTHENTICATED)},xC.prototype.removeChangeListener=function(){Ty(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},xC);function xC(){this.changeListener=null}var PC=(MC.prototype.getToken=function(){var e=this;Ty(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new Ny(ky.ABORTED,"getToken aborted due to token change.");return n?(Ty("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new RC(n.accessToken,e.currentUser)):null}))},MC.prototype.invalidateToken=function(){this.forceRefresh=!0},MC.prototype.setChangeListener=function(e){Ty(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},MC.prototype.removeChangeListener=function(){Ty(null!=this.tokenListener,"removeChangeListener() called twice"),Ty(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},MC.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return Ty(null===e||"string"==typeof e,"Received invalid UID: "+e),new eC(e)},MC);function MC(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=eC.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}var LC=(Object.defineProperty(FC.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),FC);function FC(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=eC.FIRST_PARTY}var UC=(jC.prototype.getToken=function(){return Promise.resolve(new LC(this.gapi,this.sessionIndex))},jC.prototype.setChangeListener=function(e){e(eC.FIRST_PARTY)},jC.prototype.removeChangeListener=function(){},jC.prototype.invalidateToken=function(){},jC);function jC(e,t){this.gapi=e,this.sessionIndex=t}function VC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var qC=(BC.delete=function(){return Ly("FieldValue.delete",arguments),zC.instance},BC.serverTimestamp=function(){return Ly("FieldValue.serverTimestamp",arguments),QC.instance},BC.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uy("FieldValue.arrayUnion",arguments,1),new XC(e)},BC.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uy("FieldValue.arrayRemove",arguments,1),new ZC(e)},BC.increment=function(e){return Vy("FieldValue.increment","number",1,e),Fy("FieldValue.increment",arguments,1),new nI(e)},BC.prototype.isEqual=function(e){return this===e},BC);function BC(e){this._methodName=e}var WC,zC=(Zo(KC,WC=qC),KC.instance=new KC,KC);function KC(){return WC.call(this,"FieldValue.delete")||this}var HC,QC=(Zo(GC,HC=qC),GC.instance=new GC,GC);function GC(){return HC.call(this,"FieldValue.serverTimestamp")||this}var YC,XC=(Zo($C,YC=qC),$C);function $C(e){var t=YC.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var JC,ZC=(Zo(eI,JC=qC),eI);function eI(e){var t=JC.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var tI,nI=(Zo(rI,tI=qC),rI);function rI(e){var t=tI.call(this,"FieldValue.increment")||this;return t._operand=e,t}var iI=Dy(qC,"Use FieldValue.<field>() instead."),oI=/^__.*__$/,aI=(sI.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new pb(e,this.data,this.fieldMask,t)):n.push(new lb(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new yb(e,this.fieldTransforms)),n},sI);function sI(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var uI,cI,lI=(hI.prototype.toMutations=function(e,t){var n=[new pb(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new yb(e,this.fieldTransforms)),n},hI);function hI(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function fI(e){switch(e){case uI.Set:case uI.MergeSet:case uI.Update:return!0;case uI.Argument:return!1;default:throw _y("Unexpected case for UserDataSource: "+e)}}(cI=uI=uI||{})[cI.Set=0]="Set",cI[cI.Update=1]="Update",cI[cI.MergeSet=2]="MergeSet",cI[cI.Argument=3]="Argument";var pI=(dI.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new dI(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},dI.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new dI(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},dI.prototype.childContextForArray=function(e){return new dI(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},dI.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Ny(ky.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},dI.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},dI.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},dI.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(fI(this.dataSource)&&oI.test(e))throw this.createError('Document fields cannot begin and end with "__"')},dI);function dI(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var mI=function(e,t){this.databaseId=e,this.key=t},yI=(vI.prototype.parseSetData=function(e,t){var n=new pI(uI.Set,e,Sv.EMPTY_PATH);bI("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new aI(r,null,n.fieldTransforms)},vI.prototype.parseMergeData=function(e,t,n){var r=new pI(uI.MergeSet,e,Sv.EMPTY_PATH);bI("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new tg(Sv.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof NC)h=l._internalPath;else{if("string"!=typeof l)throw _y("Expected stringOrFieldPath to be a string or a FieldPath");h=_I(e,l)}if(!r.contains(h))throw new Ny(ky.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=Jg.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=Jg.fromArray(r.fieldMask),o=r.fieldTransforms;return new aI(a,i,o)},vI.prototype.parseUpdateData=function(e,t){var n=this,r=new pI(uI.Update,e,Sv.EMPTY_PATH);bI("Data must be an object, but it was:",r,t);var i=new tg(Sv.comparator),o=lw.EMPTY;Py(t,(function(t,a){var s=_I(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof zC)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=Jg.fromSet(i);return new lI(o,a,r.fieldTransforms)},vI.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new pI(uI.Update,e,Sv.EMPTY_PATH),o=[wI(e,t)],a=[n];if(r.length%2!=0)throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(wI(e,r[s])),a.push(r[s+1]);var u=new tg(Sv.comparator),c=lw.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof zC)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=Jg.fromSet(u);return new lI(c,d,i.fieldTransforms)},vI.prototype.parseQueryValue=function(e,t){var n=new pI(uI.Argument,e,Sv.EMPTY_PATH),r=this.parseData(t,n);return Ty(null!=r,"Parsed data should not be null."),Ty(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},vI.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=TI(e);throw t.createError(n)}},vI.prototype.parseData=function(e,t){if(gI(e=this.runPreConverter(e,t)))return bI("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof qC)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},vI.prototype.parseObject=function(e,t){var n=this,r=new Qv(nv);return My(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):Py(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new lw(r)},vI.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Db.INSTANCE),n.push(s),r++}return new pw(n)},vI.prototype.parseSentinelFieldValue=function(e,t){if(!fI(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof zC){if(t.dataSource!==uI.MergeSet)throw t.dataSource===uI.Update?(Ty(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof QC)t.fieldTransforms.push(new eb(t.path,yS.instance));else if(e instanceof XC){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new gS(n);t.fieldTransforms.push(new eb(t.path,r))}else if(e instanceof ZC){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new wS(n);t.fieldTransforms.push(new eb(t.path,i))}else if(e instanceof nI){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new TS(o);t.fieldTransforms.push(new eb(t.path,a))}else _y("Unknown FieldValue type: "+e)},vI.prototype.parseScalarValue=function(e,t){if(null===e)return Db.INSTANCE;if("number"==typeof e)return OT(e)?new Vb(e):new Wb(e);if("boolean"==typeof e)return xb.of(e);if("string"==typeof e)return new Hb(e);if(e instanceof Date)return new Yb(Wv.fromDate(e));if(e instanceof Wv)return new Yb(new Wv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof PE)return new sw(e);if(e instanceof sv)return new tw(e);if(e instanceof mI)return new iw(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Qy(e))},vI.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new pI(uI.Argument,e,Sv.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},vI);function vI(e){this.preConverter=e}function gI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wv||e instanceof PE||e instanceof sv||e instanceof mI||e instanceof qC)}function bI(e,t,n){if(!gI(n)||!Hy(n)){var r=Qy(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function wI(e,t){if(t instanceof NC)return t._internalPath;if("string"==typeof t)return _I(e,t);throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function _I(e,t){try{return function(e){if(0<=e.search(DC))throw new Ny(ky.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(NC.bind.apply(NC,aa([void 0],e.split("."))))}catch(t){throw new Ny(ky.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=TI(t);throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function TI(e){return e instanceof Error?e.message:e.toString()}var EI=R_.COLLECTION_DISABLED,SI=(CI.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},CI);function CI(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Ny(ky.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else By("settings","non-empty string","host",e.host),this.host=e.host,Wy("settings","boolean","ssl",e.ssl),this.ssl=Oy(e.ssl,!0);if(Yy("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Wy("settings","object","credentials",e.credentials),this.credentials=e.credentials,Wy("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?by("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&by("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Oy(e.timestampsInSnapshots,!0),Wy("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=R_.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==EI&&e.cacheSizeBytes<R_.MINIMUM_CACHE_SIZE_BYTES)throw new Ny(ky.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+R_.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}Wy("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var II=(kI.prototype.settings=function(e){if(Fy("Firestore.settings",arguments,1),Vy("Firestore.settings","object",1,e),Ry(e,"persistence"))throw new Ny(ky.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new SI(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new Ny(ky.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new OC;switch(e.type){case"gapi":var t=e.client;return Ty(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new UC(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Ny(ky.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},kI.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},kI.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},kI.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Ny(ky.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&by("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=Oy(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new _C(this._settings.cacheSizeBytes,t))},kI.prototype.clearPersistence=function(){var e=this,t=K_.buildStoragePrefix(this.makeDatabaseInfo()),n=new Dv;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return ta(e,void 0,void 0,(function(){var e;return na(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Ny(ky.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,K_.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},kI.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(kI.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),kI.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},kI.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),VC(e))return this.onSnapshotsInSyncInternal(e);Vy("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},kI.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new IC({next:function(){e.next&&e.next()},error:function(e){throw _y("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},kI.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new EC),this._firestoreClient},kI.prototype.makeDatabaseInfo=function(){return new lv(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},kI.prototype.configureClient=function(e){Ty(!!this._settings.host,"FirestoreSettings.host is not set"),Ty(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new SC(Ey.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},kI.prototype.createDataConverter=function(e){return new yI((function(t){if(t instanceof OI){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new Ny(ky.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new mI(e,t._key)}return t}))},kI.databaseIdFromApp=function(e){var t=e.options;if(!Ry(t,"projectId"))throw new Ny(ky.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Ny(ky.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new fv(n)},Object.defineProperty(kI.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Ny(ky.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),kI.prototype.collection=function(e){return Fy("Firestore.collection",arguments,1),Vy("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new HI(wv.fromString(e),this)},kI.prototype.doc=function(e){return Fy("Firestore.doc",arguments,1),Vy("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),OI.forPath(wv.fromString(e),this)},kI.prototype.collectionGroup=function(e){if(Fy("Firestore.collectionGroup",arguments,1),Vy("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Ny(ky.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new qI(new VE(wv.EMPTY_PATH,e),this)},kI.prototype.runTransaction=function(e){var t=this;return Fy("Firestore.runTransaction",arguments,1),Vy("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new NI(t,n))}))},kI.prototype.batch=function(){return this.ensureClientConfigured(),new DI(this)},Object.defineProperty(kI,"logLevel",{get:function(){switch(yy()){case ay.DEBUG:return"debug";case ay.ERROR:return"error";case ay.SILENT:return"silent";default:return _y("Unknown log level: "+yy())}},enumerable:!0,configurable:!0}),kI.setLogLevel=function(e){switch(Fy("Firestore.setLogLevel",arguments,1),Vy("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":vy(ay.DEBUG);break;case"error":vy(ay.ERROR);break;case"silent":vy(ay.SILENT);break;default:throw new Ny(ky.INVALID_ARGUMENT,"Invalid log level: "+e)}},kI.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},kI);function kI(e){var t=this;if(this._firebaseApp=null,this._queue=new xv,this.INTERNAL={delete:function(){return ta(t,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var n=e;this._firebaseApp=n,this._databaseId=kI.databaseIdFromApp(n),this._persistenceKey=n.name,this._credentials=new PC(n)}else{var r=e;if(!r.projectId)throw new Ny(ky.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new fv(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new OC}this._settings=new SI({}),this._dataConverter=this.createDataConverter(this._databaseId)}var NI=(AI.prototype.get=function(e){var t=this;Fy("Transaction.get",arguments,1);var n=$I("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return _y("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof _w)return new LI(t._firestore,n._key,null,!1,!1);if(r instanceof gw)return new LI(t._firestore,n._key,r,!1,!1);throw _y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},AI.prototype.set=function(e,t,n){jy("Transaction.set",arguments,2,3);var r=$I("Transaction.set",e,this._firestore),i=(n=GI("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},AI.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof NC?(Uy("Transaction.update",arguments,3),r=$I("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(Fy("Transaction.update",arguments,2),r=$I("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},AI.prototype.delete=function(e){Fy("Transaction.delete",arguments,1);var t=$I("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},AI);function AI(e,t){this._firestore=e,this._transaction=t}var DI=(RI.prototype.set=function(e,t,n){jy("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=$I("WriteBatch.set",e,this._firestore),i=(n=GI("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,ob.NONE)),this},RI.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof NC?(Uy("WriteBatch.update",arguments,3),r=$I("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(Fy("WriteBatch.update",arguments,2),r=$I("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,ob.exists(!0))),this},RI.prototype.delete=function(e){Fy("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=$I("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Eb(t._key,ob.NONE)),this},RI.prototype.commit=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},RI.prototype.verifyNotCommitted=function(){if(this._committed)throw new Ny(ky.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},RI);function RI(e){this._firestore=e,this._mutations=[],this._committed=!1}var OI=(xI.forPath=function(e,t){if(e.length%2!=0)throw new Ny(ky.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new xI(new Iv(e),t)},Object.defineProperty(xI.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(xI.prototype,"parent",{get:function(){return new HI(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(xI.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),xI.prototype.collection=function(e){if(Fy("DocumentReference.collection",arguments,1),Vy("DocumentReference.collection","non-empty string",1,e),!e)throw new Ny(ky.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=wv.fromString(e);return new HI(this._key.path.child(t),this.firestore)},xI.prototype.isEqual=function(e){if(!(e instanceof xI))throw Xy("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},xI.prototype.set=function(e,t){jy("DocumentReference.set",arguments,1,2);var n=(t=GI("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,ob.NONE))},xI.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof NC?(Uy("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(Fy("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,ob.exists(!0)))},xI.prototype.delete=function(){return Fy("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Eb(this._key,ob.NONE)])},xI.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jy("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||VC(e[i])||(Yy("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),Wy("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=VC(e[i])?e[i]:(Vy("DocumentReference.onSnapshot","function",i,e[i]),qy("DocumentReference.onSnapshot","function",i+1,e[i+1]),qy("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},xI.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new IC({next:function(e){if(t.next){Ty(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new LI(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(VE.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},xI.prototype.get=function(e){var t=this;return jy("DocumentReference.get",arguments,0,1),XI("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new LI(t.firestore,t._key,e,!0,e instanceof gw&&e.hasLocalMutations))}),r):t.getViaSnapshotListener(n,r,e)}))},xI.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Ny(ky.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Ny(ky.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},xI);function xI(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}var PI=(MI.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},MI);function MI(e,t){this.hasPendingWrites=e,this.fromCache=t}var LI=(FI.prototype.data=function(e){return jy("DocumentSnapshot.data",arguments,0,1),e=YI("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),Cb.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},FI.prototype.get=function(e,t){if(jy("DocumentSnapshot.get",arguments,1,2),t=YI("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(wI("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Cb.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(FI.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"ref",{get:function(){return new OI(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(FI.prototype,"metadata",{get:function(){return new PI(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),FI.prototype.isEqual=function(e){if(!(e instanceof FI))throw Xy("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},FI.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.convertValue(i,t)})),r},FI.prototype.convertValue=function(e,t){if(e instanceof lw)return this.convertObject(e,t);if(e instanceof pw)return this.convertArray(e,t);if(e instanceof iw){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||by("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new OI(n,this._firestore)}return e.value(t)},FI.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.convertValue(e,t)}))},FI);function FI(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}var UI,jI=(Zo(VI,UI=LI),VI.prototype.data=function(e){var t=UI.prototype.data.call(this,e);return Ty("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},VI);function VI(){return null!==UI&&UI.apply(this,arguments)||this}var qI=(BI.prototype.where=function(e,t,n){var r;Fy("Query.where",arguments,3),Gy("Query.where",3,n),function(e,t,n,r){if(!t.some((function(e){return e===r})))throw new Ny(ky.INVALID_ARGUMENT,"Invalid value "+Qy(r)+" provided to function Query.where() for its "+Jy(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,t);var i=wI("Query.where",e),o=BE.fromString(t);if(i.isKeyField()){if(o===BE.ARRAY_CONTAINS||o===BE.ARRAY_CONTAINS_ANY)throw new Ny(ky.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===BE.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new pw(a)}else r=this.parseDocumentIdValue(n)}else o!==BE.IN&&o!==BE.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var l=KE.create(i,o,r);return this.validateNewFilter(l),new BI(this._query.addFilter(l),this.firestore)},BI.prototype.orderBy=function(e,t){var n;if(jy("Query.orderBy",arguments,1,2),qy("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=uS.ASCENDING;else{if("desc"!==t)throw new Ny(ky.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=uS.DESCENDING}if(null!==this._query.startAt)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=wI("Query.orderBy",e),i=new fS(r,n);return this.validateNewOrderBy(i),new BI(this._query.addOrderBy(i),this.firestore)},BI.prototype.limit=function(e){return Fy("Query.limit",arguments,1),Vy("Query.limit","number",1,e),$y("Query.limit",1,e),new BI(this._query.withLimitToFirst(e),this.firestore)},BI.prototype.limitToLast=function(e){return Fy("Query.limitToLast",arguments,1),Vy("Query.limitToLast","number",1,e),$y("Query.limitToLast",1,e),new BI(this._query.withLimitToLast(e),this.firestore)},BI.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Uy("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new BI(this._query.withStartAt(r),this.firestore)},BI.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Uy("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new BI(this._query.withStartAt(r),this.firestore)},BI.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Uy("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new BI(this._query.withEndAt(r),this.firestore)},BI.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Uy("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new BI(this._query.withEndAt(r),this.firestore)},BI.prototype.isEqual=function(e){if(!(e instanceof BI))throw Xy("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},BI.prototype.boundFromDocOrFields=function(e,t,n,r){if(Gy(e,1,t),t instanceof LI){if(0<n.length)throw new Ny(ky.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Ny(ky.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},BI.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new iw(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Jb)throw new Ny(ky.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new lS(r,n)},BI.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Ny(ky.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(wv.fromString(a));if(!Iv.isDocumentKey(s))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Iv(s);i.push(new iw(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new lS(i,n)},BI.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jy("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||VC(e[i])||(Yy("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),Wy("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=VC(e[i])?e[i]:(Vy("Query.onSnapshot","function",i,e[i]),qy("Query.onSnapshot","function",i+1,e[i+1]),qy("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},BI.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new IC({next:function(e){t.next&&t.next(new WI(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},BI.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new Ny(ky.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},BI.prototype.get=function(e){var t=this;return jy("Query.get",arguments,0,1),XI("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new WI(t.firestore,t._query,e))}),r):t.getViaSnapshotListener(n,r,e)}))},BI.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Ny(ky.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},BI.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(wv.fromString(e));if(!Iv.isDocumentKey(t))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new iw(this.firestore._databaseId,new Iv(t))}if(e instanceof OI){var n=e;return new iw(this.firestore._databaseId,n._key)}throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qy(e)+".")},BI.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Ny(ky.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new Ny(ky.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new Ny(ky.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new Ny(ky.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},BI.prototype.validateNewFilter=function(e){if(e instanceof KE){var t=[BE.ARRAY_CONTAINS,BE.ARRAY_CONTAINS_ANY],n=[BE.IN,BE.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new Ny(ky.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ny(ky.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},BI.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},BI.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Ny(ky.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},BI);function BI(e,t){this._query=e,this.firestore=t}var WI=(Object.defineProperty(zI.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(zI.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(zI.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),zI.prototype.forEach=function(e,t){var n=this;jy("QuerySnapshot.forEach",arguments,1,2),Vy("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(zI.prototype,"query",{get:function(){return new qI(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),zI.prototype.docChanges=function(e){e&&(Yy("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),Wy("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Ny(ky.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map((function(t){var o=new jI(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return Ty(t.type===aE.Added,"Invalid event type for first snapshot"),Ty(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==aE.Metadata})).map((function(t){var r=new jI(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==aE.Added&&(Ty(0<=(i=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==aE.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case aE.Added:return"added";case aE.Modified:case aE.Metadata:return"modified";case aE.Removed:return"removed";default:return _y("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:a}}))}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},zI.prototype.isEqual=function(e){if(!(e instanceof zI))throw Xy("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},zI.prototype.convertToDocumentImpl=function(e){return new jI(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},zI);function zI(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new PI(n.hasPendingWrites,n.fromCache)}aa(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(WI.prototype.docChanges,e,{get:function(){return function(){throw new Ny(ky.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var KI,HI=(Zo(QI,KI=qI),Object.defineProperty(QI.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(QI.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new OI(new Iv(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(QI.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),QI.prototype.doc=function(e){if(jy("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ev.newId()),Vy("CollectionReference.doc","non-empty string",1,e),""===e)throw new Ny(ky.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=wv.fromString(e);return OI.forPath(this._query.path.child(t),this.firestore)},QI.prototype.add=function(e){Fy("CollectionReference.add",arguments,1),Vy("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},QI);function QI(e,t){var n=KI.call(this,VE.atPath(e),t)||this;if(e.length%2!=1)throw new Ny(ky.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return n}function GI(e,t){if(void 0===t)return{merge:!1};if(Yy(e,t,["merge","mergeFields"]),Wy(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Qy(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ny(ky.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+Qy(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof NC})),void 0!==t.mergeFields&&void 0!==t.merge)throw new Ny(ky.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function YI(e,t){return void 0===t?{}:(Yy(e,t,["serverTimestamps"]),zy(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function XI(e,t){qy(e,"object",1,t),t&&(Yy(e,t,["source"]),zy(e,0,"source",t.source,["default","server","cache"]))}function $I(e,t,n){if(t instanceof OI){if(t.firestore!==n)throw new Ny(ky.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Xy(e,"DocumentReference",1,t)}var JI=Dy(II,"Use firebase.firestore() instead."),ZI=Dy(NI,"Use firebase.firestore().runTransaction() instead."),ek=Dy(DI,"Use firebase.firestore().batch() instead."),tk=Dy(OI,"Use firebase.firestore().doc() instead."),nk=Dy(LI),rk=Dy(jI),ik=Dy(qI),ok=Dy(WI),ak=Dy(HI,"Use firebase.firestore().collection() instead."),sk={Firestore:JI,GeoPoint:PE,Timestamp:Wv,Blob:cv,Transaction:ZI,WriteBatch:ek,DocumentReference:tk,DocumentSnapshot:nk,Query:ik,QueryDocumentSnapshot:rk,QuerySnapshot:ok,CollectionReference:ak,FieldPath:NC,FieldValue:iI,setLogLevel:II.setLogLevel,CACHE_SIZE_UNLIMITED:EI},uk=(ck.prototype.addCallback=function(e){},ck.prototype.shutdown=function(){},ck);function ck(){}var lk="ConnectivityMonitor",hk=(fk.prototype.addCallback=function(e){this.callbacks.push(e)},fk.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},fk.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},fk.prototype.onNetworkAvailable=function(){gy(lk,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},fk.prototype.onNetworkUnavailable=function(){gy(lk,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},fk.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},fk);function fk(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var pk=(dk.prototype.onOpen=function(e){Ty(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},dk.prototype.onClose=function(e){Ty(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},dk.prototype.onMessage=function(e){Ty(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},dk.prototype.close=function(){this.closeFn()},dk.prototype.send=function(e){this.sendFn(e)},dk.prototype.callOnOpen=function(){Ty(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},dk.prototype.callOnClose=function(e){Ty(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},dk.prototype.callOnMessage=function(e){Ty(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},dk);function dk(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var mk="Connection",yk={BatchGetDocuments:"batchGet",Commit:"commit"},vk="gl-js/ fire/"+dy,gk=(bk.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=vk},bk.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){var s=new py;s.listenOnce(hy.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ly.NO_ERROR:var t=s.getResponseJson();gy(mk,"XHR received:",JSON.stringify(t)),o(t);break;case ly.TIMEOUT:gy(mk,'RPC "'+e+'" timed out'),a(new Ny(ky.DEADLINE_EXCEEDED,"Request time out"));break;case ly.HTTP_ERROR:var n=s.getStatus();if(gy(mk,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(ky).indexOf(t)?t:ky.UNKNOWN}(r.status);a(new Ny(i,r.message))}else a(new Ny(ky.UNKNOWN,"Server responded with status "+s.getStatus()))}else gy(mk,'RPC "'+e+'" failed'),a(new Ny(ky.UNAVAILABLE,"Connection failed."));break;default:_y('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{gy(mk,'RPC "'+e+'" completed.')}}));var u=ea({},t);delete u.database;var c=JSON.stringify(u);gy(mk,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),s.send(i,"POST",c,l,15)}))},bk.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},bk.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=cy(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),ba()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){s.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}gy(mk,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new pk({sendFn:function(e){c?gy(mk,"Not sending because WebChannel is closed:",e):(u||(gy(mk,"Opening WebChannel transport."),s.open(),u=!0),gy(mk,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return a(fy.EventType.OPEN,(function(){c||gy(mk,"WebChannel transport opened.")})),a(fy.EventType.CLOSE,(function(){c||(c=!0,gy(mk,"WebChannel transport closed"),l.callOnClose())})),a(fy.EventType.ERROR,(function(e){c||(c=!0,gy(mk,"WebChannel transport errored:",e),l.callOnClose(new Ny(ky.UNAVAILABLE,"The operation could not be completed")))})),a(fy.EventType.MESSAGE,(function(e){if(!c){var t=e.data[0];Ty(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){gy(mk,"WebChannel received error:",r);var i=r.status,o=function(e){var t=eE[e];if(void 0!==t)return oE(t)}(i),a=r.message;void 0===o&&(o=ky.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.callOnClose(new Ny(o,a)),s.close()}else gy(mk,"WebChannel received:",t),l.callOnMessage(t)}})),setTimeout((function(){l.callOnOpen()}),0),l},bk.prototype.makeUrl=function(e){var t=yk[e];return Ty(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},bk);function bk(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var wk=(Object.defineProperty(_k.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(_k.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),_k.prototype.loadConnection=function(e){return Promise.resolve(new gk(e))},_k.prototype.newConnectivityMonitor=function(){return hk.isAvailable()?new hk:new uk},_k.prototype.newSerializer=function(e){return new PS(e,{useProto3Json:!0})},_k.prototype.formatJSON=function(e){return JSON.stringify(e)},_k.prototype.atob=function(e){return atob(e)},_k.prototype.btoa=function(e){return btoa(e)},_k);function _k(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}Ey.setPlatform(new wk),function(e){e.INTERNAL.registerService("firestore",(function(e){return new II(e)}),function(e){Ty(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(sk))}(cs);var Tk,Ek={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sk=(Zo(Ck,Tk=Error),Ck);function Ck(e,t,n){var r=Tk.call(this,t)||this;return Object.setPrototypeOf(r,Ck.prototype),r.code=e,r.details=n,r}var Ik=(kk.prototype.getAuthToken=function(){return ta(this,void 0,void 0,(function(){var e;return na(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},kk.prototype.getInstanceIdToken=function(){return ta(this,void 0,void 0,(function(){var e;return na(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},kk.prototype.getContext=function(){return ta(this,void 0,void 0,(function(){var e,t;return na(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},kk);function kk(e){this.app=e}function Nk(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var Ak=(Dk.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return Nk(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},Dk.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?Nk(e,(function(e){return t.decode(e)})):e},Dk);function Dk(){}var Rk,Ok=(Object.defineProperty(xk.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),xk.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+n+"/"+e},xk.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},xk.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},xk.prototype.postJSON=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i;return na(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},xk.prototype.call=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return na(this,(function(h){switch(h.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=h.sent()).authToken&&o.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&o.append("Firebase-Instance-ID-Token",a.instanceIdToken),s=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,o),function(e){return new Promise((function(t,n){setTimeout((function(){n(new Sk("deadline-exceeded","deadline-exceeded"))}),e)}))}(s),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new Sk("cancelled","Firebase Functions instance was deleted.");if(c=function(e,t,n){var r=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!Ek[s])return new Sk("internal","internal");r=Ek[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new Sk(r,i,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new Sk("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new Sk("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}}))}))},xk);function xk(e,t){var n=this;void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new Ak,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new Ik(e),this.cancelAllRequests=new Promise((function(e){n.deleteService=function(){return e()}}))}function Pk(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Mk(e,t,n){var r,i=new Promise((function(i,o){Pk(r=e[t].apply(e,n)).then(i,o)}));return i.request=r,i}function Lk(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function Fk(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return Mk(this[t],r,arguments)})}))}function Uk(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function jk(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return function(e,t,n){var r=Mk(e,t,n);return r.then((function(e){if(e)return new qk(e,r.request)}))}(this[t],r,arguments)})}))}function Vk(e){this._index=e}function qk(e,t){this._cursor=e,this._request=t}function Bk(e){this._store=e}function Wk(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function zk(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new Wk(n)}function Kk(e){this._db=e}Rk={Functions:Ok},cs.INTERNAL.registerService("functions",(function(e,t,n){return new Ok(e,n)}),Rk,void 0,!0),Lk(Vk,"_index",["name","keyPath","multiEntry","unique"]),Fk(Vk,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),jk(Vk,"_index",IDBIndex,["openCursor","openKeyCursor"]),Lk(qk,"_cursor",["direction","key","primaryKey","value"]),Fk(qk,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(qk.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),Pk(t._request).then((function(e){if(e)return new qk(e,t._request)}))}))})})),Bk.prototype.createIndex=function(){return new Vk(this._store.createIndex.apply(this._store,arguments))},Bk.prototype.index=function(){return new Vk(this._store.index.apply(this._store,arguments))},Lk(Bk,"_store",["name","keyPath","indexNames","autoIncrement"]),Fk(Bk,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),jk(Bk,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Uk(Bk,"_store",IDBObjectStore,["deleteIndex"]),Wk.prototype.objectStore=function(){return new Bk(this._tx.objectStore.apply(this._tx,arguments))},Lk(Wk,"_tx",["objectStoreNames","mode"]),Uk(Wk,"_tx",IDBTransaction,["abort"]),zk.prototype.createObjectStore=function(){return new Bk(this._db.createObjectStore.apply(this._db,arguments))},Lk(zk,"_db",["name","version","objectStoreNames"]),Uk(zk,"_db",IDBDatabase,["deleteObjectStore","close"]),Kk.prototype.transaction=function(){return new Wk(this._db.transaction.apply(this._db,arguments))},Lk(Kk,"_db",["name","version","objectStoreNames"]),Uk(Kk,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[Bk,Vk].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=function(e){return Array.prototype.slice.call(e)}(arguments),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[Vk,Bk].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})}));var Hk,Qk=1e4,Gk="w:0.3.4",Yk="FIS_v2",Xk="https://firebaseinstallations.googleapis.com/v1",$k=36e5,Jk=((Hk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Hk["not-registered"]="Firebase Installation is not registered.",Hk["installation-not-found"]="Firebase Installation not found.",Hk["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Hk["app-offline"]="Could not process request. Application offline.",Hk["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Hk),Zk=new Sa("installations","Installations",Jk);function eN(e){return e instanceof Ta&&e.code.includes("request-failed")}function tN(e){var t,n;if(!e||!e.options)throw nN("App Configuration");if(!e.name)throw nN("App Name");try{for(var r=ra(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw nN(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function nN(e){return Zk.create("missing-app-config-values",{valueName:e})}function rN(e){var t=e.projectId;return Xk+"/projects/"+t+"/installations"}function iN(e){return{token:e.token,requestStatus:2,expiresIn:function(e){return Number(e.replace("s","000"))}(e.expiresIn),creationTime:Date.now()}}function oN(e,t){return ta(this,void 0,void 0,(function(){var n,r;return na(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Zk.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function aN(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sN(e,t){var n=t.refreshToken,r=aN(e);return r.append("Authorization",function(e){return Yk+" "+e}(n)),r}function uN(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return 500<=(t=n.sent()).status&&t.status<600?[2,e()]:[2,t]}}))}))}function cN(e){return new Promise((function(t){setTimeout(t,e)}))}var lN=/^[cdef][\w-]{21}$/,hN="";function fN(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,oa(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return lN.test(t)?t:hN}catch(e){return hN}}var pN,dN="firebase-installations-database",mN=1,yN="firebase-installations-store",vN=null;function gN(){return vN=vN||function(e,t,n){var r=Mk(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new zk(i.result,e.oldVersion,i.transaction))}),r.then((function(e){return new Kk(e)}))}(dN,mN,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(yN)}}))}function bN(e,t){return ta(this,void 0,void 0,(function(){var n,r,i;return na(this,(function(o){switch(o.label){case 0:return n=TN(e),[4,gN()];case 1:return r=o.sent(),[4,(i=r.transaction(yN,"readwrite")).objectStore(yN).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function wN(e){return ta(this,void 0,void 0,(function(){var t,n,r;return na(this,(function(i){switch(i.label){case 0:return t=TN(e),[4,gN()];case 1:return n=i.sent(),[4,(r=n.transaction(yN,"readwrite")).objectStore(yN).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function _N(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o,a,s;return na(this,(function(u){switch(u.label){case 0:return n=TN(e),[4,gN()];case 1:return r=u.sent(),i=r.transaction(yN,"readwrite"),[4,(o=i.objectStore(yN)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),[2,s]}}))}))}function TN(e){return e.appName+"!"+e.appId}function EN(e){return ta(this,void 0,void 0,(function(){var t,n,r;return na(this,(function(i){switch(i.label){case 0:return[4,_N(e,(function(n){var r=function(e){return CN(e||{fid:fN(),registrationStatus:0})}(n),i=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){switch(o.label){case 0:return[4,SN(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,cN(100)];case 3:return o.sent(),[4,SN(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,EN(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Zk.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return ta(this,void 0,void 0,(function(){var n,r;return na(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(e,t){var n=t.fid;return ta(this,void 0,void 0,(function(){var t,r,i,o,a,s;return na(this,(function(u){switch(u.label){case 0:return t=rN(e),r=aN(e),i={fid:n,authVersion:Yk,appId:e.appId,sdkVersion:Gk},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,uN((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=u.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:iN(s.authToken)}];case 3:return[4,oN("Create Installation",a)];case 4:throw u.sent()}}))}))}(e,t)];case 1:return n=i.sent(),[2,bN(e,n)];case 2:return eN(r=i.sent())&&409===r.serverCode?[4,wN(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,bN(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==hN?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function SN(e){return _N(e,(function(e){if(!e)throw Zk.create("installation-not-found");return CN(e)}))}function CN(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+Qk<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function IN(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o,a;return na(this,(function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return rN(e)+"/"+n+"/authTokens:generate"}(e,t),r=sN(e,t),i={installation:{sdkVersion:Gk}},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,uN((function(){return fetch(n,o)}))];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,iN(s.sent())];case 3:return[4,oN("Generate Auth Token",a)];case 4:throw s.sent()}}))}))}function kN(e,t){return void 0===t&&(t=!1),ta(this,void 0,void 0,(function(){var n,r,i;return na(this,(function(o){switch(o.label){case 0:return[4,_N(e,(function(r){if(!AN(r))throw Zk.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+$k}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return ta(this,void 0,void 0,(function(){var n,r;return na(this,(function(i){switch(i.label){case 0:return[4,NN(e)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,cN(100)];case 3:return i.sent(),[4,NN(e)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,kN(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw Zk.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return ea(ea({},e),{authToken:t})}(r);return n=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i;return na(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,IN(e,t)];case 1:return n=o.sent(),i=ea(ea({},t),{authToken:n}),[4,bN(e,i)];case 2:return o.sent(),[2,n];case 3:return!eN(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,wN(e)];case 4:return o.sent(),[3,7];case 5:return i=ea(ea({},t),{authToken:{requestStatus:0}}),[4,bN(e,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function NN(e){return _N(e,(function(e){if(!AN(e))throw Zk.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+Qk<Date.now()}(e.authToken)?ea(ea({},e),{authToken:{requestStatus:0}}):e}))}function AN(e){return void 0!==e&&2===e.registrationStatus}function DN(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return rN(e)+"/"+n}(e,t),r=sN(e,t),i={method:"DELETE",headers:r},[4,uN((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,oN("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}cs.INTERNAL.registerService("installations",(function(e){return tN(e),{app:e,getId:function(){return function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){switch(o.label){case 0:return[4,EN(t=tN(e))];case 1:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?i.catch(console.error):kN(t).catch(console.error),[2,r.fid]}}))}))}(e)},getToken:function(t){return function(e,t){return void 0===t&&(t=!1),ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){switch(r.label){case 0:return[4,function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,EN(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(n=tN(e))];case 1:return r.sent(),[4,kN(n,t)];case 2:return[2,r.sent().token]}}))}))}(e,t)},delete:function(){return function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:return[4,_N(t=tN(e),(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Zk.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Zk.create("app-offline");case 3:return[4,DN(t,n)];case 4:return r.sent(),[4,wN(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(e)}}}));var RN,ON,xN=((pN={})["only-available-in-window"]="This method is available in a Window context.",pN["only-available-in-sw"]="This method is available in a service worker context.",pN["should-be-overriden"]="This method should be overriden by extended classes.",pN["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",pN["permission-default"]="The required permissions were not granted and dismissed instead.",pN["permission-blocked"]="The required permissions were not granted and blocked instead.",pN["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",pN["notifications-blocked"]="Notifications have been blocked.",pN["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",pN["sw-registration-expected"]="A service worker registration was the expected input.",pN["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",pN["invalid-saved-token"]="Unable to access details of the saved token.",pN["sw-reg-redundant"]="The service worker being used for push was made redundant.",pN["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",pN["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",pN["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",pN["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",pN["token-update-no-token"]="FCM returned no token when updating the user to push.",pN["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",pN["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",pN["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",pN["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",pN["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",pN["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",pN["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",pN["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",pN["failed-to-delete-token"]="Unable to delete the currently saved token.",pN["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",pN["bad-scope"]="The service worker scope must be a string with at least one character.",pN["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",pN["bad-subscription"]="The subscription must be a valid PushSubscription.",pN["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",pN["failed-delete-vapid-key"]="The VAPID key could not be deleted.",pN["invalid-public-vapid-key"]="The public VAPID key must be a string.",pN["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",pN["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",pN),PN=new Sa("messaging","Messaging",xN),MN=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),LN="google.c.a.c_id";function FN(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function UN(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,oa(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(ON=RN=RN||{}).PUSH_MSG_RECEIVED="push-msg-received",ON.NOTIFICATION_CLICKED="notification-clicked";var jN=(VN.prototype.getToken=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i,o,a,s,u;return na(this,(function(c){switch(c.label){case 0:return[4,BN(e)];case 1:r=c.sent(),i=WN(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(qN(e),o)];case 3:return[4,c.sent().json()];case 4:return a=c.sent(),[3,6];case 5:throw s=c.sent(),PN.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,PN.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw PN.create("token-subscribe-no-token");return[2,a.token]}}))}))},VN.prototype.updateToken=function(e,t,n,r){return ta(this,void 0,void 0,(function(){var i,o,a,s,u,c;return na(this,(function(l){switch(l.label){case 0:return[4,BN(t)];case 1:i=l.sent(),o=WN(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(qN(t)+"/"+e.fcmToken,a)];case 3:return[4,l.sent().json()];case 4:return s=l.sent(),[3,6];case 5:throw u=l.sent(),PN.create("token-update-failed",{errorInfo:u});case 6:if(s.error)throw c=s.error.message,PN.create("token-update-failed",{errorInfo:c});if(!s.token)throw PN.create("token-update-no-token");return[2,s.token]}}))}))},VN.prototype.deleteToken=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o,a;return na(this,(function(s){switch(s.label){case 0:return[4,BN(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(qN(e)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,PN.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),PN.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))},VN);function VN(){}function qN(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.options.projectId+"/registrations"}function BN(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,e.installations().getToken()];case 1:return t=n.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function WN(e,t){var n=UN(e.getKey("p256dh")),r=UN(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return FN(t.buffer,MN.buffer)||(i.web.applicationPubKey=UN(t)),i}function zN(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var KN="undefined",HN="fcm_token_object_Store",QN=(GN.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},GN.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},GN.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},GN.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},GN.prototype.closeDatabase=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},GN.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),ta(this,void 0,void 0,(function(){var n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,function(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},GN.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},GN);function GN(){this.dbPromise=null}var YN,XN=(Zo($N,YN=QN),$N.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(e){var t=indexedDB.open(KN);t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains(HN)){var n=e.transaction(HN).objectStore(HN),r=new jN,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;if(n){var o=n.value;r.deleteToken(t,o),n.continue()}else e.close(),indexedDB.deleteDatabase(KN)}}}(t.result,e)}}(this.app);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=ea({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=zN(t.vapidKey)),"string"==typeof t.auth&&(n.auth=zN(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=zN(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=ea({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},$N.prototype.getTokenDetailsFromToken=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){if(!e)throw PN.create("bad-token");return JN({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},$N.prototype.getTokenDetailsFromSWScope=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){if(!e)throw PN.create("bad-scope");return JN({swScope:e}),[2,this.get(e)]}))}))},$N.prototype.saveTokenDetails=function(e){return ta(this,void 0,void 0,(function(){return na(this,(function(t){if(!e.swScope)throw PN.create("bad-scope");if(!e.vapidKey)throw PN.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw PN.create("bad-subscription");if(!e.fcmSenderId)throw PN.create("bad-sender-id");if(!e.fcmToken)throw PN.create("bad-token");return JN(e),[2,this.put(e)]}))}))},$N.prototype.deleteToken=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(PN.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw PN.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},$N);function $N(e){var t=YN.call(this)||this;return t.app=e,t.dbName="fcm_token_details_db",t.dbVersion=4,t.objectStoreName="fcm_token_object_Store",t}function JN(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw PN.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw PN.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw PN.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw PN.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw PN.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw PN.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw PN.create("bad-sender-id")}var ZN,eA=(Zo(tA,ZN=QN),tA.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},tA.prototype.getVapidFromSWScope=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw PN.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},tA.prototype.saveVapidDetails=function(e,t){return ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){if("string"!=typeof e||0===e.length)throw PN.create("bad-scope");if(null===t||65!==t.length)throw PN.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},tA.prototype.deleteVapidDetails=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw PN.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},tA);function tA(){var e=null!==ZN&&ZN.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}var nA=(rA.prototype.getToken=function(){return ta(this,void 0,void 0,(function(){var e,t,n,r,i;return na(this,(function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw PN.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},rA.prototype.manageExistingToken=function(e,t,n,r){return ta(this,void 0,void 0,(function(){return na(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!FN(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=FN(e.getKey("auth"),n.auth),o=FN(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},rA.prototype.updateToken=function(e,t,n,r){return ta(this,void 0,void 0,(function(){var i,o,a;return na(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.app,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},rA.prototype.getNewToken=function(e,t,n){return ta(this,void 0,void 0,(function(){var r,i;return na(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.app,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},rA.prototype.deleteToken=function(e){return ta(this,void 0,void 0,(function(){var t,n;return na(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},rA.prototype.deleteTokenFromDB=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.subscriptionManager.deleteToken(this.app,t)];case 2:return n.sent(),[2]}}))}))},rA.prototype.getPushSubscription=function(e,t){return ta(this,void 0,void 0,(function(){var n;return na(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},rA.prototype.requestPermission=function(){throw PN.create("only-available-in-window")},rA.prototype.useServiceWorker=function(e){throw PN.create("only-available-in-window")},rA.prototype.usePublicVapidKey=function(e){throw PN.create("only-available-in-window")},rA.prototype.onMessage=function(e,t,n){throw PN.create("only-available-in-window")},rA.prototype.onTokenRefresh=function(e,t,n){throw PN.create("only-available-in-window")},rA.prototype.setBackgroundMessageHandler=function(e){throw PN.create("only-available-in-sw")},rA.prototype.delete=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},rA.prototype.getNotificationPermission_=function(){return Notification.permission},rA.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},rA.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},rA.prototype.getSubscriptionManager=function(){return this.subscriptionManager},rA);function rA(e){var t=this;if(this.app=e,this.vapidDetailsModel=new eA,this.subscriptionManager=new jN,!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw PN.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new XN(e)}var iA,oA="FCM_MSG",aA=(Zo(sA,iA=nA),sA.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},sA.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},sA.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},sA.prototype.onPush_=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o,a;return na(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(s){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},sA.prototype.onSubChange_=function(e){return ta(this,void 0,void 0,(function(){var e,t,n,r;return na(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),PN.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},sA.prototype.onNotificationClick_=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data[oA]))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data[oA]).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&LN in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,new Promise((function(e){setTimeout(e,3e3)}))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=cA(RN.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}}))}))},sA.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=ea({},e.notification);return n.data=ea(ea({},e.notification.data),((t={})[oA]=e,t)),n}},sA.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw PN.create("bg-handler-function-expected");this.bgMessageHandler=e},sA.prototype.getWindowClient_=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,uA()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},sA.prototype.attemptToMessageClient_=function(e,t){return ta(this,void 0,void 0,(function(){return na(this,(function(n){if(!e)throw PN.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},sA.prototype.hasVisibleClients_=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return[4,uA()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},sA.prototype.sendMessageToWindowClients_=function(e){return ta(this,void 0,void 0,(function(){var t,n,r=this;return na(this,(function(i){switch(i.label){case 0:return[4,uA()];case 1:return t=i.sent(),n=cA(RN.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},sA.prototype.getSWRegistration_=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return[2,self.registration]}))}))},sA.prototype.getPublicVapidKey_=function(){return ta(this,void 0,void 0,(function(){var e,t;return na(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw PN.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,MN]:[2,t]}}))}))},sA);function sA(e){var t=iA.call(this,e)||this;return t.bgMessageHandler=null,self.addEventListener("push",(function(e){t.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){t.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){t.onNotificationClick(e)})),t}function uA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function cA(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var lA,hA,fA=(Zo(pA,lA=nA),pA.prototype.requestPermission=function(){return ta(this,void 0,void 0,(function(){var e;return na(this,(function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?PN.create("permission-blocked"):PN.create("permission-default")}}))}))},pA.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw PN.create("sw-registration-expected");if(null!=this.registrationToUse)throw PN.create("use-sw-before-get-token");this.registrationToUse=e},pA.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw PN.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw PN.create("use-public-key-before-get-token");var t=zN(e);if(65!==t.length)throw PN.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},pA.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},pA.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},pA.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){t?"activated"!==t.state?"redundant"!==t.state?t.addEventListener("statechange",(function i(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(PN.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)})):r(PN.create("sw-reg-redundant")):n(e):r(PN.create("no-sw-in-reg"))}))},pA.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw PN.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return(e.registrationToUse=t).update(),t}))})))},pA.prototype.getPublicVapidKey_=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,MN]}))}))},pA.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData){var n=t.data,r=n.firebaseMessagingType,i=n.firebaseMessagingData;e.messageObserver&&e.messageObserver.next(i);var o=i.data;if(o&&LN in o&&"1"===o["google.c.a.e"]){var a=function(e){switch(e){case RN.NOTIFICATION_CLICKED:return"notification_open";case RN.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(r);e.app.INTERNAL.analytics.logEvent(a,{message_name:o["google.c.a.c_l"],message_id:o[LN],message_time:o["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}}}),!1)},pA);function pA(e){var t=lA.call(this,e)||this;return t.registrationToUse=null,t.publicVapidKeyToUse=null,t.messageObserver=null,t.tokenRefreshObserver=null,t.onMessageInternal=La((function(e){t.messageObserver=e})),t.onTokenRefreshInternal=La((function(e){t.tokenRefreshObserver=e})),t.setupSWMessageListener_(),t}function dA(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}hA={isSupported:dA},cs.INTERNAL.registerService("messaging",(function(e){if(!dA())throw PN.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new aA(e):new fA(e)}),hA);var mA="firebasestorage.googleapis.com",yA="storageBucket",vA=(gA.prototype.codeProp=function(){return this.code},gA.prototype.codeEquals=function(e){return wA(e)===this.codeProp()},gA.prototype.serverResponseProp=function(){return this.serverResponse_},gA.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(gA.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(gA.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(gA.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(gA.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),gA);function gA(e,t){this.code_=wA(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}var bA={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function wA(e){return"storage/"+e}function _A(){return new vA(bA.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function TA(){return new vA(bA.CANCELED,"User canceled the upload/download.")}function EA(){return new vA(bA.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SA(e,t,n){return new vA(bA.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function CA(){return new vA(bA.APP_DELETED,"The Firebase app was deleted.")}function IA(e,t){return new vA(bA.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function kA(e){throw new vA(bA.INTERNAL_ERROR,"Internal error: "+e)}var NA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function AA(e){switch(e){case NA.RAW:case NA.BASE64:case NA.BASE64URL:case NA.DATA_URL:return;default:throw"Expected one of the event types: ["+NA.RAW+", "+NA.BASE64+", "+NA.BASE64URL+", "+NA.DATA_URL+"]."}}var DA=function(e,t){this.data=e,this.contentType=t||null};function RA(e,t){switch(e){case NA.RAW:return new DA(OA(t));case NA.BASE64:case NA.BASE64URL:return new DA(xA(e,t));case NA.DATA_URL:return new DA(function(e){var t=new LA(e);return t.base64?xA(NA.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw IA(NA.DATA_URL,"Malformed data URL.")}return OA(t)}(t.rest)}(t),function(e){return new LA(e).contentType}(t))}throw _A()}function OA(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xA(e,t){switch(e){case NA.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw IA(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case NA.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw IA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw IA(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var PA,MA,LA=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw IA(NA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},FA={STATE_CHANGED:"state_changed"},UA="running",jA="pausing",VA="paused",qA="success",BA="canceling",WA="canceled",zA="error",KA={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function HA(e){switch(e){case UA:case jA:case BA:return KA.RUNNING;case VA:return KA.PAUSED;case qA:return KA.SUCCESS;case WA:return KA.CANCELED;case zA:default:return KA.ERROR}}function QA(e){return null!=e}function GA(e){return void 0!==e}function YA(e){return"function"==typeof e}function XA(e){return"object"==typeof e}function $A(e){return"string"==typeof e||e instanceof String}function JA(e){return"number"==typeof e||e instanceof Number}function ZA(e){return eD()&&e instanceof Blob}function eD(){return"undefined"!=typeof Blob}(MA=PA=PA||{})[MA.NO_ERROR=0]="NO_ERROR",MA[MA.NETWORK_ERROR=1]="NETWORK_ERROR",MA[MA.ABORT=2]="ABORT";var tD=(nD.prototype.send=function(e,t,n,r){if(this.sent_)throw kA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),QA(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return QA(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},nD.prototype.getErrorCode=function(){if(!this.sent_)throw kA("cannot .getErrorCode() before sending");return this.errorCode_},nD.prototype.getStatus=function(){if(!this.sent_)throw kA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},nD.prototype.getResponseText=function(){if(!this.sent_)throw kA("cannot .getResponseText() before sending");return this.xhr_.responseText},nD.prototype.abort=function(){this.xhr_.abort()},nD.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},nD.prototype.addUploadProgressListener=function(e){QA(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},nD.prototype.removeUploadProgressListener=function(e){QA(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},nD);function nD(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=PA.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=PA.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=PA.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}var rD=(iD.prototype.createXhrIo=function(){return new tD},iD);function iD(){}function oD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(eD())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var aD=(sD.prototype.size=function(){return this.size_},sD.prototype.type=function(){return this.type_},sD.prototype.slice=function(e,t){if(ZA(this.data_)){var n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new sD(n)}return new sD(new Uint8Array(this.data_.buffer,e,t-e),!0)},sD.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(eD()){var n=e.map((function(e){return e instanceof sD?e.data_:e}));return new sD(oD.apply(null,n))}var r=e.map((function(e){return $A(e)?RA(NA.RAW,e).data:e.data_})),i=0;r.forEach((function(e){i+=e.byteLength}));var o=new Uint8Array(i),a=0;return r.forEach((function(e){for(var t=0;t<e.length;t++)o[a++]=e[t]})),new sD(o,!0)},sD.prototype.uploadData=function(){return this.data_},sD);function sD(e,t){var n=0,r="";ZA(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}var uD=(Object.defineProperty(cD.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(cD.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),cD.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},cD.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},cD.makeFromBucketSpec=function(e){var t;try{t=cD.makeFromUrl(e)}catch(t){return new cD(e,"")}if(""===t.path)return t;throw function(e){return new vA(bA.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(e)},cD.makeFromUrl=function(e){for(var t=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=mA.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var s=o[a],u=s.regex.exec(e);if(u){var c=u[s.indices.bucket],l=u[s.indices.path];t=new cD(c,l=l||""),s.postModify(t);break}}if(null==t)throw function(e){return new vA(bA.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return t},cD);function cD(e,t){this.bucket=e,this.path_=t}function lD(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return XA(e)&&!Array.isArray(e)}(t)?t:null}function hD(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function fD(e){return"https://"+mA+"/v0"+e}function pD(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}function dD(e,t){return t}var mD=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||dD},yD=null;function vD(e,t,n){var r=lD(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new uD(n,r);return t.makeStorageReference(i)}})}(r,e),r}(e,r,n)}function gD(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function bD(e){if(!XA(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!XA(n))throw"Expected object for 'customMetadata' mapping."}else if(XA(r=n)&&null!==r)throw"Mapping for '"+t+"' cannot be an object."}var r}var wD="maxResults",_D=1e3,TD="pageToken",ED="prefixes",SD="items";function CD(e){if(!XA(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===wD){if(!JA(n=e[wD])||!Number.isInteger(n)||e[wD]<=0)throw"Expected maxResults to be a positive number.";if(1e3<e[wD])throw"Expected maxResults to be less than or equal to "+_D+"."}else{if(t!==TD)throw"Unknown option: "+t;if(e[TD]&&!$A(e[TD]))throw"Expected pageToken to be string."}var n}var ID=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function kD(e){if(!e)throw _A()}function ND(e,t){return function(n,r){var i=vD(e,r,t);return kD(null!==i),i}}function AD(e){return function(t,n){var r=function(e,t){var n=lD(t);return null===n?null:function(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw new vA(bA.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yA+"' property when initializing the app?");if(t[ED])for(var i=0,o=t[ED];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e.makeStorageReference(new uD(r,a));n.prefixes.push(s)}if(t[SD])for(var u=0,c=t[SD];u<c.length;u++){var l=c[u];s=e.makeStorageReference(new uD(r,l.name)),n.items.push(s)}return n}(e,n)}(e,n);return kD(null!==r),r}}function DD(e,t){return function(n,r){var i=vD(e,r,t);return kD(null!==i),function(e,t){var n=lD(t);if(null===n)return null;if(!$A(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return fD("/b/"+i(n)+"/o/"+i(r))+pD({alt:"media",token:t})}))[0]}(i,r)}}function RD(e){return function(t,n){var r;return(r=401===t.getStatus()?new vA(bA.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(e){return new vA(bA.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function(e){return new vA(bA.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n).setServerResponseProp(n.serverResponseProp()),r}}function OD(e){var t=RD(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=function(e){return new vA(bA.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function xD(e,t,n){var r=fD(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new ID(r,"GET",ND(e,n),i);return o.errorHandler=OD(t),o}function PD(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var MD=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function LD(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){kD(!1)}return kD(!!n&&-1!==(t||["active"]).indexOf(n)),n}var FD=function(e,t,n){if(YA(e)||QA(t)||QA(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},UD=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function jD(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(e,t,n,r){var i,o;return o=e===t?1===(i=e)?"argument":"arguments":(i="between "+e+" and "+t,"arguments"),new vA(bA.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,e,n.length);for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?SA(o,e,t.message):SA(o,e,t)}}var VD=function(e,t){var n=this;this.validator=function(t){n.optional&&!GA(t)||e(t)},this.optional=!!t};function qD(e,t){function n(e){if(!$A(e))throw"Expected string."}var r;return r=e?function(e,t){return function(n){e(n),t(n)}}(n,e):n,new VD(r,t)}function BD(){return new VD((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||eD()&&e instanceof Blob))throw"Expected Blob or File."}))}function WD(e){return new VD(bD,e)}function zD(){return new VD((function(e){if(!(JA(e)&&0<=e))throw"Expected a number 0 or greater."}))}function KD(e,t){return new VD((function(t){if(!(null===t||QA(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function HD(e){return new VD((function(e){if(null!==e&&!YA(e))throw"Expected a Function."}),e)}function QD(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var GD=(YD.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},YD.prototype.shouldDoResumable_=function(e){return 262144<e.size()},YD.prototype.start_=function(){this.state_===UA&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},YD.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then((function(n){switch(t.state_){case UA:e(n);break;case BA:t.transition_(WA);break;case jA:t.transition_(VA)}}))},YD.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=PD(t,r,i),s={name:a.fullPath},u=fD(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=gD(a,n),h=e.maxUploadRetryTime(),f=new ID(u,"POST",(function(e){var t;LD(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){kD(!1)}return kD($A(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=RD(t),f}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},YD.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new ID(n,"POST",(function(e){var t=LD(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){kD(!1)}n||kD(!1);var i=Number(n);return kD(!isNaN(i)),new MD(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=RD(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);(e.request_=i).getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},YD.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new MD(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(e,t,n,r,i,o,a,s){var u=new MD(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new vA(bA.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<i&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw EA();var m=t.maxUploadRetryTime(),y=new ID(n,"POST",(function(e,n){var i,a=LD(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ND(t,o)(e,n):null,new MD(s,c,"final"===a,i)}),m);return y.headers=p,y.body=d.uploadData(),y.progressCallback=s||null,y.errorHandler=RD(e),y}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(i){return e.error_=i,void e.transition_(zA)}var a=e.authWrapper_.makeRequest(o,i);(e.request_=a).getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(qA)):e.completeTransitions_()}),e.errorHandler_)}))},YD.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},YD.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=xD(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_(qA)}),e.metadataErrorHandler_)}))},YD.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=PD(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+gD(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=aD.getBlob(c,r,l);if(null===h)throw EA();var f={name:u.fullPath},p=fD(o),d=e.maxUploadRetryTime(),m=new ID(p,"POST",ND(e,n),d);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=RD(t),m}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);(e.request_=r).getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(qA)}),e.errorHandler_)}))},YD.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},YD.prototype.transition_=function(e){if(this.state_!==e)switch(e){case BA:case jA:this.state_=e,null!==this.request_&&this.request_.cancel();break;case UA:var t=this.state_===VA;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case VA:this.state_=e,this.notifyObservers_();break;case WA:this.error_=TA(),this.state_=e,this.notifyObservers_();break;case zA:case qA:this.state_=e,this.notifyObservers_()}},YD.prototype.completeTransitions_=function(){switch(this.state_){case jA:this.transition_(VA);break;case BA:this.transition_(WA);break;case UA:this.start_()}},Object.defineProperty(YD.prototype,"snapshot",{get:function(){var e=HA(this.state_);return new UD(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),YD.prototype.on=function(e,t,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=HD(!0).validator,a=KD(null,!0).validator;function s(e){try{return void o(e)}catch(e){}try{if(a(e),!(GA(e.next)||GA(e.error)||GA(e.complete)))throw"";return}catch(e){throw i}}jD("on",[qD((function(){if(e!==FA.STATE_CHANGED)throw"Expected one of the event types: ["+FA.STATE_CHANGED+"]."})),KD(s,!0),HD(!0),HD(!0)],arguments);var u=this;function c(e){return function(t,n,i){null!==e&&jD("on",e,arguments);var o=new FD(t,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[KD((function(e){if(null===e)throw i;s(e)})),HD(!0),HD(!0)];return GA(t)||GA(n)||GA(r)?c(null)(t,n,r):c(l)},YD.prototype.then=function(e,t){return this.promise_.then(e,t)},YD.prototype.catch=function(e){return this.then(null,e)},YD.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},YD.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},YD.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},YD.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(HA(this.state_)){case KA.SUCCESS:QD(this.resolve_.bind(null,this.snapshot))();break;case KA.CANCELED:case KA.ERROR:QD(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},YD.prototype.notifyObserver_=function(e){switch(HA(this.state_)){case KA.RUNNING:case KA.PAUSED:e.next&&QD(e.next.bind(e,this.snapshot))();break;case KA.SUCCESS:e.complete&&QD(e.complete.bind(e))();break;case KA.CANCELED:case KA.ERROR:e.error&&QD(e.error.bind(e,this.error_))();break;default:e.error&&QD(e.error.bind(e,this.error_))()}},YD.prototype.resume=function(){jD("resume",[],arguments);var e=this.state_===VA||this.state_===jA;return e&&this.transition_(UA),e},YD.prototype.pause=function(){jD("pause",[],arguments);var e=this.state_===UA;return e&&this.transition_(jA),e},YD.prototype.cancel=function(){jD("cancel",[],arguments);var e=this.state_===UA||this.state_===jA;return e&&this.transition_(BA),e},YD);function YD(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=UA,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(bA.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(zA))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(bA.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(zA))},this.promise_=new Promise((function(e,t){a.resolve_=e,a.reject_=t,a.start_()})),this.promise_.then(null,(function(){}))}var XD=($D.prototype.toString=function(){return jD("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},$D.prototype.newRef=function(e,t){return new $D(e,t)},$D.prototype.mappings=function(){return function(){if(yD)return yD;var e=[];e.push(new mD("bucket")),e.push(new mD("generation")),e.push(new mD("metageneration")),e.push(new mD("name","fullPath",!0));var t=new mD("name");t.xform=function(e,t){return function(e){return!$A(e)||e.length<2?e:hD(e)}(t)},e.push(t);var n=new mD("size");return n.xform=function(e,t){return QA(t)?Number(t):t},e.push(n),e.push(new mD("timeCreated")),e.push(new mD("updated")),e.push(new mD("md5Hash",null,!0)),e.push(new mD("cacheControl",null,!0)),e.push(new mD("contentDisposition",null,!0)),e.push(new mD("contentEncoding",null,!0)),e.push(new mD("contentLanguage",null,!0)),e.push(new mD("contentType",null,!0)),e.push(new mD("metadata","customMetadata",!0)),yD=e}()},$D.prototype.child=function(e){jD("child",[qD()],arguments);var t=function(e,t){var n=t.split("/").filter((function(e){return 0<e.length})).join("/");return 0===e.length?n:e+"/"+n}(this.location.path,e),n=new uD(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty($D.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new uD(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty($D.prototype,"root",{get:function(){var e=new uD(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty($D.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty($D.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty($D.prototype,"name",{get:function(){return hD(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty($D.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),$D.prototype.put=function(e,t){return void 0===t&&(t=null),jD("put",[BD(),WD(!0)],arguments),this.throwIfRoot_("put"),new GD(this,this.authWrapper,this.location,this.mappings(),new aD(e),t)},$D.prototype.putString=function(e,t,n){void 0===t&&(t=NA.RAW),jD("putString",[qD(),qD(AA,!0),WD(!0)],arguments),this.throwIfRoot_("putString");var r=RA(t,e),i=Object.assign({},n);return!QA(i.contentType)&&QA(r.contentType)&&(i.contentType=r.contentType),new GD(this,this.authWrapper,this.location,this.mappings(),new aD(r.data,!0),i)},$D.prototype.delete=function(){var e=this;return jD("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(t){var n=function(e,t){var n=fD(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new ID(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=OD(t),i}(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()}))},$D.prototype.listAll=function(){jD("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},$D.prototype.listAllHelper=function(e,t){return ta(this,void 0,void 0,(function(){var n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},$D.prototype.list=function(e){jD("list",[new VD(CD,!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then((function(n){var r=e||{},i=function(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=fD(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new ID(a,"GET",AD(e),s);return u.urlParams=o,u.errorHandler=RD(t),u}(t.authWrapper,t.location,0,r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()}))},$D.prototype.getMetadata=function(){var e=this;return jD("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(t){var n=xD(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()}))},$D.prototype.updateMetadata=function(e){var t=this;return jD("updateMetadata",[WD()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=function(e,t,n,r){var i=fD(t.fullServerUrl()),o=gD(n,r),a=e.maxOperationRetryTime(),s=new ID(i,"PATCH",ND(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=OD(t),s}(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()}))},$D.prototype.getDownloadURL=function(){var e=this;return jD("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(t){var n=function(e,t,n){var r=fD(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new ID(r,"GET",DD(e,n),i);return o.errorHandler=OD(t),o}(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then((function(e){if(null===e)throw new vA(bA.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}))},$D.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new vA(bA.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},$D);function $D(e,t){this.authWrapper=e,this.location=t instanceof uD?t:uD.makeFromUrl(t)}var JD=(ZD.prototype.getPromise=function(){return this.promise_},ZD.prototype.cancel=function(e){},ZD);function ZD(e){this.promise_=Promise.reject(e)}var eR=(tR.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then((function(){return t.map.delete(n)}),(function(){return t.map.delete(n)}))},tR.prototype.clear=function(){this.map.forEach((function(e){e&&e.cancel(!0)})),this.map.clear()},tR);function tR(){this.map=new Map,this.id=-9007199254740991}var nR=(rR.extractBucket_=function(e){var t=e[yA]||null;return null==t?null:uD.makeFromBucketSpec(t).bucket},rR.prototype.getAuthToken=function(){return null!==this.app_&&QA(this.app_.INTERNAL)&&QA(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then((function(e){return null!==e?e.accessToken:null}),(function(){return null})):Promise.resolve(null)},rR.prototype.bucket=function(){if(this.deleted_)throw CA();return this.bucket_},rR.prototype.service=function(){return this.service_},rR.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},rR.prototype.makeRequest=function(e,t){if(this.deleted_)return new JD(CA());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},rR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},rR.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},rR.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},rR.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},rR.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},rR);function rR(e,t,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var o=this.app_.options;QA(o)&&(this.bucket_=rR.extractBucket_(o))}this.storageRefMaker_=t,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new eR}var iR=(oR.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());GA(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=_A()).setServerResponseProp(a.getResponseText()),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?CA():TA()):o(r=new vA(bA.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new aR(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];u||(e?c.call.apply(c,aa([null,e],t)):s()||o?c.call.apply(c,aa([null,e],t)):(r<64&&(r*=2),l(1===a?(a=2,0):1e3*(r+Math.random()))))}var f=!1;function p(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){p(o=!0)}),n),p}((function(t,n){if(n)t(!1,new aR(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===PA.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new aR(a,n))}else{var s=n.getErrorCode()===PA.ABORT;t(!1,new aR(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},oR.prototype.getPromise=function(){return this.promise_},oR.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},oR.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},oR);function oR(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}var aR=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function sR(e,t,n){var r=pD(e.urlParams),i=e.url+r,o=Object.assign({},e.headers);return function(e,t){null!==t&&0<t.length&&(e.Authorization="Firebase "+t)}(o,t),function(e){var t=void 0!==cs?cs.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}(o),new iR(i,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var uR=(cR.prototype.ref=function(e){if(jD("ref",[qD((function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}),!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new XD(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},cR.prototype.refFromURL=function(e){return jD("refFromURL",[qD((function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{uD.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}),!1)],arguments),new XD(this.authWrapper_,e)},Object.defineProperty(cR.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),cR.prototype.setMaxUploadRetryTime=function(e){jD("setMaxUploadRetryTime",[zD()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},cR.prototype.setMaxOperationRetryTime=function(e){jD("setMaxOperationRetryTime",[zD()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(cR.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(cR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),cR);function cR(e,t,n){if(this.bucket_=null,this.authWrapper_=new nR(e,(function(e,t){return new XD(e,t)}),sR,this,t),this.app_=e,null!=n)this.bucket_=uD.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new uD(r,""))}this.internals_=new hR(this)}var lR,hR=(fR.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},fR);function fR(e){this.service_=e}lR={TaskState:KA,TaskEvent:FA,StringFormat:NA,Storage:uR,Reference:XD},cs.INTERNAL.registerService("storage",(function(e,t,n){return new uR(e,new rD,n)}),lR,void 0,!0);var pR,dR,mR,yR,vR="0.2.24",gR="FB-PERF-TRACE-MEASURE",bR="@firebase/performance/config",wR="@firebase/performance/configexpire",_R="Performance",TR=((pR={})["trace started"]="Trace {$traceName} was started before.",pR["trace stopped"]="Trace {$traceName} is not running.",pR["no window"]="Window is not available.",pR["no app id"]="App id is not available.",pR["no project id"]="Project id is not available.",pR["no api key"]="Api key is not available.",pR["invalid cc log"]="Attempted to queue invalid cc event",pR["FB not default"]="Performance can only start when Firebase app instance is the default one.",pR["RC response not ok"]="RC response is not ok",pR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",pR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",pR["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",pR),ER=new Sa("performance",_R,TR),SR=(CR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},CR.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},CR.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},CR.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},CR.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},CR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},CR.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},CR.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},CR.getInstance=function(){return void 0===dR&&(dR=new CR(mR)),dR},CR);function CR(e){if(!e)throw ER.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}var IR,kR,NR,AR=(DR.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw ER.create("no app id");return e},DR.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw ER.create("no project id");return e},DR.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw ER.create("no api key");return e},DR.getInstance=function(){return void 0===yR&&(yR=new DR),yR},DR);function DR(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function RR(){return IR}(NR=kR=kR||{})[NR.UNKNOWN=0]="UNKNOWN",NR[NR.VISIBLE=1]="VISIBLE",NR[NR.HIDDEN=2]="HIDDEN",NR[NR.PRERENDER=3]="PRERENDER",NR[NR.UNLOADED=4]="UNLOADED";var OR=["firebase_","google_","ga_"],xR=new RegExp("^[a-zA-Z]\\w*$");function PR(){switch(SR.getInstance().document.visibilityState){case"visible":return kR.VISIBLE;case"hidden":return kR.HIDDEN;case"prerender":return kR.PRERENDER;default:return kR.UNKNOWN}}var MR=new $a(_R);MR.logLevel=Fa.INFO;var LR="0.0.1",FR={loggingEnabled:!0},UR="FIREBASE_INSTALLATIONS_AUTH",jR="Could not fetch config, will use default configs";function VR(e){if(!e)return e;var t=AR.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=FR.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=qR(t.tracesSamplingRate),t.logNetworkAfterSampling=qR(t.networkRequestsSamplingRate),e}function qR(e){return Math.random()<=e}var BR,WR=1;function zR(){return WR=2,BR=BR||function(){var e=SR.getInstance().document;return new Promise((function(t){e&&"complete"!==e.readyState?e.addEventListener("readystatechange",(function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())})):t()}))}().then((function(){return function(){var e=AR.getInstance().firebaseAppInstance.installations().getId();return e.then((function(e){IR=e})),e}()})).then((function(e){return function(e){var t=function(){var e=SR.getInstance().localStorage,t=e.getItem(wR);if(t&&function(e){return Number(e)>Date.now()}(t)){var n=e.getItem(bR);if(n)try{return JSON.parse(n)}catch(e){return}}}();return t?(VR(t),Promise.resolve()):function(e){return function(){var e=AR.getInstance().firebaseAppInstance.installations().getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+AR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+AR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:UR+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:AR.getInstance().getAppId(),app_version:vR,sdk_version:LR})});return fetch(r).then((function(e){if(e.ok)return e.json();throw ER.create("RC response not ok")}))})).catch((function(){MR.info(jR)}))}(e).then((function(e){return VR(e)})).then((function(e){return function(e){if(e){var t=SR.getInstance().localStorage;t.setItem(bR,JSON.stringify(e)),t.setItem(wR,String(Date.now()+60*AR.getInstance().configTimeToLive*60*1e3))}}(e)}),(function(){}))}(e)})).then((function(){return KR()}),(function(){return KR()}))}function KR(){WR=3}var HR,QR=3,GR=[];function YR(){if(HR)return HR;var e=function(e){return function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];!function(e){if(!e.eventTime||!e.message)throw ER.create("invalid cc log");GR=aa(GR,[e])}({message:e.apply(void 0,r),eventTime:Date.now()})}}(JR);return(HR=new $a("@firebase/performance/cc")).logHandler=e,HR}function XR(e){var t=AR.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&SR.getInstance().requiredApisAvailable()&&(e.isAuto&&PR()!==kR.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===WR?$R(e):zR().then((function(){return $R(e)}),(function(){return $R(e)}))))}function $R(e){RR()&&setTimeout((function(){return YR().log(e,1)}),0)}function JR(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:ZR(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=eO(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=eO(n));var r={application_info:ZR(),trace_metric:t};return JSON.stringify(r)}(e)}function ZR(){return{google_app_id:AR.getInstance().getAppId(),app_instance_id:RR(),web_app_info:{sdk_version:vR,page_url:SR.getInstance().getUrl(),service_worker_status:function(){var e=SR.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}(),visibility_state:PR(),effective_connection_type:function(){var e=SR.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}function eO(e){return Object.keys(e).map((function(t){return{key:t,value:e[t]}}))}!function e(t){setTimeout((function(){if(0!==QR){if(!GR.length)return e(1e4);var t=aa(GR);GR=[];var n=t.map((function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}})),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:AR.getInstance().logSource,log_event:n};fetch(AR.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.ok||MR.info("Call to Firebase backend failed."),e.json()})).then((function(t){var n=Number(t.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);QR=3,e(r)})).catch((function(){GR=aa(t,GR),QR--,MR.info("Tries left: "+QR+"."),e(1e4)}))}}),t)}(5500);var tO=["_fp","_fcp","_fid"],nO=(rO.prototype.start=function(){if(1!==this.state)throw ER.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},rO.prototype.stop=function(){if(2!==this.state)throw ER.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),XR(this)},rO.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=ea({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}XR(this)},rO.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},rO.prototype.putMetric=function(e,t){if(!function(e,t){return!(0===e.length||100<e.length)&&(t&&t.startsWith("_wt_")&&-1<tO.indexOf(e)||!e.startsWith("_"))}(e,this.name))throw ER.create("invalide custom metric name",{customMetricName:e});this.counters[e]=t},rO.prototype.getMetric=function(e){return this.counters[e]||0},rO.prototype.putAttribute=function(e,t){var n=function(e){return!(0===e.length||40<e.length||OR.some((function(t){return e.startsWith(t)}))||!e.match(xR))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw ER.create("invalid attribute name",{attributeName:e});if(!r)throw ER.create("invalid attribute value",{attributeValue:t})}},rO.prototype.getAttribute=function(e){return this.customAttributes[e]},rO.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},rO.prototype.getAttributes=function(){return ea({},this.customAttributes)},rO.prototype.setStartTime=function(e){this.startTimeUs=e},rO.prototype.setDuration=function(e){this.durationUs=e},rO.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},rO.createOobTrace=function(e,t,n){var r=SR.getInstance().getUrl();if(r){var i=new rO("_wt_"+r,!0),o=Math.floor(1e3*SR.getInstance().getTimeOrigin());if(i.setStartTime(o),e&&e[0]&&(i.setDuration(Math.floor(1e3*e[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),t){var a=t.find((function(e){return"first-paint"===e.name}));a&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime));var s=t.find((function(e){return"first-contentful-paint"===e.name}));s&&s.startTime&&i.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}XR(i)}},rO.createUserTimingTrace=function(e){XR(new rO(e,!1,e))},rO);function rO(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=SR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||gR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function iO(e){var t=e;if(t&&void 0!==t.responseStart){var n=SR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=AR.getInstance();t.instrumentationEnabled&&e.url!==t.logEndPointUrl.split("?")[0]&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return YR().log(e,0)}),0)}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var oO=5e3;function aO(){RR()&&(setTimeout((function(){return function(){var e=SR.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){nO.createOobTrace(t,n),r=void 0}),oO);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),nO.createOobTrace(t,n,e))}))}else nO.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=SR.getInstance(),t=0,n=e.getEntriesByType("resource");t<n.length;t++)iO(n[t]);e.setupObserver("resource",iO)}()}),0),setTimeout((function(){return function(){for(var e=SR.getInstance(),t=0,n=e.getEntriesByType("measure");t<n.length;t++)sO(n[t]);e.setupObserver("measure",sO)}()}),0))}function sO(e){var t=e.name;t.substring(0,gR.length)!==gR&&nO.createUserTimingTrace(t)}var uO=(cO.prototype.trace=function(e){return new nO(e)},Object.defineProperty(cO.prototype,"instrumentationEnabled",{get:function(){return AR.getInstance().instrumentationEnabled},set:function(e){AR.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(cO.prototype,"dataCollectionEnabled",{get:function(){return AR.getInstance().dataCollectionEnabled},set:function(e){AR.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),cO);function cO(e){this.app=e,SR.getInstance().requiredApisAvailable()?zR().then(aO,aO):MR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}cs.INTERNAL.registerService("performance",(function(e){if("[DEFAULT]"!==e.name)throw ER.create("FB not default");if("undefined"==typeof window)throw ER.create("no window");return function(e){mR=e}(window),AR.getInstance().firebaseAppInstance=e,new uO(e)}),{});var lO,hO,fO,pO,dO,mO="measurementId",yO="firebase_id",vO="origin";function gO(e){return Array.isArray(window[e])}(hO=lO=lO||{}).EVENT="event",hO.SET="set",hO.CONFIG="config",(pO=fO=fO||{}).ADD_PAYMENT_INFO="add_payment_info",pO.ADD_TO_CART="add_to_cart",pO.ADD_TO_WISHLIST="add_to_wishlist",pO.BEGIN_CHECKOUT="begin_checkout",pO.CHECKOUT_PROGRESS="checkout_progress",pO.EXCEPTION="exception",pO.GENERATE_LEAD="generate_lead",pO.LOGIN="login",pO.PAGE_VIEW="page_view",pO.PURCHASE="purchase",pO.REFUND="refund",pO.REMOVE_FROM_CART="remove_from_cart",pO.SCREEN_VIEW="screen_view",pO.SEARCH="search",pO.SELECT_CONTENT="select_content",pO.SET_CHECKOUT_OPTION="set_checkout_option",pO.SHARE="share",pO.SIGN_UP="sign_up",pO.TIMING_COMPLETE="timing_complete",pO.VIEW_ITEM="view_item",pO.VIEW_ITEM_LIST="view_item_list",pO.VIEW_PROMOTION="view_promotion",pO.VIEW_SEARCH_RESULTS="view_search_results";var bO,wO,_O=((dO={})["no-ga-id"]='"'+mO+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',dO["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",dO["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",dO),TO=new Sa("analytics","Analytics",_O),EO={},SO="dataLayer",CO="gtag",IO=!1;cs.INTERNAL.registerService("analytics",(function(e,t){var n=e.options[mO];if(!n)throw TO.create("no-ga-id");if(null!=EO[n])throw TO.create("already-exists",{id:n});if(!IO){gO(SO)||function(e){var t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?l="+e,t.async=!0,document.head.appendChild(t)}(SO),function(e){gO(e)?window[e]:window[e]=[]}(SO);var r=function(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===lO.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,u=a;s<u.length;s++){var c=u[s],l=t[c];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,f=Object.values(t);h<f.length;h++){var p=f[h];o.push(p)}Promise.all(o).then((function(){return e(lO.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else n===lO.CONFIG?(t[r]||Promise.resolve()).then((function(){e(lO.CONFIG,r,i)})).catch((function(e){return console.error(e)})):e(lO.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}(EO,SO,CO),i=r.wrappedGtag,o=r.gtagCore;wO=i,bO=o,IO=!0}EO[n]=function(e,t){return ta(this,void 0,void 0,(function(){var n,r;return na(this,(function(i){switch(i.label){case 0:return[4,e.installations().getId()];case 1:return n=i.sent(),t("js",new Date),t(lO.CONFIG,e.options[mO],((r={})[yO]=n,r[vO]="firebase",r.update=!0,r)),[2]}}))}))}(e,bO);var a={app:e,logEvent:function(e,t,r){return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=ea(ea({},r),{send_to:t})),e(lO.EVENT,n,o||{})}(wO,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(lO.SET,{screen_name:n}):e(lO.CONFIG,t,{update:!0,screen_name:n})}(wO,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(lO.SET,{user_id:n}):e(lO.CONFIG,t,{update:!0,user_id:n})}(wO,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(lO.SET,i)}else e(lO.CONFIG,t,{update:!0,user_properties:n})}(wO,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}};return t({INTERNAL:{analytics:{logEvent:a.logEvent}}}),a}),{settings:function(e){if(IO)throw TO.create("already-initialized");e.dataLayerName&&(SO=e.dataLayerName),e.gtagName&&(CO=e.gtagName)},EventName:fO},void 0,!1);var kO,NO=(AO.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},AO.prototype.fetch=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},AO);function AO(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}var DO=((kO={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",kO["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",kO["registration-api-key"]="Undefined API key. Check Firebase app initialization.",kO["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",kO["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",kO["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",kO["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",kO["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",kO["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",kO["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',kO["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',kO["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",kO["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",kO),RO=new Sa("remoteconfig","Remote Config",DO),OO=(xO.prototype.fetch=function(e){return ta(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,p,d,m,y,v,g,b;return na(this,(function(w){switch(w.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=w.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:function(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),w.label=2;case 2:return w.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return w.sent(),[4,c];case 4:return h=w.sent(),[3,6];case 5:throw f=w.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),RO.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,m=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];g=void 0,w.label=7;case 7:return w.trys.push([7,9,,10]),[4,h.json()];case 8:return g=w.sent(),[3,10];case 9:throw b=w.sent(),RO.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=g.entries,v=g.state,w.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===v?d=500:"NO_CHANGE"===v?d=304:"NO_TEMPLATE"!==v&&"EMPTY_CONFIG"!==v||(y={}),304!==d&&200!==d)throw RO.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:m,config:y}]}}))}))},xO);function xO(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var PO=(MO.prototype.addEventListener=function(e){this.listeners.push(e)},MO.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},MO);function MO(){this.listeners=[]}var LO=["1","true","t","yes","y","on"],FO=(UO.prototype.asString=function(){return this._value},UO.prototype.asBoolean=function(){return"static"!==this._source&&0<=LO.indexOf(this._value.toLowerCase())},UO.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},UO.prototype.getSource=function(){return this._source},UO);function UO(e,t){void 0===t&&(t=""),this._source=e,this._value=t}var jO=(VO.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=Fa.DEBUG;break;case"silent":this._logger.logLevel=Fa.SILENT;break;default:this._logger.logLevel=Fa.ERROR}},Object.defineProperty(VO.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(VO.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),VO.prototype.activate=function(){return ta(this,void 0,void 0,(function(){var e,t,n;return na(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},VO.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},VO.prototype.fetch=function(){return ta(this,void 0,void 0,(function(){var e=this;return na(this,(function(t){return[2,new Promise((function(t,n){return ta(e,void 0,void 0,(function(){var e,r,i,o=this;return na(this,(function(a){switch(a.label){case 0:e=new PO,setTimeout((function(){return ta(o,void 0,void 0,(function(){return na(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return a.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return a.sent(),t(),[3,6];case 4:return r=a.sent(),i=function(e,t){return e instanceof Ta&&-1!==e.code.indexOf("fetch-throttle")}(r)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(i)];case 5:return a.sent(),n(r),[3,6];case 6:return[2]}}))}))}))]}))}))},VO.prototype.fetchAndActivate=function(){return ta(this,void 0,void 0,(function(){return na(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},VO.prototype.getAll=function(){var e=this;return function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(ea(ea({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},VO.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},VO.prototype.getNumber=function(e){return this.getValue(e).asNumber()},VO.prototype.getString=function(e){return this.getValue(e).asString()},VO.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new FO("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new FO("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new FO("static"))},VO);function VO(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function qO(e,t){var n=e.target.error||void 0;return RO.create(t,{originalErrorMessage:n&&n.message})}var BO="app_namespace_store",WO="firebase_remote_config",zO=1,KO=(HO.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},HO.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},HO.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},HO.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},HO.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},HO.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},HO.prototype.getActiveConfig=function(){return this.get("active_config")},HO.prototype.setActiveConfig=function(e){return this.set("active_config",e)},HO.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},HO.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},HO.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},HO.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},HO.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},HO.prototype.get=function(e){return ta(this,void 0,void 0,(function(){var t,n=this;return na(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([BO],"readonly").objectStore(BO),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(qO(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(o){i(RO.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},HO.prototype.set=function(e,t){return ta(this,void 0,void 0,(function(){var n,r=this;return na(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([BO],"readwrite").objectStore(BO),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(qO(e,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(RO.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},HO.prototype.delete=function(e){return ta(this,void 0,void 0,(function(){var t,n=this;return na(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([BO],"readwrite").objectStore(BO),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(qO(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(r){i(RO.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},HO.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},HO);function HO(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open(WO,zO);n.onerror=function(e){t(qO(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(BO,{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}var QO=(GO.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},GO.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},GO.prototype.getActiveConfig=function(){return this.activeConfig},GO.prototype.loadFromStorage=function(){return ta(this,void 0,void 0,(function(){var e,t,n,r,i,o;return na(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},GO.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},GO.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},GO.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},GO);function GO(e){this.storage=e}var YO,XO=($O.prototype.fetch=function(e){return ta(this,void 0,void 0,(function(){var t;return na(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},$O.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return ta(this,void 0,void 0,(function(){var t,i,o;return na(this,(function(a){switch(a.label){case 0:return[4,function(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(RO.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof Ta))return!1;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+function(e){var t=1e3*Math.pow(2,e),n=Math.round(.5*t*(Math.random()-.5)*2);return Math.min(144e5,t+n)}(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},$O);function $O(e,t){this.client=e,this.storage=t}return(YO=cs).INTERNAL.registerService("remoteConfig",(function(e,t,n){if("undefined"==typeof window)throw RO.create("registration-window");var r=e.options,i=r.projectId,o=r.apiKey,a=r.appId;if(!i)throw RO.create("registration-project-id");if(!o)throw RO.create("registration-api-key");if(!a)throw RO.create("registration-app-id");n=n||"firebase";var s=new KO(a,e.name,n),u=new QO(s),c=new $a("@firebase/remote-config");c.logLevel=Fa.ERROR;var l=new OO(e.installations(),YO.SDK_VERSION,n,i,o,a),h=new XO(l,s),f=new NO(h,s,u,c),p=new jO(e,f,u,s,c);return p.ensureInitialized(),p}),void 0,void 0,!0),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),cs}()}).call(this,n(32),n(33))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(36),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),m=u(n),y=0;y<a.length;++y){var v=a[y];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var g=f(n,v);try{c(t,v,g)}catch(b){}}}return t}return t}},,,,function(e,t,n){"use strict";var r=n(20),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function _(){}function T(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=w.prototype;var E=T.prototype=new _;E.constructor=T,r(E,w.prototype),E.isPureReactComponent=!0;var S={current:null},C={current:null},I=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:C.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var D=/\/+/g,R=[];function O(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function x(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function P(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+M(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+M(s=t[c],c);u+=e(s,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+M(s,c++),r,i);else if("object"===s)throw r=""+t,Error(v(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(D,"$&/")+"/"),P(e,F,t=O(t,o,r,i)),x(t)}function j(){var e=S.current;if(null===e)throw Error(v(321));return e}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;P(e,L,t=O(null,null,t,n)),x(t)},count:function(e){return P(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(v(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return j().useCallback(e,t)},useContext:function(e,t){return j().useContext(e,t)},useEffect:function(e,t){return j().useEffect(e,t)},useImperativeHandle:function(e,t,n){return j().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return j().useLayoutEffect(e,t)},useMemo:function(e,t){return j().useMemo(e,t)},useReducer:function(e,t,n){return j().useReducer(e,t,n)},useRef:function(e){return j().useRef(e)},useState:function(e){return j().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:p,createElement:N,cloneElement:function(e,t,n){if(null===e||void 0===e)throw Error(v(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)I.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.11.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r}},q={default:V},B=q&&V||q;e.exports=B.default||B},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(28);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!h[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in h[n]=t,n=t.eventTypes){var i=void 0,o=n[r],c=t,p=r;if(f.hasOwnProperty(p))throw Error(a(99,p));f[p]=o;var d=o.phasedRegistrationNames;if(d){for(i in d)d.hasOwnProperty(i)&&l(d[i],c,p);i=!0}else o.registrationName?(l(o.registrationName,c,p),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function l(e,t,n){if(p[e])throw Error(a(100,e));p[e]=t,d[e]=t.eventTypes[n].dependencies}var h=[],f={},p={},d={};function m(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var y=!1,v=null,g=!1,b=null,w={onError:function(e){y=!0,v=e}};function _(e,t,n,r,i,o,a,s,u){y=!1,v=null,m.apply(w,arguments)}var T=null,E=null,S=null;function C(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S(n),function(e,t,n,r,i,o,s,u,c){if(_.apply(this,arguments),y){if(!y)throw Error(a(198));var l=v;y=!1,v=null,g||(g=!0,b=l)}}(r,t,void 0,e),e.currentTarget=null}function I(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function k(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var N=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)C(e,t[r],n[r]);else t&&C(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function D(e){if(null!==e&&(N=I(N,e)),e=N,N=null,e){if(k(e,A),N)throw Error(a(95));if(g)throw e=b,g=!1,b=null,e}}var R={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(a(102,t));u[t]=r,n=!0}}n&&c()}};function O(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;x.hasOwnProperty("ReactCurrentDispatcher")||(x.ReactCurrentDispatcher={current:null}),x.hasOwnProperty("ReactCurrentBatchConfig")||(x.ReactCurrentBatchConfig={suspense:null});var P=/^(.*)[\\\/]/,M="function"===typeof Symbol&&Symbol.for,L=M?Symbol.for("react.element"):60103,F=M?Symbol.for("react.portal"):60106,U=M?Symbol.for("react.fragment"):60107,j=M?Symbol.for("react.strict_mode"):60108,V=M?Symbol.for("react.profiler"):60114,q=M?Symbol.for("react.provider"):60109,B=M?Symbol.for("react.context"):60110,W=M?Symbol.for("react.concurrent_mode"):60111,z=M?Symbol.for("react.forward_ref"):60112,K=M?Symbol.for("react.suspense"):60113,H=M?Symbol.for("react.suspense_list"):60120,Q=M?Symbol.for("react.memo"):60115,G=M?Symbol.for("react.lazy"):60116;M&&Symbol.for("react.fundamental"),M&&Symbol.for("react.responder"),M&&Symbol.for("react.scope");var Y="function"===typeof Symbol&&Symbol.iterator;function X(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case U:return"Fragment";case F:return"Portal";case V:return"Profiler";case j:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case B:return"Context.Consumer";case q:return"Context.Provider";case z:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Q:return $(e.type);case G:if(e=1===e._status?e._result:null)return $(e)}return null}function J(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=$(e.type);n=null,r&&(n=$(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(P,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var Z=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ee=null,te=null,ne=null;function re(e){if(e=E(e)){if("function"!==typeof ee)throw Error(a(280));var t=T(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?ne?ne.push(e):ne=[e]:te=e}function oe(){if(te){var e=te,t=ne;if(ne=te=null,re(e),t)for(e=0;e<t.length;e++)re(t[e])}}function ae(e,t){return e(t)}function se(e,t,n,r){return e(t,n,r)}function ue(){}var ce=ae,le=!1,he=!1;function fe(){null===te&&null===ne||(ue(),oe())}new Map;var pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,me={},ye={};function ve(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ge[e]=new ve(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ge[t]=new ve(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ge[e]=new ve(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ge[e]=new ve(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ge[e]=new ve(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ge[e]=new ve(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ge[e]=new ve(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ge[e]=new ve(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ge[e]=new ve(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function _e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Te(e,t,n,r){var i=ge.hasOwnProperty(t)?ge[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!de.call(ye,e)||!de.call(me,e)&&(pe.test(e)?ye[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ee(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Se(e){e._valueTracker||(e._valueTracker=function(e){var t=Ee(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ee(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ie(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ne(e,t){null!=(t=t.checked)&&Te(e,"checked",t,!1)}function Ae(e,t){Ne(e,t);var n=_e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Re(e,t.type,n):t.hasOwnProperty("defaultValue")&&Re(e,t.type,_e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function De(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Re(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:_e(n)}}function Le(e,t){var n=_e(t.value),r=_e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ge[e]=new ve(e,1,!1,e.toLowerCase(),null,!1)})),ge.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ge[e]=new ve(e,1,!1,e.toLowerCase(),null,!0)}));var Ue={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?je(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qe,Be=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ue.svg||"innerHTML"in e)e.innerHTML=t;else{for((qe=qe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function We(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ke={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},He={},Qe={};function Ge(e){if(He[e])return He[e];if(!Ke[e])return e;var t,n=Ke[e];for(t in n)if(n.hasOwnProperty(t)&&t in Qe)return He[e]=n[t];return e}Z&&(Qe=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);var Ye=Ge("animationend"),Xe=Ge("animationiteration"),$e=Ge("animationstart"),Je=Ge("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,at,st=!1,ut=[],ct=null,lt=null,ht=null,ft=new Map,pt=new Map,dt=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),yt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function vt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function gt(e,t){switch(e){case"focus":case"blur":ct=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ht=null;break;case"pointerover":case"pointerout":ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function bt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=vt(t,n,r,i),null!==t&&(null!==(t=pr(t))&&ot(t)),e):(e.eventSystemFlags|=r,e)}function wt(e){var t=fr(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){at(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;var t=Rn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=pr(t);return null!==n&&ot(n),e.blockedOn=t,!1}return!0}function Tt(e,t,n){_t(e)&&n.delete(t)}function Et(){for(st=!1;0<ut.length;){var e=ut[0];if(null!==e.blockedOn){null!==(e=pr(e.blockedOn))&&it(e);break}var t=Rn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ut.shift()}null!==ct&&_t(ct)&&(ct=null),null!==lt&&_t(lt)&&(lt=null),null!==ht&&_t(ht)&&(ht=null),ft.forEach(Tt),pt.forEach(Tt)}function St(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Et)))}function Ct(e){function t(t){return St(t,e)}if(0<ut.length){St(ut[0],e);for(var n=1;n<ut.length;n++){var r=ut[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ct&&St(ct,e),null!==lt&&St(lt,e),null!==ht&&St(ht,e),ft.forEach(t),pt.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)wt(n),null===n.blockedOn&&dt.shift()}function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function kt(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Nt(e,t,n){(t=O(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function At(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=kt(t);for(t=n.length;0<t--;)Nt(n[t],"captured",e);for(t=0;t<n.length;t++)Nt(n[t],"bubbled",e)}}function Dt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=O(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function Rt(e){e&&e.dispatchConfig.registrationName&&Dt(e._targetInst,null,e)}function Ot(e){k(e,At)}function xt(){return!0}function Pt(){return!1}function Mt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?xt:Pt,this.isPropagationStopped=Pt,this}function Lt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ft(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ut(e){e.eventPool=[],e.getPooled=Lt,e.release=Ft}i(Mt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=xt)},persist:function(){this.isPersistent=xt},isPersistent:Pt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Pt,this._dispatchInstances=this._dispatchListeners=null}}),Mt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Mt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Ut(n),n},Ut(Mt);var jt=Mt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Vt=Mt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qt=Mt.extend({view:null,detail:null}),Bt=qt.extend({relatedTarget:null});function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var zt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ht[e])&&!!t[e]}function Gt(){return Qt}for(var Yt=qt.extend({key:function(e){if(e.key){var t=zt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Kt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gt,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Xt=0,$t=0,Jt=!1,Zt=!1,en=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Xt;return Xt=e.screenX,Jt?"mousemove"===e.type?e.screenX-t:0:(Jt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=$t;return $t=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),rn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gt}),on=Mt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[Xe,"animationIteration",2],[$e,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Je,"transitionEnd",2],["waiting","waiting",2]],un={},cn={},ln=0;ln<sn.length;ln++){var hn=sn[ln],fn=hn[0],pn=hn[1],dn=hn[2],mn="on"+(pn[0].toUpperCase()+pn.slice(1)),yn={phasedRegistrationNames:{bubbled:mn,captured:mn+"Capture"},dependencies:[fn],eventPriority:dn};un[pn]=yn,cn[fn]=yn}var vn={eventTypes:un,getEventPriority:function(e){return void 0!==(e=cn[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=cn[e];if(!i)return null;switch(e){case"keypress":if(0===Wt(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=Bt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rn;break;case Ye:case Xe:case $e:e=jt;break;case Je:e=on;break;case"scroll":e=qt;break;case"wheel":e=an;break;case"copy":case"cut":case"paste":e=Vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Mt}return Ot(t=e.getPooled(i,t,n,r)),t}},gn=o.unstable_UserBlockingPriority,bn=o.unstable_runWithPriority,wn=vn.getEventPriority,_n=10,Tn=[];function En(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=fr(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=It(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=I(s,c))}D(s)}}var Sn=!0;function Cn(e,t){In(t,e,!1)}function In(e,t,n){switch(wn(t)){case 0:var r=kn.bind(null,t,1);break;case 1:r=Nn.bind(null,t,1);break;default:r=Dn.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function kn(e,t,n){le||ue();var r=Dn,i=le;le=!0;try{se(r,e,t,n)}finally{(le=i)||fe()}}function Nn(e,t,n){bn(gn,Dn.bind(null,e,t,n))}function An(e,t,n,r){if(Tn.length){var i=Tn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=En,n=e,he)t(n,void 0);else{he=!0;try{ce(t,n,void 0)}finally{he=!1,fe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Tn.length<_n&&Tn.push(e)}}function Dn(e,t,n){if(Sn)if(0<ut.length&&-1<mt.indexOf(e))e=vt(null,e,t,n),ut.push(e);else{var r=Rn(e,t,n);null===r?gt(e,n):-1<mt.indexOf(e)?(e=vt(r,e,t,n),ut.push(e)):function(e,t,n,r){switch(t){case"focus":return ct=bt(ct,e,t,n,r),!0;case"dragenter":return lt=bt(lt,e,t,n,r),!0;case"mouseover":return ht=bt(ht,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return ft.set(i,bt(ft.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,pt.set(i,bt(pt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(gt(e,n),An(e,t,n,null))}}function Rn(e,t,n){var r=It(n);if(null!==(r=fr(r))){var i=et(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=tt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return An(e,t,n,r),null}function On(e){if(!Z)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var xn=new("function"===typeof WeakMap?WeakMap:Map);function Pn(e){var t=xn.get(e);return void 0===t&&(t=new Set,xn.set(e,t)),t}function Mn(e,t,n){if(!n.has(e)){switch(e){case"scroll":In(t,"scroll",!0);break;case"focus":case"blur":In(t,"focus",!0),In(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":On(e)&&In(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Cn(e,t)}n.add(e)}}var Ln={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fn=["Webkit","ms","Moz","O"];function Un(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ln.hasOwnProperty(e)&&Ln[e]?(""+t).trim():t+"px"}function jn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Un(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Ln).forEach((function(e){Fn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ln[t]=Ln[e]}))}));var Vn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(e,t){if(t){if(Vn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function Bn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Wn(e,t){var n=Pn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=d[t];for(var r=0;r<t.length;r++)Mn(t[r],e,n)}function zn(){}function Kn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hn(r)}}function Gn(){for(var e=window,t=Kn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Kn((e=t.contentWindow).document)}return t}function Yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Xn="$",$n="/$",Jn="$?",Zn="$!",er=null,tr=null;function nr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function rr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,or="function"===typeof clearTimeout?clearTimeout:void 0;function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function sr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Xn||n===Zn||n===Jn){if(0===t)return e;t--}else n===$n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),cr="__reactInternalInstance$"+ur,lr="__reactEventHandlers$"+ur,hr="__reactContainere$"+ur;function fr(e){var t=e[cr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hr]||n[cr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=sr(e);null!==e;){if(n=e[cr])return n;e=sr(e)}return t}n=(e=n).parentNode}return null}function pr(e){return!(e=e[cr]||e[hr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function dr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function mr(e){return e[lr]||null}var yr=null,vr=null,gr=null;function br(){if(gr)return gr;var e,t,n=vr,r=n.length,i="value"in yr?yr.value:yr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return gr=i.slice(e,1<t?1-t:void 0)}var wr=Mt.extend({data:null}),_r=Mt.extend({data:null}),Tr=[9,13,27,32],Er=Z&&"CompositionEvent"in window,Sr=null;Z&&"documentMode"in document&&(Sr=document.documentMode);var Cr=Z&&"TextEvent"in window&&!Sr,Ir=Z&&(!Er||Sr&&8<Sr&&11>=Sr),kr=String.fromCharCode(32),Nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ar=!1;function Dr(e,t){switch(e){case"keyup":return-1!==Tr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Rr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Or=!1;var xr={eventTypes:Nr,extractEvents:function(e,t,n,r){var i;if(Er)e:{switch(e){case"compositionstart":var o=Nr.compositionStart;break e;case"compositionend":o=Nr.compositionEnd;break e;case"compositionupdate":o=Nr.compositionUpdate;break e}o=void 0}else Or?Dr(e,n)&&(o=Nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Nr.compositionStart);return o?(Ir&&"ko"!==n.locale&&(Or||o!==Nr.compositionStart?o===Nr.compositionEnd&&Or&&(i=br()):(vr="value"in(yr=r)?yr.value:yr.textContent,Or=!0)),o=wr.getPooled(o,t,n,r),i?o.data=i:null!==(i=Rr(n))&&(o.data=i),Ot(o),i=o):i=null,(e=Cr?function(e,t){switch(e){case"compositionend":return Rr(t);case"keypress":return 32!==t.which?null:(Ar=!0,kr);case"textInput":return(e=t.data)===kr&&Ar?null:e;default:return null}}(e,n):function(e,t){if(Or)return"compositionend"===e||!Er&&Dr(e,t)?(e=br(),gr=vr=yr=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ir&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=_r.getPooled(Nr.beforeInput,t,n,r)).data=e,Ot(t)):t=null,null===i?t:null===t?i:[i,t]}},Pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pr[e.type]:"textarea"===t}var Lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Fr(e,t,n){return(e=Mt.getPooled(Lr.change,e,t,n)).type="change",ie(n),Ot(e),e}var Ur=null,jr=null;function Vr(e){D(e)}function qr(e){if(Ce(dr(e)))return e}function Br(e,t){if("change"===e)return t}var Wr=!1;function zr(){Ur&&(Ur.detachEvent("onpropertychange",Kr),jr=Ur=null)}function Kr(e){if("value"===e.propertyName&&qr(jr))if(e=Fr(jr,e,It(e)),le)D(e);else{le=!0;try{ae(Vr,e)}finally{le=!1,fe()}}}function Hr(e,t,n){"focus"===e?(zr(),jr=n,(Ur=t).attachEvent("onpropertychange",Kr)):"blur"===e&&zr()}function Qr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(jr)}function Gr(e,t){if("click"===e)return qr(t)}function Yr(e,t){if("input"===e||"change"===e)return qr(t)}Z&&(Wr=On("input")&&(!document.documentMode||9<document.documentMode));var Xr,$r={eventTypes:Lr,_isInputEventSupported:Wr,extractEvents:function(e,t,n,r){var i=t?dr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Br;else if(Mr(i))if(Wr)a=Yr;else{a=Qr;var s=Hr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Gr);if(a&&(a=a(e,t)))return Fr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Re(i,"number",i.value)}},Jr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zr={eventTypes:Jr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?fr(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=en,u=Jr.mouseLeave,c=Jr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=tn,u=Jr.pointerLeave,c=Jr.pointerEnter,l="pointer");if(e=null==a?i:dr(a),i=null==t?i:dr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=kt(t))a++;for(t=0,i=e;i;i=kt(i))t++;for(;0<a-t;)c=kt(c),a--;for(;0<t-a;)e=kt(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=kt(c),e=kt(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=kt(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=kt(l);for(l=0;l<c.length;l++)Dt(c[l],"bubbled",u);for(l=s.length;0<l--;)Dt(s[l],"captured",r);return n===Xr?(Xr=null,[u]):(Xr=n,[u,r])}};var ei="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ti=Object.prototype.hasOwnProperty;function ni(e,t){if(ei(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ti.call(t,n[r])||!ei(e[n[r]],t[n[r]]))return!1;return!0}var ri=Z&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,ai=null,si=null,ui=!1;function ci(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ui||null==oi||oi!==Kn(n)?null:("selectionStart"in(n=oi)&&Yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},si&&ni(si,n)?null:(si=n,(e=Mt.getPooled(ii.select,ai,e,t)).type="select",e.target=oi,Ot(e),e))}var li={eventTypes:ii,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Pn(o),i=d.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?dr(t):window,e){case"focus":(Mr(o)||"true"===o.contentEditable)&&(oi=o,ai=t,si=null);break;case"blur":si=ai=oi=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":return ui=!1,ci(n,r);case"selectionchange":if(ri)break;case"keydown":case"keyup":return ci(n,r)}return null}};R.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=mr,E=pr,S=dr,R.injectEventPluginsByName({SimpleEventPlugin:vn,EnterLeaveEventPlugin:Zr,ChangeEventPlugin:$r,SelectEventPlugin:li,BeforeInputEventPlugin:xr}),new Set;var hi=[],fi=-1;function pi(e){0>fi||(e.current=hi[fi],hi[fi]=null,fi--)}function di(e,t){hi[++fi]=e.current,e.current=t}var mi={},yi={current:mi},vi={current:!1},gi=mi;function bi(e,t){var n=e.type.contextTypes;if(!n)return mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function _i(e){pi(vi),pi(yi)}function Ti(e){pi(vi),pi(yi)}function Ei(e,t,n){if(yi.current!==mi)throw Error(a(168));di(yi,t),di(vi,n)}function Si(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,$(t)||"Unknown",o));return i({},n,{},r)}function Ci(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||mi,gi=yi.current,di(yi,t),di(vi,vi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=Si(e,t,gi),r.__reactInternalMemoizedMergedChildContext=t,pi(vi),pi(yi),di(yi,t)):pi(vi),di(vi,n)}var ki=o.unstable_runWithPriority,Ni=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Di=o.unstable_shouldYield,Ri=o.unstable_requestPaint,Oi=o.unstable_now,xi=o.unstable_getCurrentPriorityLevel,Pi=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Fi=o.unstable_LowPriority,Ui=o.unstable_IdlePriority,ji={},Vi=void 0!==Ri?Ri:function(){},qi=null,Bi=null,Wi=!1,zi=Oi(),Ki=1e4>zi?Oi:function(){return Oi()-zi};function Hi(){switch(xi()){case Pi:return 99;case Mi:return 98;case Li:return 97;case Fi:return 96;case Ui:return 95;default:throw Error(a(332))}}function Qi(e){switch(e){case 99:return Pi;case 98:return Mi;case 97:return Li;case 96:return Fi;case 95:return Ui;default:throw Error(a(332))}}function Gi(e,t){return e=Qi(e),ki(e,t)}function Yi(e,t,n){return e=Qi(e),Ni(e,t,n)}function Xi(e){return null===qi?(qi=[e],Bi=Ni(Pi,Ji)):qi.push(e),ji}function $i(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}Ji()}function Ji(){if(!Wi&&null!==qi){Wi=!0;var e=0;try{var t=qi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(n){throw null!==qi&&(qi=qi.slice(e+1)),Ni(Pi,$i),n}finally{Wi=!1}}}var Zi=3;function eo(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function to(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var no={current:null},ro=null,io=null,oo=null;function ao(){oo=io=ro=null}function so(e,t){var n=e.type._context;di(no,n._currentValue),n._currentValue=t}function uo(e){var t=no.current;pi(no),e.type._context._currentValue=t}function co(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){ro=e,oo=io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ka=!0),e.firstContext=null)}function ho(e,t){if(oo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(oo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===io){if(null===ro)throw Error(a(308));io=t,ro.dependencies={expirationTime:0,firstContext:t,responders:null}}else io=io.next=t;return e._currentValue}var fo=!1;function po(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function yo(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function vo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function go(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=po(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=po(e.memoizedState),i=n.updateQueue=po(n.memoizedState)):r=e.updateQueue=mo(i):null===i&&(i=n.updateQueue=mo(r));null===i||r===i?vo(r,t):null===r.lastUpdate||null===i.lastUpdate?(vo(r,t),vo(i,t)):(vo(r,t),i.lastUpdate=t)}function bo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=po(e.memoizedState):wo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function wo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=mo(t)),t}function _o(e,t,n,r,o,a){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:fo=!0}return r}function To(e,t,n,r,i){fo=!1;for(var o=(t=wo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(ku(l,u.suspenseConfig),c=_o(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=_o(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,Nu(s),e.expirationTime=s,e.memoizedState=c}function Eo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),So(t.firstEffect,n),t.firstEffect=t.lastEffect=null,So(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function So(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!==typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var Co=x.ReactCurrentBatchConfig,Io=(new r.Component).refs;function ko(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var No={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=du(),i=Co.suspense;(i=yo(r=mu(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),go(e,i),yu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=du(),i=Co.suspense;(i=yo(r=mu(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),go(e,i),yu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=du(),r=Co.suspense;(r=yo(n=mu(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),go(e,r),yu(e,n)}};function Ao(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ni(n,r)||!ni(i,o))}function Do(e,t,n){var r=!1,i=mi,o=t.contextType;return"object"===typeof o&&null!==o?o=ho(o):(i=wi(t)?gi:yi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=No,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ro(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&No.enqueueReplaceState(t,t.state,null)}function Oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Io;var o=t.contextType;"object"===typeof o&&null!==o?i.context=ho(o):(o=wi(t)?gi:yi.current,i.context=bi(e,o)),null!==(o=e.updateQueue)&&(To(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(ko(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&No.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(To(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var xo=Array.isArray;function Po(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Io&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Mo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Lo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Gu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Po(e,t,n),r.return=e,r):((r=Yu(n.type,n.key,n.props,null,e.mode,r)).ref=Po(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Xu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case L:return(n=Yu(t.type,t.key,t.props,null,e.mode,n)).ref=Po(e,null,t),n.return=e,n;case F:return(t=Ju(t,e.mode,n)).return=e,t}if(xo(t)||X(t))return(t=Xu(t,e.mode,n,null)).return=e,t;Mo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case L:return n.key===i?n.type===U?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case F:return n.key===i?l(e,t,n,r):null}if(xo(n)||X(n))return null!==i?null:h(e,t,n,r,null);Mo(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case L:return e=e.get(null===r.key?n:r.key)||null,r.type===U?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case F:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xo(r)||X(r))return h(t,e=e.get(n)||null,r,i,null);Mo(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var v=p(i,h,s[m],u);if(null===v){null===h&&(h=y);break}e&&h&&null===v.alternate&&t(i,h),a=o(v,a,m),null===l?c=v:l.sibling=v,l=v,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=d(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=X(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,y=s=0,v=null,g=u.next();null!==m&&!g.done;y++,g=u.next()){m.index>y?(v=m,m=null):v=m.sibling;var b=p(i,m,g.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=v}if(g.done)return n(i,m),l;if(null===m){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return l}for(m=r(i,m);!g.done;y++,g=u.next())null!==(g=d(m,i,y,g.value,c))&&(e&&null!==g.alternate&&m.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===U&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case L:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===U:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===U?o.props.children:o.props)).ref=Po(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===U?((r=Xu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Yu(o.type,o.key,o.props,null,e.mode,u)).ref=Po(e,r,o),u.return=e,e=u)}return s(e);case F:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=$u(o,e.mode,u)).return=e,e=r),s(e);if(xo(o))return m(e,r,o,u);if(X(o))return y(e,r,o,u);if(l&&Mo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Fo=Lo(!0),Uo=Lo(!1),jo={},Vo={current:jo},qo={current:jo},Bo={current:jo};function Wo(e){if(e===jo)throw Error(a(174));return e}function zo(e,t){di(Bo,t),di(qo,e),di(Vo,jo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ve(null,"");break;default:t=Ve(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}pi(Vo),di(Vo,t)}function Ko(e){pi(Vo),pi(qo),pi(Bo)}function Ho(e){Wo(Bo.current);var t=Wo(Vo.current),n=Ve(t,e.type);t!==n&&(di(qo,e),di(Vo,n))}function Qo(e){qo.current===e&&(pi(Vo),pi(qo))}var Go={current:0};function Yo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Jn||n.data===Zn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Xo(e,t){return{responder:e,props:t}}var $o=x.ReactCurrentDispatcher,Jo=x.ReactCurrentBatchConfig,Zo=0,ea=null,ta=null,na=null,ra=null,ia=null,oa=null,aa=0,sa=null,ua=0,ca=!1,la=null,ha=0;function fa(){throw Error(a(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}function da(e,t,n,r,i,o){if(Zo=o,ea=t,na=null!==e?e.memoizedState:null,$o.current=null===na?xa:Pa,t=n(r,i),ca){do{ca=!1,ha+=1,na=null!==e?e.memoizedState:null,oa=ra,sa=ia=ta=null,$o.current=Pa,t=n(r,i)}while(ca);la=null,ha=0}if($o.current=Oa,(e=ea).memoizedState=ra,e.expirationTime=aa,e.updateQueue=sa,e.effectTag|=ua,e=null!==ta&&null!==ta.next,Zo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,ua=0,e)throw Error(a(300));return t}function ma(){$o.current=Oa,Zo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,ua=0,ca=!1,la=null,ha=0}function ya(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ia?ra=ia=e:ia=ia.next=e,ia}function va(){if(null!==oa)oa=(ia=oa).next,na=null!==(ta=na)?ta.next:null;else{if(null===na)throw Error(a(310));var e={memoizedState:(ta=na).memoizedState,baseState:ta.baseState,queue:ta.queue,baseUpdate:ta.baseUpdate,next:null};ia=null===ia?ra=e:ia.next=e,na=ta.next}return ia}function ga(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=va(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<ha){var r=n.dispatch;if(null!==la){var i=la.get(n);if(void 0!==i){la.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return ei(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Zo?(l||(l=!0,u=s,i=o),h>aa&&Nu(aa=h)):(ku(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),ei(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function wa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e}).dispatch=Ra.bind(null,ea,e),[t.memoizedState,e]}function _a(e){return ba(ga)}function Ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===sa?(sa={lastEffect:null}).lastEffect=e.next=e:null===(t=sa.lastEffect)?sa.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,sa.lastEffect=e),e}function Ea(e,t,n,r){var i=ya();ua|=e,i.memoizedState=Ta(t,n,void 0,void 0===r?null:r)}function Sa(e,t,n,r){var i=va();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&pa(r,a.deps))return void Ta(0,n,o,r)}ua|=e,i.memoizedState=Ta(t,n,o,r)}function Ca(e,t){return Ea(516,192,e,t)}function Ia(e,t){return Sa(516,192,e,t)}function ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Na(){}function Aa(e,t){return ya().memoizedState=[e,void 0===t?null:t],e}function Da(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ra(e,t,n){if(!(25>ha))throw Error(a(301));var r=e.alternate;if(e===ea||null!==r&&r===ea)if(ca=!0,e={expirationTime:Zo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===la&&(la=new Map),void 0===(n=la.get(t)))la.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=du(),o=Co.suspense;o={expirationTime:i=mu(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,ei(l,c))return}catch(h){}yu(e,i)}}var Oa={readContext:ho,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useResponder:fa,useDeferredValue:fa,useTransition:fa},xa={readContext:ho,useCallback:Aa,useContext:ho,useEffect:Ca,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ea(4,36,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ea(4,36,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ra.bind(null,ea,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:wa,useDebugValue:Na,useResponder:Xo,useDeferredValue:function(e,t){var n=wa(e),r=n[0],i=n[1];return Ca((function(){o.unstable_next((function(){var n=Jo.suspense;Jo.suspense=void 0===t?null:t;try{i(e)}finally{Jo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=wa(!1),n=t[0],r=t[1];return[Aa((function(t){r(!0),o.unstable_next((function(){var n=Jo.suspense;Jo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Jo.suspense=n}}))}),[e,n]),n]}},Pa={readContext:ho,useCallback:Da,useContext:ho,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Sa(4,36,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sa(4,36,e,t)},useMemo:function(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ba,useRef:function(){return va().memoizedState},useState:_a,useDebugValue:Na,useResponder:Xo,useDeferredValue:function(e,t){var n=_a(),r=n[0],i=n[1];return Ia((function(){o.unstable_next((function(){var n=Jo.suspense;Jo.suspense=void 0===t?null:t;try{i(e)}finally{Jo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=_a(),n=t[0],r=t[1];return[Da((function(t){r(!0),o.unstable_next((function(){var n=Jo.suspense;Jo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Jo.suspense=n}}))}),[e,n]),n]}},Ma=null,La=null,Fa=!1;function Ua(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ja(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Va(e){if(Fa){var t=La;if(t){var n=t;if(!ja(e,t)){if(!(t=ar(n.nextSibling))||!ja(e,t))return e.effectTag=-1025&e.effectTag|2,Fa=!1,void(Ma=e);Ua(Ma,n)}Ma=e,La=ar(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Fa=!1,Ma=e}}function qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ma=e}function Ba(e){if(e!==Ma)return!1;if(!Fa)return qa(e),Fa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!rr(t,e.memoizedProps))for(t=La;t;)Ua(e,t),t=ar(t.nextSibling);if(qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===$n){if(0===t){La=ar(e.nextSibling);break e}t--}else n!==Xn&&n!==Zn&&n!==Jn||t++}e=e.nextSibling}La=null}}else La=Ma?ar(e.stateNode.nextSibling):null;return!0}function Wa(){La=Ma=null,Fa=!1}var za=x.ReactCurrentOwner,Ka=!1;function Ha(e,t,n,r){t.child=null===e?Uo(t,null,n,r):Fo(t,e.child,n,r)}function Qa(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=da(e,t,n,r,o,i),null===e||Ka?(t.effectTag|=1,Ha(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function Ga(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Qu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Yu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ya(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ni)(i,r)&&e.ref===t.ref)?ls(e,t,o):(t.effectTag|=1,(e=Gu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ya(e,t,n,r,i,o){return null!==e&&ni(e.memoizedProps,r)&&e.ref===t.ref&&(Ka=!1,i<o)?ls(e,t,o):$a(e,t,n,r,o)}function Xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function $a(e,t,n,r,i){var o=wi(n)?gi:yi.current;return o=bi(t,o),lo(t,i),n=da(e,t,n,r,o,i),null===e||Ka?(t.effectTag|=1,Ha(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function Ja(e,t,n,r,i){if(wi(n)){var o=!0;Ci(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Do(t,n,r),Oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ho(c):c=bi(t,c=wi(n)?gi:yi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Ro(t,a,r,c),fo=!1;var f=t.memoizedState;u=a.state=f;var p=t.updateQueue;null!==p&&(To(t,p,r,a,i),u=t.memoizedState),s!==r||f!==u||vi.current||fo?("function"===typeof l&&(ko(t,n,l,r),u=t.memoizedState),(s=fo||Ao(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:to(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ho(c):c=bi(t,c=wi(n)?gi:yi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Ro(t,a,r,c),fo=!1,u=t.memoizedState,f=a.state=u,null!==(p=t.updateQueue)&&(To(t,p,r,a,i),f=t.memoizedState),s!==r||u!==f||vi.current||fo?("function"===typeof l&&(ko(t,n,l,r),f=t.memoizedState),(l=fo||Ao(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Za(e,t,n,r,o,i)}function Za(e,t,n,r,i,o){Xa(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&Ii(t,n,!1),ls(e,t,o);r=t.stateNode,za.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Fo(t,e.child,null,o),t.child=Fo(t,null,s,o)):Ha(e,t,s,o),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function es(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),zo(e,t.containerInfo)}var ts,ns,rs,is,os={dehydrated:null,retryTime:0};function as(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Go.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),di(Go,1&a),null===e){if(void 0!==o.fallback&&Va(t),s){if(s=o.fallback,(o=Xu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Xu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=os,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Uo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Gu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Gu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=os,t.child=n,i}return n=Fo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Xu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Xu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=os,t.child=o,n}return t.memoizedState=null,t.child=Fo(t,e,o.children,n)}function ss(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),co(e.return,t)}function us(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function cs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ha(e,t,r.children,n),0!==(2&(r=Go.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ss(e,n);else if(19===e.tag)ss(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Go,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Yo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),us(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Yo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}us(t,!0,n,null,o,t.lastEffect);break;case"together":us(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ls(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Nu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function hs(e){e.effectTag|=4}function fs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ps(e){switch(e.tag){case 1:wi(e.type)&&_i();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ko(),Ti(),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Qo(e),null;case 13:return pi(Go),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(Go),null;case 4:return Ko(),null;case 10:return uo(e),null;default:return null}}function ds(e,t){return{value:e,source:t,stack:J(t)}}ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ns=function(){},rs=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Wo(Vo.current),e=null,n){case"input":a=Ie(c,a),r=Ie(c,r),e=[];break;case"option":a=Oe(c,a),r=Oe(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Pe(c,a),r=Pe(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=zn)}for(s in qn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(p.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(p.hasOwnProperty(s)?(null!=l&&Wn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&hs(t)}},is=function(e,t,n,r){n!==r&&hs(t)};var ms="function"===typeof WeakSet?WeakSet:Set;function ys(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=J(n)),null!==n&&$(n.type),t=t.value,null!==e&&1===e.tag&&$(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:bs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:to(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function bs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!==(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!==(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ws(e,t,n){switch("function"===typeof zu&&zu(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Gi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Vu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:vs(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Vu(e,n)}}(t,n);break;case 5:vs(t);break;case 4:Ss(e,t,n)}}function _s(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&_s(t)}function Ts(e){return 5===e.tag||3===e.tag||4===e.tag}function Es(e){e:{for(var t=e.return;null!==t;){if(Ts(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(We(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ts(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=zn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Ss(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(ws(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ws(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:bs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[lr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ne(n,r),Bn(e,i),t=Bn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?jn(n,u):"dangerouslySetInnerHTML"===s?Be(n,u):"children"===s?We(n,u):Te(n,s,u,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Le(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?xe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?xe(n,!!r.multiple,r.defaultValue,!0):xe(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,Ct(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,tu=Ki()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Un("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Is(t);break;case 19:Is(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ms),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ks="function"===typeof WeakMap?WeakMap:Map;function Ns(e,t,n){(n=yo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){iu||(iu=!0,ou=r),ys(e,t)},n}function As(e,t,n){(n=yo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ys(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===au?au=new Set([this]):au.add(this),ys(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ds,Rs=Math.ceil,Os=x.ReactCurrentDispatcher,xs=x.ReactCurrentOwner,Ps=0,Ms=8,Ls=16,Fs=32,Us=0,js=1,Vs=2,qs=3,Bs=4,Ws=5,zs=Ps,Ks=null,Hs=null,Qs=0,Gs=Us,Ys=null,Xs=1073741823,$s=1073741823,Js=null,Zs=0,eu=!1,tu=0,nu=500,ru=null,iu=!1,ou=null,au=null,su=!1,uu=null,cu=90,lu=null,hu=0,fu=null,pu=0;function du(){return(zs&(Ls|Fs))!==Ps?1073741821-(Ki()/10|0):0!==pu?pu:pu=1073741821-(Ki()/10|0)}function mu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if((zs&Ls)!==Ps)return Qs;if(null!==n)e=eo(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=eo(e,150,100);break;case 97:case 96:e=eo(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ks&&e===Qs&&--e,e}function yu(e,t){if(50<hu)throw hu=0,fu=null,Error(a(185));if(null!==(e=vu(e,t))){var n=Hi();1073741823===t?(zs&Ms)!==Ps&&(zs&(Ls|Fs))===Ps?_u(e):(bu(e),zs===Ps&&$i()):bu(e),(4&zs)===Ps||98!==n&&99!==n||(null===lu?lu=new Map([[e,t]]):(void 0===(n=lu.get(e))||n>t)&&lu.set(e,t))}}function vu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ks===i&&(Nu(t),Gs===Bs&&tc(i,Qs)),nc(i,t)),i}function gu(e){var t=e.lastExpiredTime;return 0!==t?t:ec(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function bu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(_u.bind(null,e));else{var t=gu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=du();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==ji&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(_u.bind(null,e)):Yi(r,wu.bind(null,e),{timeout:10*(1073741821-t)-Ki()}),e.callbackNode=t}}}function wu(e,t){if(pu=0,t)return rc(e,t=du()),bu(e),null;var n=gu(e);if(0!==n){if(t=e.callbackNode,(zs&(Ls|Fs))!==Ps)throw Error(a(327));if(Fu(),e===Ks&&n===Qs||Su(e,n),null!==Hs){var r=zs;zs|=Ls;for(var i=Iu();;)try{Du();break}catch(u){Cu(e,u)}if(ao(),zs=r,Os.current=i,Gs===js)throw t=Ys,Su(e,n),tc(e,n),bu(e),t;if(null===Hs)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Gs,Ks=null,r){case Us:case js:throw Error(a(345));case Vs:rc(e,2<n?2:n);break;case qs:if(tc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=xu(i)),1073741823===Xs&&10<(i=tu+nu-Ki())){if(eu){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,Su(e,n);break}}if(0!==(o=gu(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=ir(Pu.bind(null,e),i);break}Pu(e);break;case Bs:if(tc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=xu(i)),eu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,Su(e,n);break}if(0!==(i=gu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==$s?r=10*(1073741821-$s)-Ki():1073741823===Xs?r=0:(r=10*(1073741821-Xs)-5e3,0>(r=(i=Ki())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=ir(Pu.bind(null,e),r);break}Pu(e);break;case Ws:if(1073741823!==Xs&&null!==Js){o=Xs;var s=Js;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ki()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){tc(e,n),e.timeoutHandle=ir(Pu.bind(null,e),r);break}}Pu(e);break;default:throw Error(a(329))}if(bu(e),e.callbackNode===t)return wu.bind(null,e)}}return null}function _u(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Pu(e);else{if((zs&(Ls|Fs))!==Ps)throw Error(a(327));if(Fu(),e===Ks&&t===Qs||Su(e,t),null!==Hs){var n=zs;zs|=Ls;for(var r=Iu();;)try{Au();break}catch(i){Cu(e,i)}if(ao(),zs=n,Os.current=r,Gs===js)throw n=Ys,Su(e,t),tc(e,t),bu(e),n;if(null!==Hs)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ks=null,Pu(e),bu(e)}}return null}function Tu(e,t){var n=zs;zs|=1;try{return e(t)}finally{(zs=n)===Ps&&$i()}}function Eu(e,t){var n=zs;zs&=-2,zs|=Ms;try{return e(t)}finally{(zs=n)===Ps&&$i()}}function Su(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,or(n)),null!==Hs)for(n=Hs.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&_i();break;case 3:Ko(),Ti();break;case 5:Qo(r);break;case 4:Ko();break;case 13:case 19:pi(Go);break;case 10:uo(r)}n=n.return}Ks=e,Hs=Gu(e.current,null),Qs=t,Gs=Us,Ys=null,$s=Xs=1073741823,Js=null,Zs=0,eu=!1}function Cu(e,t){for(;;){try{if(ao(),ma(),null===Hs||null===Hs.return)return Gs=js,Ys=t,null;e:{var n=e,r=Hs.return,i=Hs,o=t;if(t=Qs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var a=o,s=0!==(1&Go.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var p=new Set;p.add(a),u.updateQueue=p}else f.add(a);if(0===(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var d=yo(1073741823,null);d.tag=2,go(i,d)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new ks,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=qu.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error(($(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+J(i))}Gs!==Ws&&(Gs=Vs),o=ds(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,bo(u,Ns(u,a,t));break e;case 1:a=o;var v=u.type,g=u.stateNode;if(0===(64&u.effectTag)&&("function"===typeof v.getDerivedStateFromError||null!==g&&"function"===typeof g.componentDidCatch&&(null===au||!au.has(g)))){u.effectTag|=4096,u.expirationTime=t,bo(u,As(u,a,t));break e}}u=u.return}while(null!==u)}Hs=Ou(Hs)}catch(b){t=b;continue}break}}function Iu(){var e=Os.current;return Os.current=Oa,null===e?Oa:e}function ku(e,t){e<Xs&&2<e&&(Xs=e),null!==t&&e<$s&&2<e&&($s=e,Js=t)}function Nu(e){e>Zs&&(Zs=e)}function Au(){for(;null!==Hs;)Hs=Ru(Hs)}function Du(){for(;null!==Hs&&!Di();)Hs=Ru(Hs)}function Ru(e){var t=Ds(e.alternate,e,Qs);return e.memoizedProps=e.pendingProps,null===t&&(t=Ou(e)),xs.current=null,t}function Ou(e){Hs=e;do{var t=Hs.alternate;if(e=Hs.return,0===(2048&Hs.effectTag)){e:{var n=t,r=Qs,o=(t=Hs).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:wi(t.type)&&_i();break;case 3:Ko(),Ti(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===n||null===n.child)&&Ba(t)&&hs(t),ns(t);break;case 5:Qo(t),r=Wo(Bo.current);var s=t.type;if(null!==n&&null!=t.stateNode)rs(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=Wo(Vo.current);if(Ba(t)){var c=(o=t).stateNode;n=o.type;var l=o.memoizedProps,h=r;switch(c[cr]=o,c[lr]=l,s=void 0,r=c,n){case"iframe":case"object":case"embed":Cn("load",r);break;case"video":case"audio":for(c=0;c<Ze.length;c++)Cn(Ze[c],r);break;case"source":Cn("error",r);break;case"img":case"image":case"link":Cn("error",r),Cn("load",r);break;case"form":Cn("reset",r),Cn("submit",r);break;case"details":Cn("toggle",r);break;case"input":ke(r,l),Cn("invalid",r),Wn(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Cn("invalid",r),Wn(h,"onChange");break;case"textarea":Me(r,l),Cn("invalid",r),Wn(h,"onChange")}for(s in qn(n,l),c=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"===typeof u?r.textContent!==u&&(c=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(c=["children",""+u]):p.hasOwnProperty(s)&&null!=u&&Wn(h,s));switch(n){case"input":Se(r),De(r,l,!0);break;case"textarea":Se(r),Fe(r);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(r.onclick=zn)}s=c,o.updateQueue=s,(o=null!==s)&&hs(t)}else{n=t,h=s,l=o,c=9===r.nodeType?r:r.ownerDocument,u===Ue.html&&(u=je(h)),u===Ue.html?"script"===h?((l=c.createElement("div")).innerHTML="<script><\/script>",c=l.removeChild(l.firstChild)):"string"===typeof l.is?c=c.createElement(h,{is:l.is}):(c=c.createElement(h),"select"===h&&(h=c,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):c=c.createElementNS(u,h),(l=c)[cr]=n,l[lr]=o,ts(l,t,!1,!1),t.stateNode=l;var f=r,d=Bn(h=s,n=o);switch(h){case"iframe":case"object":case"embed":Cn("load",l),r=n;break;case"video":case"audio":for(r=0;r<Ze.length;r++)Cn(Ze[r],l);r=n;break;case"source":Cn("error",l),r=n;break;case"img":case"image":case"link":Cn("error",l),Cn("load",l),r=n;break;case"form":Cn("reset",l),Cn("submit",l),r=n;break;case"details":Cn("toggle",l),r=n;break;case"input":ke(l,n),r=Ie(l,n),Cn("invalid",l),Wn(f,"onChange");break;case"option":r=Oe(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),Cn("invalid",l),Wn(f,"onChange");break;case"textarea":Me(l,n),r=Pe(l,n),Cn("invalid",l),Wn(f,"onChange");break;default:r=n}qn(h,r),c=void 0,u=h;var m=l,y=r;for(c in y)if(y.hasOwnProperty(c)){var v=y[c];"style"===c?jn(m,v):"dangerouslySetInnerHTML"===c?null!=(v=v?v.__html:void 0)&&Be(m,v):"children"===c?"string"===typeof v?("textarea"!==u||""!==v)&&We(m,v):"number"===typeof v&&We(m,""+v):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(p.hasOwnProperty(c)?null!=v&&Wn(f,c):null!=v&&Te(m,c,v,d))}switch(h){case"input":Se(l),De(l,n,!1);break;case"textarea":Se(l),Fe(l);break;case"option":null!=n.value&&l.setAttribute("value",""+_e(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?xe(r,!!n.multiple,l,!1):null!=n.defaultValue&&xe(r,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(l.onclick=zn)}(o=nr(s,o))&&hs(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)is(n,t,n.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(a(166));r=Wo(Bo.current),Wo(Vo.current),Ba(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[cr]=o,(o=s.nodeValue!==r)&&hs(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[cr]=s,t.stateNode=o)}break;case 11:break;case 13:if(pi(Go),o=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&Ba(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r,r.nextEffect=l):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Go.current)?Gs===Us&&(Gs=qs):(Gs!==Us&&Gs!==qs||(Gs=Bs),0!==Zs&&null!==Ks&&(tc(Ks,Qs),nc(Ks,Zs)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ko(),ns(t);break;case 10:uo(t);break;case 9:case 14:break;case 17:wi(t.type)&&_i();break;case 19:if(pi(Go),null===(o=t.memoizedState))break;if(s=0!==(64&t.effectTag),null===(l=o.rendering)){if(s)fs(o,!1);else if(Gs!==Us||null!==n&&0!==(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=Yo(n))){for(t.effectTag|=64,fs(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;di(Go,1&Go.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=Yo(l))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),fs(o,!0),null===o.tail&&"hidden"===o.tailMode){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Ki()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,fs(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Ki()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Go.current,di(Go,o=s?1&o|2:1&o),t=r;break e}break;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=Hs,1===Qs||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(l=r.childExpirationTime)>s&&(s=l),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Hs.firstEffect),null!==Hs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Hs.firstEffect),e.lastEffect=Hs.lastEffect),1<Hs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Hs:e.firstEffect=Hs,e.lastEffect=Hs))}else{if(null!==(t=ps(Hs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Hs.sibling))return t;Hs=e}while(null!==Hs);return Gs===Us&&(Gs=Ws),null}function xu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Pu(e){var t=Hi();return Gi(99,Mu.bind(null,e,t)),null}function Mu(e,t){if(Fu(),(zs&(Ls|Fs))!==Ps)throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=xu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ks&&(Hs=Ks=null,Qs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=zs;zs|=Fs,xs.current=null,er=Sn;var s=Gn();if(Yn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(M){u=null;break e}var f=0,p=-1,d=-1,m=0,y=0,v=s,g=null;t:for(;;){for(var b;v!==u||0!==l&&3!==v.nodeType||(p=f+l),v!==h||0!==c&&3!==v.nodeType||(d=f+c),3===v.nodeType&&(f+=v.nodeValue.length),null!==(b=v.firstChild);)g=v,v=b;for(;;){if(v===s)break t;if(g===u&&++m===l&&(p=f),g===h&&++y===c&&(d=f),null!==(b=v.nextSibling))break;g=(v=g).parentNode}v=b}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;tr={focusedElem:s,selectionRange:u},Sn=!1,ru=i;do{try{Lu()}catch(M){if(null===ru)throw Error(a(330));Vu(ru,M),ru=ru.nextEffect}}while(null!==ru);ru=i;do{try{for(s=e,u=t;null!==ru;){var w=ru.effectTag;if(16&w&&We(ru.stateNode,""),128&w){var _=ru.alternate;if(null!==_){var T=_.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&w){case 2:Es(ru),ru.effectTag&=-3;break;case 6:Es(ru),ru.effectTag&=-3,Cs(ru.alternate,ru);break;case 1024:ru.effectTag&=-1025;break;case 1028:ru.effectTag&=-1025,Cs(ru.alternate,ru);break;case 4:Cs(ru.alternate,ru);break;case 8:Ss(s,l=ru,u),_s(l)}ru=ru.nextEffect}}catch(M){if(null===ru)throw Error(a(330));Vu(ru,M),ru=ru.nextEffect}}while(null!==ru);if(T=tr,_=Gn(),w=T.focusedElem,u=T.selectionRange,_!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&Yn(w)&&(_=u.start,void 0===(T=u.end)&&(T=_),"selectionStart"in w?(w.selectionStart=_,w.selectionEnd=Math.min(T,w.value.length)):(T=(_=w.ownerDocument||document)&&_.defaultView||window).getSelection&&(T=T.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!T.extend&&s>u&&(l=u,u=s,s=l),l=Qn(w,s),h=Qn(w,u),l&&h&&(1!==T.rangeCount||T.anchorNode!==l.node||T.anchorOffset!==l.offset||T.focusNode!==h.node||T.focusOffset!==h.offset)&&((_=_.createRange()).setStart(l.node,l.offset),T.removeAllRanges(),s>u?(T.addRange(_),T.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),T.addRange(_))))),_=[];for(T=w;T=T.parentNode;)1===T.nodeType&&_.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<_.length;w++)(T=_[w]).element.scrollLeft=T.left,T.element.scrollTop=T.top}tr=null,Sn=!!er,er=null,e.current=n,ru=i;do{try{for(w=r;null!==ru;){var E=ru.effectTag;if(36&E){var S=ru.alternate;switch(T=w,(_=ru).tag){case 0:case 11:case 15:bs(16,32,_);break;case 1:var C=_.stateNode;if(4&_.effectTag)if(null===S)C.componentDidMount();else{var I=_.elementType===_.type?S.memoizedProps:to(_.type,S.memoizedProps);C.componentDidUpdate(I,S.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var k=_.updateQueue;null!==k&&Eo(0,k,C);break;case 3:var N=_.updateQueue;if(null!==N){if(s=null,null!==_.child)switch(_.child.tag){case 5:s=_.child.stateNode;break;case 1:s=_.child.stateNode}Eo(0,N,s)}break;case 5:var A=_.stateNode;null===S&&4&_.effectTag&&nr(_.type,_.memoizedProps)&&A.focus();break;case 6:case 4:case 12:break;case 13:if(null===_.memoizedState){var D=_.alternate;if(null!==D){var R=D.memoizedState;if(null!==R){var O=R.dehydrated;null!==O&&Ct(O)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&E){_=void 0;var x=ru.ref;if(null!==x){var P=ru.stateNode;switch(ru.tag){case 5:_=P;break;default:_=P}"function"===typeof x?x(_):x.current=_}}ru=ru.nextEffect}}catch(M){if(null===ru)throw Error(a(330));Vu(ru,M),ru=ru.nextEffect}}while(null!==ru);ru=null,Vi(),zs=o}else e.current=n;if(su)su=!1,uu=e,cu=t;else for(ru=i;null!==ru;)t=ru.nextEffect,ru.nextEffect=null,ru=t;if(0===(t=e.firstPendingTime)&&(au=null),1073741823===t?e===fu?hu++:(hu=0,fu=e):hu=0,"function"===typeof Wu&&Wu(n.stateNode,r),bu(e),iu)throw iu=!1,e=ou,ou=null,e;return(zs&Ms)!==Ps?null:($i(),null)}function Lu(){for(;null!==ru;){var e=ru.effectTag;0!==(256&e)&&gs(ru.alternate,ru),0===(512&e)||su||(su=!0,Yi(97,(function(){return Fu(),null}))),ru=ru.nextEffect}}function Fu(){if(90!==cu){var e=97<cu?97:cu;return cu=90,Gi(e,Uu)}}function Uu(){if(null===uu)return!1;var e=uu;if(uu=null,(zs&(Ls|Fs))!==Ps)throw Error(a(331));var t=zs;for(zs|=Fs,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:bs(128,0,n),bs(0,64,n)}}catch(r){if(null===e)throw Error(a(330));Vu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return zs=t,$i(),!0}function ju(e,t,n){go(e,t=Ns(e,t=ds(n,t),1073741823)),null!==(e=vu(e,1073741823))&&bu(e)}function Vu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===au||!au.has(r))){go(n,e=As(n,e=ds(t,e),1073741823)),null!==(n=vu(n,1073741823))&&bu(n);break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ks===e&&Qs===n?Gs===Bs||Gs===qs&&1073741823===Xs&&Ki()-tu<nu?Su(e,Qs):eu=!0:ec(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),bu(e)))}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=mu(t=du(),e,null)),null!==(e=vu(e,t))&&bu(e)}Ds=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Ka=!0;else{if(r<n){switch(Ka=!1,t.tag){case 3:es(t),Wa();break;case 5:if(Ho(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ci(t);break;case 4:zo(t,t.stateNode.containerInfo);break;case 10:so(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?as(e,t,n):(di(Go,1&Go.current),null!==(t=ls(e,t,n))?t.sibling:null);di(Go,1&Go.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return cs(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),di(Go,Go.current),!r)return null}return ls(e,t,n)}Ka=!1}}else Ka=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),lo(t,n),i=da(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ma(),wi(r)){var o=!0;Ci(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&ko(t,r,s,e),i.updater=No,t.stateNode=i,i._reactInternalFiber=t,Oo(t,r,e,n),t=Za(null,t,r,!0,o,n)}else t.tag=0,Ha(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Qu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===z)return 11;if(e===Q)return 14}return 2}(i),e=to(i,e),o){case 0:t=$a(null,t,i,e,n);break;case 1:t=Ja(null,t,i,e,n);break;case 11:t=Qa(null,t,i,e,n);break;case 14:t=Ga(null,t,i,to(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,$a(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ja(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:if(es(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,To(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)Wa(),t=ls(e,t,n);else{if((i=t.stateNode.hydrate)&&(La=ar(t.stateNode.containerInfo.firstChild),Ma=t,i=Fa=!0),i)for(n=Uo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ha(e,t,r,n),Wa();t=t.child}return t;case 5:return Ho(t),null===e&&Va(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,rr(r,i)?s=null:null!==o&&rr(r,o)&&(t.effectTag|=16),Xa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ha(e,t,s,n),t=t.child),t;case 6:return null===e&&Va(t),null;case 13:return as(e,t,n);case 4:return zo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Fo(t,null,r,n):Ha(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Qa(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return Ha(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ha(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,so(t,o=i.value),null!==s){var u=s.value;if(0===(o=ei(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!vi.current){t=ls(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=yo(n,null)).tag=2,go(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),co(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}Ha(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=ho(i,o.unstable_observedBits)),t.effectTag|=1,Ha(e,t,r,n),t.child;case 14:return o=to(i=t.type,t.pendingProps),Ga(e,t,i,o=to(i.type,o),r,n);case 15:return Ya(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(r)?(e=!0,Ci(t)):e=!1,lo(t,n),Do(t,r,i),Oo(t,r,i,n),Za(null,t,r,!0,e,n);case 19:return cs(e,t,n)}throw Error(a(156,t.tag))};var Wu=null,zu=null;function Ku(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hu(e,t,n,r){return new Ku(e,t,n,r)}function Qu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Qu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case U:return Xu(n.children,i,o,t);case W:s=8,i|=7;break;case j:s=8,i|=1;break;case V:return(e=Hu(12,n,t,8|i)).elementType=V,e.type=V,e.expirationTime=o,e;case K:return(e=Hu(13,n,t,i)).type=K,e.elementType=K,e.expirationTime=o,e;case H:return(e=Hu(19,n,t,i)).elementType=H,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case q:s=10;break e;case B:s=9;break e;case z:s=11;break e;case Q:s=14;break e;case G:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Xu(e,t,n,r){return(e=Hu(7,e,r,t)).expirationTime=n,e}function $u(e,t,n){return(e=Hu(6,e,null,t)).expirationTime=n,e}function Ju(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ec(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function tc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function nc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function rc(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function ic(e,t,n,r){var i=t.current,o=du(),s=Co.suspense;o=mu(o,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(wi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(wi(c)){n=Si(n,c,u);break e}}n=u}else n=mi;return null===t.context?t.context=n:t.pendingContext=n,(t=yo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),go(i,t),yu(i,o),o}function oc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function ac(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function sc(e,t){ac(e,t),(e=e.alternate)&&ac(e,t)}function uc(e,t,n){var r=new Zu(e,t,n=null!=n&&!0===n.hydrate),i=Hu(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,e[hr]=r.current,n&&0!==t&&function(e){var t=Pn(e);mt.forEach((function(n){Mn(n,e,t)})),yt.forEach((function(n){Mn(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function cc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=oc(a);s.call(e)}}ic(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new uc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=oc(a);u.call(e)}}Eu((function(){ic(t,a,e,i)}))}return oc(a)}function hc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!cc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}it=function(e){if(13===e.tag){var t=eo(du(),150,100);yu(e,t),sc(e,t)}},ot=function(e){if(13===e.tag){du();var t=Zi++;yu(e,t),sc(e,t)}},at=function(e){if(13===e.tag){var t=du();yu(e,t=mu(t,e,null)),sc(e,t)}},ee=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=mr(r);if(!i)throw Error(a(90));Ce(r),Ae(r,i)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&xe(e,!!n.multiple,t,!1)}},uc.prototype.render=function(e,t){ic(e,this._internalRoot,null,void 0===t?null:t)},uc.prototype.unmount=function(e){ic(null,this._internalRoot,null,void 0===e?null:e)},ae=Tu,se=function(e,t,n,r){var i=zs;zs|=4;try{return Gi(98,e.bind(null,t,n,r))}finally{(zs=i)===Ps&&$i()}},ue=function(){(zs&(1|Ls|Fs))===Ps&&(function(){if(null!==lu){var e=lu;lu=null,e.forEach((function(e,t){rc(t,e),bu(t)})),$i()}}(),Fu())},ce=function(e,t){var n=zs;zs|=2;try{return e(t)}finally{(zs=n)===Ps&&$i()}};var fc={createPortal:hc,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},hydrate:function(e,t,n){if(!cc(t))throw Error(a(200));return lc(null,e,t,!0,n)},render:function(e,t,n){if(!cc(t))throw Error(a(200));return lc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!cc(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return lc(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!cc(e))throw Error(a(40));return!!e._reactRootContainer&&(Eu((function(){lc(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return hc.apply(void 0,arguments)},unstable_batchedUpdates:Tu,flushSync:function(e,t){if((zs&(Ls|Fs))!==Ps)throw Error(a(187));var n=zs;zs|=1;try{return Gi(99,e.bind(null,t))}finally{zs=n,$i()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[pr,dr,mr,R.injectEventPluginsByName,f,Ot,function(e){k(e,Rt)},ie,oe,Dn,D,Fu,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Wu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},zu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:fr,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"});var pc={default:fc},dc=pc&&fc||pc;e.exports=dc.default||dc},function(e,t,n){"use strict";e.exports=n(29)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,m=window.clearTimeout,y=window.requestAnimationFrame,v=window.cancelAnimationFrame;if("undefined"!==typeof console&&("function"!==typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var b=!1,w=null,_=-1,T=5,E=0;a=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):33.33};var S=new MessageChannel,C=S.port2;S.port1.onmessage=function(){if(null!==w){var e=t.unstable_now();E=e+T;try{w(!0,e)?C.postMessage(null):(b=!1,w=null)}catch(n){throw C.postMessage(null),n}}else b=!1},r=function(e){w=e,b||(b=!0,C.postMessage(null))},i=function(e,n){_=d((function(){e(t.unstable_now())}),n)},o=function(){m(_),_=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function N(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var D=[],R=[],O=1,x=null,P=3,M=!1,L=!1,F=!1;function U(e){for(var t=k(R);null!==t;){if(null===t.callback)N(R);else{if(!(t.startTime<=e))break;N(R),t.sortIndex=t.expirationTime,I(D,t)}t=k(R)}}function j(e){if(F=!1,U(e),!L)if(null!==k(D))L=!0,r(V);else{var t=k(R);null!==t&&i(j,t.startTime-e)}}function V(e,n){L=!1,F&&(F=!1,o()),M=!0;var r=P;try{for(U(n),x=k(D);null!==x&&(!(x.expirationTime>n)||e&&!a());){var s=x.callback;if(null!==s){x.callback=null,P=x.priorityLevel;var u=s(x.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?x.callback=u:x===k(D)&&N(D),U(n)}else N(D);x=k(D)}if(null!==x)var c=!0;else{var l=k(R);null!==l&&i(j,l.startTime-n),c=!1}return c}finally{x=null,P=r,M=!1}}function q(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:q(e)}else a=q(e),u=s;return e={id:O++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,I(R,e),null===k(D)&&e===k(R)&&(F?o():F=!0,i(j,u-s))):(e.sortIndex=a,I(D,e),L||M||(L=!0,r(V))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_shouldYield=function(){var e=t.unstable_now();U(e);var n=k(D);return n!==x&&null!==x&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<x.expirationTime||a()},t.unstable_requestPaint=B,t.unstable_continueExecution=function(){L||M||(L=!0,r(V))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return k(D)},t.unstable_Profiling=null},,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(35);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(37)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case c:return e;default:return t}}case v:case y:case o:return t}}}function T(e){return _(e)===f}t.typeOf=_,t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=v,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===d||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===g||e.$$typeof===b||e.$$typeof===w)},t.isAsyncMode=function(e){return T(e)||_(e)===h},t.isConcurrentMode=T,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===p},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===y},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===u},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===d}},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2),i=n(1),o=n(0),a=n.n(o);n(5);function s(e){var t,n,r="";if(e)if("object"===typeof e)if(e.push)for(t=0;t<e.length;t++)e[t]&&(n=s(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(n=s(t))&&(r&&(r+=" "),r+=n);else"boolean"===typeof e||e.call||(r&&(r+=" "),r+=e);return r}var u=function(){for(var e,t=0,n="";t<arguments.length;)(e=s(arguments[t++]))&&(n&&(n+=" "),n+=e);return n},c=n(8),l=n(3),h=n(6),f=n.n(h);function p(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function d(e,t){return a.a.useMemo((function(){return null==e&&null==t?null:function(n){p(e,n),p(t,n)}}),[e,t])}var m="undefined"!==typeof window?a.a.useLayoutEffect:a.a.useEffect;function y(e){var t=a.a.useRef(e);return m((function(){t.current=e})),a.a.useCallback((function(e){return(0,t.current)(e)}),[])}var v="undefined"!==typeof window?a.a.useLayoutEffect:a.a.useEffect;var g=function(e){var t=e.children,n=e.defer,r=void 0!==n&&n,i=e.fallback,o=void 0===i?null:i,s=a.a.useState(!1),u=s[0],c=s[1];return v((function(){r||c(!0)}),[r]),a.a.useEffect((function(){r&&c(!0)}),[r]),a.a.createElement(a.a.Fragment,null,u?t:o)},b=!0,w=!1,_=null,T={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function E(e){e.metaKey||e.altKey||e.ctrlKey||(b=!0)}function S(){b=!1}function C(){"hidden"===this.visibilityState&&w&&(b=!0)}function I(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return b||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!T[t]||e.readOnly)||("TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable)}(t)}function k(){w=!0,window.clearTimeout(_),_=window.setTimeout((function(){w=!1}),100)}function N(){return{isFocusVisible:I,onBlurVisible:k,ref:a.a.useCallback((function(e){var t,n=f.a.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",E,!0),t.addEventListener("mousedown",S,!0),t.addEventListener("pointerdown",S,!0),t.addEventListener("touchstart",S,!0),t.addEventListener("visibilitychange",C,!0))}),[])}}var A=n(15),D=n(7),R=n(10),O=n(9),x=a.a.createContext(null);function P(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(o.isValidElement)(e)?t(e):e}(e)})),n}function M(e,t,n){return null!=n[t]?n[t]:e.props[t]}function L(e,t,n){var r=P(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(a){var s=i[a];if(Object(o.isValidElement)(s)){var u=a in t,c=a in r,l=t[a],h=Object(o.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&Object(o.isValidElement)(l)&&(i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:M(s,"exit",e),enter:M(s,"enter",e)})):i[a]=Object(o.cloneElement)(s,{in:!1}):i[a]=Object(o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:M(s,"exit",e),enter:M(s,"enter",e)})}})),i}var F=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},U=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Object(O.a)(Object(O.a)(r)));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(R.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,P(n.children,(function(e){return Object(o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:M(e,"appear",n),enter:M(e,"enter",n),exit:M(e,"exit",n)})}))):L(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=P(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(i.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(D.a)(e,["component","childFactory"]),i=this.state.contextValue,o=F(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?a.a.createElement(x.Provider,{value:i},o):a.a.createElement(x.Provider,{value:i},a.a.createElement(t,r,o))},t}(a.a.Component);U.propTypes={},U.defaultProps={component:"div",childFactory:function(e){return e}};var j=U,V="undefined"===typeof window?a.a.useEffect:a.a.useLayoutEffect;var q=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,i=e.rippleX,o=e.rippleY,s=e.rippleSize,c=e.in,l=e.onExited,h=void 0===l?function(){}:l,f=e.timeout,p=a.a.useState(!1),d=p[0],m=p[1],v=u(t.ripple,t.rippleVisible,r&&t.ripplePulsate),g={width:s,height:s,top:-s/2+o,left:-s/2+i},b=u(t.child,d&&t.childLeaving,r&&t.childPulsate),w=y(h);return V((function(){if(!c){m(!0);var e=setTimeout(w,f);return function(){clearTimeout(e)}}}),[w,c,f]),a.a.createElement("span",{className:v,style:g},a.a.createElement("span",{className:b}))},B=a.a.forwardRef((function(e,t){var n=e.center,o=void 0!==n&&n,s=e.classes,c=e.className,l=Object(r.a)(e,["center","classes","className"]),h=a.a.useState([]),f=h[0],p=h[1],d=a.a.useRef(0),m=a.a.useRef(null);a.a.useEffect((function(){m.current&&(m.current(),m.current=null)}),[f]);var y=a.a.useRef(!1),v=a.a.useRef(null),g=a.a.useRef(null),b=a.a.useRef(null);a.a.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var w=a.a.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;p((function(e){return[].concat(Object(A.a)(e),[a.a.createElement(q,{key:d.current,classes:s,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),d.current+=1,m.current=o}),[s]),_=a.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&y.current)y.current=!1;else{"touchstart"===e.type&&(y.current=!0);var l,h,f,p=c?null:b.current,d=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(d.width/2),h=Math.round(d.height/2);else{var m=e.clientX?e.clientX:e.touches[0].clientX,_=e.clientY?e.clientY:e.touches[0].clientY;l=Math.round(m-d.left),h=Math.round(_-d.top)}if(s)(f=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(f+=1);else{var T=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,E=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(T,2)+Math.pow(E,2))}e.touches?(g.current=function(){w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})},v.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[o,w]),T=a.a.useCallback((function(){_({},{pulsate:!0})}),[_]),E=a.a.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&g.current)return e.persist(),g.current(),g.current=null,void(v.current=setTimeout((function(){E(e,t)})));g.current=null,p((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return a.a.useImperativeHandle(t,(function(){return{pulsate:T,start:_,stop:E}}),[T,_,E]),a.a.createElement("span",Object(i.a)({className:u(s.root,c),ref:b},l),a.a.createElement(j,{component:null,exit:!0},f))}));var W,z=Object(c.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(((W=a.a.memo(B)).muiName="MuiTouchRipple",W)),K=a.a.forwardRef((function(e,t){var n=e.action,o=e.buttonRef,s=e.centerRipple,c=void 0!==s&&s,l=e.children,h=e.classes,p=e.className,m=e.component,v=void 0===m?"button":m,b=e.disabled,w=void 0!==b&&b,_=e.disableRipple,T=void 0!==_&&_,E=e.disableTouchRipple,S=void 0!==E&&E,C=e.focusRipple,I=void 0!==C&&C,k=e.focusVisibleClassName,A=e.onBlur,D=e.onClick,R=e.onFocus,O=e.onFocusVisible,x=e.onKeyDown,P=e.onKeyUp,M=e.onMouseDown,L=e.onMouseLeave,F=e.onMouseUp,U=e.onTouchEnd,j=e.onTouchMove,V=e.onTouchStart,q=e.onDragLeave,B=e.tabIndex,W=void 0===B?0:B,K=e.TouchRippleProps,H=e.type,Q=void 0===H?"button":H,G=Object(r.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),Y=a.a.useRef(null);var X=a.a.useRef(null),$=a.a.useState(!1),J=$[0],Z=$[1];w&&J&&Z(!1);var ee=N(),te=ee.isFocusVisible,ne=ee.onBlurVisible,re=ee.ref;function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;return y((function(r){return t&&t(r),!n&&X.current&&X.current[e](r),!0}))}a.a.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),Y.current.focus()}}}),[]),a.a.useEffect((function(){J&&I&&!T&&X.current.pulsate()}),[T,I,J]);var oe=ie("start",M),ae=ie("stop",q),se=ie("stop",F),ue=ie("stop",(function(e){J&&e.preventDefault(),L&&L(e)})),ce=ie("start",V),le=ie("stop",U),he=ie("stop",j),fe=ie("stop",(function(e){J&&(ne(e),Z(!1)),A&&A(e)}),!1),pe=y((function(e){w||(Y.current||(Y.current=e.currentTarget),te(e)&&(Z(!0),O&&O(e)),R&&R(e))})),de=a.a.useRef(!1),me=y((function(e){I&&!de.current&&J&&X.current&&" "===e.key&&(de.current=!0,e.persist(),X.current.stop(e,(function(){X.current.start(e)}))),x&&x(e);var t=f.a.findDOMNode(Y.current);e.target!==e.currentTarget||!v||"button"===v||" "!==e.key&&"Enter"!==e.key||"A"===t.tagName&&t.href||(e.preventDefault(),D&&D(e))})),ye=y((function(e){I&&" "===e.key&&X.current&&J&&(de.current=!1,e.persist(),X.current.stop(e,(function(){X.current.pulsate(e)}))),P&&P(e)})),ve=v;"button"===ve&&G.href&&(ve="a");var ge={};"button"===ve?(ge.type=Q,ge.disabled=w):("a"===ve&&G.href||(ge.role="button"),ge["aria-disabled"]=w);var be=d(o,t),we=d(re,Y),_e=d(be,we);return a.a.createElement(ve,Object(i.a)({className:u(h.root,p,J&&[h.focusVisible,k],w&&h.disabled),onBlur:fe,onClick:D,onFocus:pe,onKeyDown:me,onKeyUp:ye,onMouseDown:oe,onMouseLeave:ue,onMouseUp:se,onDragLeave:ae,onTouchEnd:le,onTouchMove:he,onTouchStart:ce,ref:_e,tabIndex:w?-1:W},ge,G),l,T||w?null:a.a.createElement(g,null,a.a.createElement(z,Object(i.a)({ref:X,center:c},K))))})),H=Object(c.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(K);function Q(e){return e.charAt(0).toUpperCase()+e.slice(1)}var G=a.a.forwardRef((function(e,t){var n=e.children,o=e.classes,s=e.className,c=e.color,l=void 0===c?"default":c,h=e.component,f=void 0===h?"button":h,p=e.disabled,d=void 0!==p&&p,m=e.disableFocusRipple,y=void 0!==m&&m,v=e.endIcon,g=e.focusVisibleClassName,b=e.fullWidth,w=void 0!==b&&b,_=e.size,T=void 0===_?"medium":_,E=e.startIcon,S=e.type,C=void 0===S?"button":S,I=e.variant,k=void 0===I?"text":I,N=Object(r.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),A=E&&a.a.createElement("span",{className:u(o.startIcon,o["iconSize".concat(Q(T))])},E),D=v&&a.a.createElement("span",{className:u(o.endIcon,o["iconSize".concat(Q(T))])},v);return a.a.createElement(H,Object(i.a)({className:u(o.root,o[k],s,"inherit"===l?o.colorInherit:"default"!==l&&o["".concat(k).concat(Q(l))],"medium"!==T&&[o["".concat(k,"Size").concat(Q(T))],o["size".concat(Q(T))]],d&&o.disabled,w&&o.fullWidth),component:f,disabled:d,focusRipple:!y,focusVisibleClassName:u(o.focusVisible,g),ref:t,type:C},N),a.a.createElement("span",{className:o.label},A,n,D))}));t.a=Object(c.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(l.b)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(l.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(l.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(l.b)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(l.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(l.b)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(l.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(G)}]]);
//# sourceMappingURL=2.01538b6b.chunk.js.map